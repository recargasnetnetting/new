(()=>{var ao=Object.defineProperty,lo=Object.defineProperties;var ho=Object.getOwnPropertyDescriptors;var Wt=Object.getOwnPropertySymbols;var rr=Object.prototype.hasOwnProperty,nr=Object.prototype.propertyIsEnumerable;var or=(t,e,i)=>e in t?ao(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,M=(t,e)=>{for(var i in e||(e={}))rr.call(e,i)&&or(t,i,e[i]);if(Wt)for(var i of Wt(e))nr.call(e,i)&&or(t,i,e[i]);return t},Te=(t,e)=>lo(t,ho(e));var ar=(t,e)=>{var i={};for(var s in t)rr.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&Wt)for(var s of Wt(t))e.indexOf(s)<0&&nr.call(t,s)&&(i[s]=t[s]);return i};var P=(t,e,i)=>new Promise((s,r)=>{var n=l=>{try{a(i.next(l))}catch(c){r(c)}},o=l=>{try{a(i.throw(l))}catch(c){r(c)}},a=l=>l.done?s(l.value):Promise.resolve(l.value).then(n,o);a((i=i.apply(t,e)).next())});var De=class{constructor(e={}){e=Object.assign({resolveTimeout:null,resolveValue:!0,rejectTimeout:null,rejectValue:!1},e),this._promise=new Promise((o,a)=>{this.resolve=o,this.reject=a}),this.then=this._promise.then.bind(this._promise),this.catch=this._promise.catch.bind(this._promise),this.finally=this._promise.finally.bind(this._promise),this[Symbol.toStringTag]="Promise";let{resolveTimeout:i,resolveValue:s,rejectTimeout:r,rejectValue:n}=e;i&&setTimeout(()=>this.resolve(s),i),r&&setTimeout(()=>this.reject(n),r)}};var lr="layer";function hr(t,e){document.dispatchEvent(new CustomEvent("doofinder.register",{detail:{name:t,entrypoint:e}}))}var yt=t=>typeof t=="function"?t:function(){return t},co=typeof self!="undefined"?self:null,Et=typeof window!="undefined"?window:null,rt=co||Et||rt,uo="2.0.0",ke={connecting:0,open:1,closing:2,closed:3},fo=1e4,po=1e3,fe={closed:"closed",errored:"errored",joined:"joined",joining:"joining",leaving:"leaving"},Oe={close:"phx_close",error:"phx_error",join:"phx_join",reply:"phx_reply",leave:"phx_leave"},ts={longpoll:"longpoll",websocket:"websocket"},mo={complete:4},zt=class{constructor(t,e,i,s){this.channel=t,this.event=e,this.payload=i||function(){return{}},this.receivedResp=null,this.timeout=s,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}resend(t){this.timeout=t,this.reset(),this.send()}send(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}receive(t,e){return this.hasReceived(t)&&e(this.receivedResp.response),this.recHooks.push({status:t,callback:e}),this}reset(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}matchReceive({status:t,response:e,_ref:i}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(e))}cancelRefEvent(){!this.refEvent||this.channel.off(this.refEvent)}cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}startTimeout(){this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,t=>{this.cancelRefEvent(),this.cancelTimeout(),this.receivedResp=t,this.matchReceive(t)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}trigger(t,e){this.channel.trigger(this.refEvent,{status:t,response:e})}},cr=class{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=null,this.tries=0}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}},go=class{constructor(t,e,i){this.state=fe.closed,this.topic=t,this.params=yt(e||{}),this.socket=i,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new zt(this,Oe.join,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new cr(()=>{this.socket.isConnected()&&this.rejoin()},this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(()=>this.rejoinTimer.reset())),this.stateChangeRefs.push(this.socket.onOpen(()=>{this.rejoinTimer.reset(),this.isErrored()&&this.rejoin()})),this.joinPush.receive("ok",()=>{this.state=fe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this.joinPush.receive("error",()=>{this.state=fe.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.hasLogger()&&this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=fe.closed,this.socket.remove(this)}),this.onError(s=>{this.socket.hasLogger()&&this.socket.log("channel",`error ${this.topic}`,s),this.isJoining()&&this.joinPush.reset(),this.state=fe.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",()=>{this.socket.hasLogger()&&this.socket.log("channel",`timeout ${this.topic} (${this.joinRef()})`,this.joinPush.timeout),new zt(this,Oe.leave,yt({}),this.timeout).send(),this.state=fe.errored,this.joinPush.reset(),this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.on(Oe.reply,(s,r)=>{this.trigger(this.replyEventName(r),s)})}join(t=this.timeout){if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=t,this.joinedOnce=!0,this.rejoin(),this.joinPush}onClose(t){this.on(Oe.close,t)}onError(t){return this.on(Oe.error,e=>t(e))}on(t,e){let i=this.bindingRef++;return this.bindings.push({event:t,ref:i,callback:e}),i}off(t,e){this.bindings=this.bindings.filter(i=>!(i.event===t&&(typeof e=="undefined"||e===i.ref)))}canPush(){return this.socket.isConnected()&&this.isJoined()}push(t,e,i=this.timeout){if(e=e||{},!this.joinedOnce)throw new Error(`tried to push '${t}' to '${this.topic}' before joining. Use channel.join() before pushing events`);let s=new zt(this,t,function(){return e},i);return this.canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}leave(t=this.timeout){this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=fe.leaving;let e=()=>{this.socket.hasLogger()&&this.socket.log("channel",`leave ${this.topic}`),this.trigger(Oe.close,"leave")},i=new zt(this,Oe.leave,yt({}),t);return i.receive("ok",()=>e()).receive("timeout",()=>e()),i.send(),this.canPush()||i.trigger("ok",{}),i}onMessage(t,e,i){return e}isMember(t,e,i,s){return this.topic!==t?!1:s&&s!==this.joinRef()?(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:t,event:e,payload:i,joinRef:s}),!1):!0}joinRef(){return this.joinPush.ref}rejoin(t=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=fe.joining,this.joinPush.resend(t))}trigger(t,e,i,s){let r=this.onMessage(t,e,i,s);if(e&&!r)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");let n=this.bindings.filter(o=>o.event===t);for(let o=0;o<n.length;o++)n[o].callback(r,i,s||this.joinRef())}replyEventName(t){return`chan_reply_${t}`}isClosed(){return this.state===fe.closed}isErrored(){return this.state===fe.errored}isJoined(){return this.state===fe.joined}isJoining(){return this.state===fe.joining}isLeaving(){return this.state===fe.leaving}},Kt=class{static request(t,e,i,s,r,n,o){if(rt.XDomainRequest){let a=new rt.XDomainRequest;return this.xdomainRequest(a,t,e,s,r,n,o)}else{let a=new rt.XMLHttpRequest;return this.xhrRequest(a,t,e,i,s,r,n,o)}}static xdomainRequest(t,e,i,s,r,n,o){return t.timeout=r,t.open(e,i),t.onload=()=>{let a=this.parseJSON(t.responseText);o&&o(a)},n&&(t.ontimeout=n),t.onprogress=()=>{},t.send(s),t}static xhrRequest(t,e,i,s,r,n,o,a){return t.open(e,i,!0),t.timeout=n,t.setRequestHeader("Content-Type",s),t.onerror=()=>a&&a(null),t.onreadystatechange=()=>{if(t.readyState===mo.complete&&a){let l=this.parseJSON(t.responseText);a(l)}},o&&(t.ontimeout=o),t.send(r),t}static parseJSON(t){if(!t||t==="")return null;try{return JSON.parse(t)}catch(e){return console&&console.log("failed to parse JSON response",t),null}}static serialize(t,e){let i=[];for(var s in t){if(!Object.prototype.hasOwnProperty.call(t,s))continue;let r=e?`${e}[${s}]`:s,n=t[s];typeof n=="object"?i.push(this.serialize(n,r)):i.push(encodeURIComponent(r)+"="+encodeURIComponent(n))}return i.join("&")}static appendParams(t,e){if(Object.keys(e).length===0)return t;let i=t.match(/\?/)?"&":"?";return`${t}${i}${this.serialize(e)}`}},_o=t=>{let e="",i=new Uint8Array(t),s=i.byteLength;for(let r=0;r<s;r++)e+=String.fromCharCode(i[r]);return btoa(e)},wt=class{constructor(t){this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.reqs=new Set,this.awaitingBatchAck=!1,this.currentBatch=null,this.currentBatchTimer=null,this.batchBuffer=[],this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(t),this.readyState=ke.connecting,setTimeout(()=>this.poll(),0)}normalizeEndpoint(t){return t.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+ts.websocket),"$1/"+ts.longpoll)}endpointURL(){return Kt.appendParams(this.pollEndpoint,{token:this.token})}closeAndRetry(t,e,i){this.close(t,e,i),this.readyState=ke.connecting}ontimeout(){this.onerror("timeout"),this.closeAndRetry(1005,"timeout",!1)}isActive(){return this.readyState===ke.open||this.readyState===ke.connecting}poll(){this.ajax("GET","application/json",null,()=>this.ontimeout(),t=>{if(t){var{status:e,token:i,messages:s}=t;this.token=i}else e=0;switch(e){case 200:s.forEach(r=>{setTimeout(()=>this.onmessage({data:r}),0)}),this.poll();break;case 204:this.poll();break;case 410:this.readyState=ke.open,this.onopen({}),this.poll();break;case 403:this.onerror(403),this.close(1008,"forbidden",!1);break;case 0:case 500:this.onerror(500),this.closeAndRetry(1011,"internal server error",500);break;default:throw new Error(`unhandled poll status ${e}`)}})}send(t){typeof t!="string"&&(t=_o(t)),this.currentBatch?this.currentBatch.push(t):this.awaitingBatchAck?this.batchBuffer.push(t):(this.currentBatch=[t],this.currentBatchTimer=setTimeout(()=>{this.batchSend(this.currentBatch),this.currentBatch=null},0))}batchSend(t){this.awaitingBatchAck=!0,this.ajax("POST","application/x-ndjson",t.join(`
`),()=>this.onerror("timeout"),e=>{this.awaitingBatchAck=!1,!e||e.status!==200?(this.onerror(e&&e.status),this.closeAndRetry(1011,"internal server error",!1)):this.batchBuffer.length>0&&(this.batchSend(this.batchBuffer),this.batchBuffer=[])})}close(t,e,i){for(let r of this.reqs)r.abort();this.readyState=ke.closed;let s=Object.assign({code:1e3,reason:void 0,wasClean:!0},{code:t,reason:e,wasClean:i});this.batchBuffer=[],clearTimeout(this.currentBatchTimer),this.currentBatchTimer=null,typeof CloseEvent!="undefined"?this.onclose(new CloseEvent("close",s)):this.onclose(s)}ajax(t,e,i,s,r){let n,o=()=>{this.reqs.delete(n),s()};n=Kt.request(t,this.endpointURL(),e,i,this.timeout,o,a=>{this.reqs.delete(n),this.isActive()&&r(a)}),this.reqs.add(n)}};var Gt={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode(t,e){if(t.payload.constructor===ArrayBuffer)return e(this.binaryEncode(t));{let i=[t.join_ref,t.ref,t.topic,t.event,t.payload];return e(JSON.stringify(i))}},decode(t,e){if(t.constructor===ArrayBuffer)return e(this.binaryDecode(t));{let[i,s,r,n,o]=JSON.parse(t);return e({join_ref:i,ref:s,topic:r,event:n,payload:o})}},binaryEncode(t){let{join_ref:e,ref:i,event:s,topic:r,payload:n}=t,o=this.META_LENGTH+e.length+i.length+r.length+s.length,a=new ArrayBuffer(this.HEADER_LENGTH+o),l=new DataView(a),c=0;l.setUint8(c++,this.KINDS.push),l.setUint8(c++,e.length),l.setUint8(c++,i.length),l.setUint8(c++,r.length),l.setUint8(c++,s.length),Array.from(e,m=>l.setUint8(c++,m.charCodeAt(0))),Array.from(i,m=>l.setUint8(c++,m.charCodeAt(0))),Array.from(r,m=>l.setUint8(c++,m.charCodeAt(0))),Array.from(s,m=>l.setUint8(c++,m.charCodeAt(0)));var p=new Uint8Array(a.byteLength+n.byteLength);return p.set(new Uint8Array(a),0),p.set(new Uint8Array(n),a.byteLength),p.buffer},binaryDecode(t){let e=new DataView(t),i=e.getUint8(0),s=new TextDecoder;switch(i){case this.KINDS.push:return this.decodePush(t,e,s);case this.KINDS.reply:return this.decodeReply(t,e,s);case this.KINDS.broadcast:return this.decodeBroadcast(t,e,s)}},decodePush(t,e,i){let s=e.getUint8(1),r=e.getUint8(2),n=e.getUint8(3),o=this.HEADER_LENGTH+this.META_LENGTH-1,a=i.decode(t.slice(o,o+s));o=o+s;let l=i.decode(t.slice(o,o+r));o=o+r;let c=i.decode(t.slice(o,o+n));o=o+n;let p=t.slice(o,t.byteLength);return{join_ref:a,ref:null,topic:l,event:c,payload:p}},decodeReply(t,e,i){let s=e.getUint8(1),r=e.getUint8(2),n=e.getUint8(3),o=e.getUint8(4),a=this.HEADER_LENGTH+this.META_LENGTH,l=i.decode(t.slice(a,a+s));a=a+s;let c=i.decode(t.slice(a,a+r));a=a+r;let p=i.decode(t.slice(a,a+n));a=a+n;let m=i.decode(t.slice(a,a+o));a=a+o;let v=t.slice(a,t.byteLength),E={status:m,response:v};return{join_ref:l,ref:c,topic:p,event:Oe.reply,payload:E}},decodeBroadcast(t,e,i){let s=e.getUint8(1),r=e.getUint8(2),n=this.HEADER_LENGTH+2,o=i.decode(t.slice(n,n+s));n=n+s;let a=i.decode(t.slice(n,n+r));n=n+r;let l=t.slice(n,t.byteLength);return{join_ref:null,ref:null,topic:o,event:a,payload:l}}},dr=class{constructor(t,e={}){this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=e.timeout||fo,this.transport=e.transport||rt.WebSocket||wt,this.primaryPassedHealthCheck=!1,this.longPollFallbackMs=e.longPollFallbackMs,this.fallbackTimer=null,this.sessionStore=e.sessionStorage||rt.sessionStorage,this.establishedConnections=0,this.defaultEncoder=Gt.encode.bind(Gt),this.defaultDecoder=Gt.decode.bind(Gt),this.closeWasClean=!1,this.binaryType=e.binaryType||"arraybuffer",this.connectClock=1,this.transport!==wt?(this.encode=e.encode||this.defaultEncoder,this.decode=e.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder);let i=null;Et&&Et.addEventListener&&(Et.addEventListener("pagehide",s=>{this.conn&&(this.disconnect(),i=this.connectClock)}),Et.addEventListener("pageshow",s=>{i===this.connectClock&&(i=null,this.connect())})),this.heartbeatIntervalMs=e.heartbeatIntervalMs||3e4,this.rejoinAfterMs=s=>e.rejoinAfterMs?e.rejoinAfterMs(s):[1e3,2e3,5e3][s-1]||1e4,this.reconnectAfterMs=s=>e.reconnectAfterMs?e.reconnectAfterMs(s):[10,50,100,150,200,250,500,1e3,2e3][s-1]||5e3,this.logger=e.logger||null,!this.logger&&e.debug&&(this.logger=(s,r,n)=>{console.log(`${s}: ${r}`,n)}),this.longpollerTimeout=e.longpollerTimeout||2e4,this.params=yt(e.params||{}),this.endPoint=`${t}/${ts.websocket}`,this.vsn=e.vsn||uo,this.heartbeatTimeoutTimer=null,this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new cr(()=>{this.teardown(()=>this.connect())},this.reconnectAfterMs)}getLongPollTransport(){return wt}replaceTransport(t){this.connectClock++,this.closeWasClean=!0,clearTimeout(this.fallbackTimer),this.reconnectTimer.reset(),this.conn&&(this.conn.close(),this.conn=null),this.transport=t}protocol(){return location.protocol.match(/^https/)?"wss":"ws"}endPointURL(){let t=Kt.appendParams(Kt.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return t.charAt(0)!=="/"?t:t.charAt(1)==="/"?`${this.protocol()}:${t}`:`${this.protocol()}://${location.host}${t}`}disconnect(t,e,i){this.connectClock++,this.closeWasClean=!0,clearTimeout(this.fallbackTimer),this.reconnectTimer.reset(),this.teardown(t,e,i)}connect(t){t&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=yt(t)),!this.conn&&(this.longPollFallbackMs&&this.transport!==wt?this.connectWithFallback(wt,this.longPollFallbackMs):this.transportConnect())}log(t,e,i){this.logger&&this.logger(t,e,i)}hasLogger(){return this.logger!==null}onOpen(t){let e=this.makeRef();return this.stateChangeCallbacks.open.push([e,t]),e}onClose(t){let e=this.makeRef();return this.stateChangeCallbacks.close.push([e,t]),e}onError(t){let e=this.makeRef();return this.stateChangeCallbacks.error.push([e,t]),e}onMessage(t){let e=this.makeRef();return this.stateChangeCallbacks.message.push([e,t]),e}ping(t){if(!this.isConnected())return!1;let e=this.makeRef(),i=Date.now();this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:e});let s=this.onMessage(r=>{r.ref===e&&(this.off([s]),t(Date.now()-i))});return!0}transportConnect(){this.connectClock++,this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=()=>this.onConnOpen(),this.conn.onerror=t=>this.onConnError(t),this.conn.onmessage=t=>this.onConnMessage(t),this.conn.onclose=t=>this.onConnClose(t)}getSession(t){return this.sessionStore&&this.sessionStore.getItem(t)}storeSession(t,e){this.sessionStore&&this.sessionStore.setItem(t,e)}connectWithFallback(t,e=2500){clearTimeout(this.fallbackTimer);let i=!1,s=!0,r,n,o=a=>{this.log("transport",`falling back to ${t.name}...`,a),this.off([r,n]),s=!1,this.replaceTransport(t),this.transportConnect()};if(this.getSession(`phx:fallback:${t.name}`))return o("memorized");this.fallbackTimer=setTimeout(o,e),n=this.onError(a=>{this.log("transport","error",a),s&&!i&&(clearTimeout(this.fallbackTimer),o(a))}),this.onOpen(()=>{if(i=!0,!s)return this.primaryPassedHealthCheck||this.storeSession(`phx:fallback:${t.name}`,"true"),this.log("transport",`established ${t.name} fallback`);clearTimeout(this.fallbackTimer),this.fallbackTimer=setTimeout(o,e),this.ping(a=>{this.log("transport","connected to primary after",a),this.primaryPassedHealthCheck=!0,clearTimeout(this.fallbackTimer)})}),this.transportConnect()}clearHeartbeats(){clearTimeout(this.heartbeatTimer),clearTimeout(this.heartbeatTimeoutTimer)}onConnOpen(){this.hasLogger()&&this.log("transport",`${this.transport.name} connected to ${this.endPointURL()}`),this.closeWasClean=!1,this.establishedConnections++,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(([,t])=>t())}heartbeatTimeout(){this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.triggerChanError(),this.closeWasClean=!1,this.teardown(()=>this.reconnectTimer.scheduleTimeout(),po,"heartbeat timeout"))}resetHeartbeat(){this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,this.clearHeartbeats(),this.heartbeatTimer=setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs))}teardown(t,e,i){if(!this.conn)return t&&t();this.waitForBufferDone(()=>{this.conn&&(e?this.conn.close(e,i||""):this.conn.close()),this.waitForSocketClosed(()=>{this.conn&&(this.conn.onopen=function(){},this.conn.onerror=function(){},this.conn.onmessage=function(){},this.conn.onclose=function(){},this.conn=null),t&&t()})})}waitForBufferDone(t,e=1){if(e===5||!this.conn||!this.conn.bufferedAmount){t();return}setTimeout(()=>{this.waitForBufferDone(t,e+1)},150*e)}waitForSocketClosed(t,e=1){if(e===5||!this.conn||this.conn.readyState===ke.closed){t();return}setTimeout(()=>{this.waitForSocketClosed(t,e+1)},150*e)}onConnClose(t){let e=t&&t.code;this.hasLogger()&&this.log("transport","close",t),this.triggerChanError(),this.clearHeartbeats(),!this.closeWasClean&&e!==1e3&&this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(([,i])=>i(t))}onConnError(t){this.hasLogger()&&this.log("transport",t);let e=this.transport,i=this.establishedConnections;this.stateChangeCallbacks.error.forEach(([,s])=>{s(t,e,i)}),(e===this.transport||i>0)&&this.triggerChanError()}triggerChanError(){this.channels.forEach(t=>{t.isErrored()||t.isLeaving()||t.isClosed()||t.trigger(Oe.error)})}connectionState(){switch(this.conn&&this.conn.readyState){case ke.connecting:return"connecting";case ke.open:return"open";case ke.closing:return"closing";default:return"closed"}}isConnected(){return this.connectionState()==="open"}remove(t){this.off(t.stateChangeRefs),this.channels=this.channels.filter(e=>e!==t)}off(t){for(let e in this.stateChangeCallbacks)this.stateChangeCallbacks[e]=this.stateChangeCallbacks[e].filter(([i])=>t.indexOf(i)===-1)}channel(t,e={}){let i=new go(t,e,this);return this.channels.push(i),i}push(t){if(this.hasLogger()){let{topic:e,event:i,payload:s,ref:r,join_ref:n}=t;this.log("push",`${e} ${i} (${n}, ${r})`,s)}this.isConnected()?this.encode(t,e=>this.conn.send(e)):this.sendBuffer.push(()=>this.encode(t,e=>this.conn.send(e)))}makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}sendHeartbeat(){this.pendingHeartbeatRef&&!this.isConnected()||(this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatTimeoutTimer=setTimeout(()=>this.heartbeatTimeout(),this.heartbeatIntervalMs))}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}onConnMessage(t){this.decode(t.data,e=>{let{topic:i,event:s,payload:r,ref:n,join_ref:o}=e;n&&n===this.pendingHeartbeatRef&&(this.clearHeartbeats(),this.pendingHeartbeatRef=null,this.heartbeatTimer=setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)),this.hasLogger()&&this.log("receive",`${r.status||""} ${i} ${s} ${n&&"("+n+")"||""}`,r);for(let a=0;a<this.channels.length;a++){let l=this.channels[a];!l.isMember(i,s,r,o)||l.trigger(s,r,n,o)}for(let a=0;a<this.stateChangeCallbacks.message.length;a++){let[,l]=this.stateChangeCallbacks.message[a];l(e)}})}leaveOpenTopic(t){let e=this.channels.find(i=>i.topic===t&&(i.isJoined()||i.isJoining()));e&&(this.hasLogger()&&this.log("transport",`leaving duplicate topic "${t}"`),e.leave())}};var ur=(t,e,i)=>{e.forEach(s=>{t.addEventListener(s,i)})},fr=(t,e,i)=>{e.forEach(s=>{t.removeEventListener(s,i)})},is=class{constructor(e){this.defaults={idle:1e4,events:["mousemove","scroll","keydown","mousedown","touchstart"],onIdle:null,onActive:null,onHide:null,onShow:null,keepTracking:!0,startAtIdle:!1,recurIdleCall:!1},this.throwOnBadKey(Object.keys(e),Object.keys(this.defaults)),this.settings=Object.assign({},this.defaults,e),this.visibilityEvents=["visibilitychange","webkitvisibilitychange","mozvisibilitychange","msvisibilitychange"],this.clearTimeout=null,this.reset(),this.stopListener=i=>{this.stop()},this.idlenessEventsHandler=i=>{this.idle&&(this.idle=!1,this.settings.onActive&&this.settings.onActive.call()),this.resetTimeout(this.settings)},this.visibilityEventsHandler=i=>{document.hidden||document.webkitHidden||document.mozHidden||document.msHidden?this.visible&&(this.visible=!1,this.settings.onHide&&this.settings.onHide.call()):this.visible||(this.visible=!0,this.settings.onShow&&this.settings.onShow.call())}}resetTimeout(e,i=this.settings.keepTracking){this.clearTimeout&&(this.clearTimeout(),this.clearTimeout=null),i&&this.timeout(this.settings)}timeout(e){var i=this.settings.recurIdleCall?{set:setInterval.bind(window),clear:clearInterval.bind(window)}:{set:setTimeout.bind(window),clear:clearTimeout.bind(window)},s=i.set(function(){this.idle=!0,this.settings.onIdle&&this.settings.onIdle.call()}.bind(this),this.settings.idle);this.clearTimeout=()=>i.clear(s)}start(){return window.addEventListener("idle:stop",this.stopListener),this.timeout(this.settings),ur(window,this.settings.events,this.idlenessEventsHandler),(this.settings.onShow||this.settings.onHide)&&ur(document,this.visibilityEvents,this.visibilityEventsHandler),this}stop(){return window.removeEventListener("idle:stop",this.stopListener),fr(window,this.settings.events,this.idlenessEventsHandler),this.resetTimeout(this.settings,!1),(this.settings.onShow||this.settings.onHide)&&fr(document,this.visibilityEvents,this.visibilityEventsHandler),this}reset({idle:e=this.settings.startAtIdle,visible:i=!this.settings.startAtIdle}={}){return this.idle=e,this.visible=i,this}throwOnBadKey(e,i){e.forEach(function(s){if(!i.includes(s))throw`set: Unknown key ${s}`})}set(e){this.throwOnBadKey(Object.keys(e),Object.keys(this.defaults)),this.settings=Object.assign(this.settings,e)}};var ss=class extends dr{constructor(e,i={}){super(e,i);this.preventReconnect=!1,this.shouldReconnect=!1,this.idleMonitor=new is({idle:3*60*1e3,onActive:this.onShowOrActive.bind(this),onShow:this.onShowOrActive.bind(this)}),this.idleMonitor.start()}onShowOrActive(){this.shouldReconnect&&this.idleMonitor.visible&&!this.idleMonitor.idle&&(this.shouldReconnect=!1,this.reconnectTimer.scheduleTimeout())}onConnClose(e){this.hasLogger()&&this.log("transport","close",e),this.triggerChanError(),this.clearHeartbeats(),this.preventReconnect||(this.closeWasClean?this.idleMonitor.stop():this.scheduleReconnect()),this.stateChangeCallbacks.close.forEach(([,i])=>i(e))}scheduleReconnect(){!this.idleMonitor.idle&&this.idleMonitor.visible?this.reconnectTimer.scheduleTimeout():(this.reconnectTimer.reset(),this.shouldReconnect=!0)}};var U="search",Yt="consecutive-reloads",pr=10,mr=5e3,gr=1e4,_r=3e4,Qt=["phx-click-loading","phx-change-loading","phx-submit-loading","phx-keydown-loading","phx-keyup-loading","phx-blur-loading","phx-focus-loading","phx-hook-loading"],pe="data-phx-component";var vr="track-static";var oe="data-phx-ref",Pe="data-phx-ref-src",Zt="track-uploads",me="data-phx-upload-ref",nt="data-phx-preflighted-refs",br="data-phx-done-refs",rs="drop-target",At="data-phx-active-refs",ot=`${U}:live-file:updated`,ei="data-phx-skip",ti="data-phx-id",ns="data-phx-prune",os="page-loading",as="phx-connected",at="phx-loading",Ct="phx-no-feedback",xt="phx-error",ls="phx-client-error",ii="phx-server-error",We="data-phx-parent-id",si="data-phx-main",Re="data-dfd-root-id",ri="viewport-top",ni="viewport-bottom",Sr="trigger-action",ze="feedback-for",Ke="feedback-group",Tt="phx-has-focused",yr=["text","textarea","number","email","password","search","tel","url","date","time","datetime-local","color","range"],oi=["checkbox","radio"],lt="phx-has-submitted",ve="data-dfd-view",He=`[${ve}]`,hs="data-phx-sticky",Fe="data-phx-static",ai="data-phx-readonly",Ge="data-phx-disabled",kt="disable-with",Pt="data-phx-disable-with-restore",ht="hook",Er="debounce",wr="throttle",ct="update",li="stream",hi="data-phx-stream",Ar="key",Ee="phxPrivate",cs="auto-recover",Rt="phx:live-socket:debug",ci="phx:live-socket:profiling",di="phx:live-socket:latency-sim",Cr="progress",ds="mounted",xr=1,Tr=200,kr="dfd-",Pr=3e4;var dt="debounce-trigger",ut="throttled",us="debounce-prev-key",Rr={debounce:300,throttle:300},Lt="d",we="s",ui="r",ae="c",fs="e",ps="r",ms="t",Lr="p",gs="stream";var fi=class{constructor(e,i,s){this.liveSocket=s,this.entry=e,this.offset=0,this.chunkSize=i,this.chunkTimer=null,this.errored=!1,this.uploadChannel=s.channel(`lvu:${e.ref}`,{token:e.metadata()})}error(e){this.errored||(this.uploadChannel.leave(),this.errored=!0,clearTimeout(this.chunkTimer),this.entry.error(e))}upload(){this.uploadChannel.onError(e=>this.error(e)),this.uploadChannel.join().receive("ok",e=>this.readNextChunk()).receive("error",e=>this.error(e))}isDone(){return this.offset>=this.entry.file.size}readNextChunk(){let e=new window.FileReader,i=this.entry.file.slice(this.offset,this.chunkSize+this.offset);e.onload=s=>{if(s.target.error===null)this.offset+=s.target.result.byteLength,this.pushChunk(s.target.result);else return ie("Read error: "+s.target.error)},e.readAsArrayBuffer(i)}pushChunk(e){!this.uploadChannel.isJoined()||this.uploadChannel.push("chunk",e).receive("ok",()=>{this.entry.progress(this.offset/this.entry.file.size*100),this.isDone()||(this.chunkTimer=setTimeout(()=>this.readNextChunk(),this.liveSocket.getLatencySim()||0))}).receive("error",({reason:i})=>this.error(i))}};var ie=(t,e)=>console.error&&console.error(t,e),be=t=>{let e=typeof t;return e==="number"||e==="string"&&/^(0|[1-9]\d*)$/.test(t)};function Ir(t=document){let e=new Set,i=t.querySelectorAll("*[id]");for(let s=0,r=i.length;s<r;s++)e.has(i[s].id)?console.error(`Multiple IDs detected: ${i[s].id}. Ensure unique element ids.`):e.add(i[s].id)}var Dr=(t,e,i,s)=>{t.liveSocket.isDebugEnabled()&&console.log(`${t.id} ${e}: ${i} - `,s)},pi=t=>typeof t=="function"?t:function(){return t},ft=t=>JSON.parse(JSON.stringify(t)),pt=(t,e,i)=>{do{if(t.matches(`[${e}]`)&&!t.disabled)return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1&&!(i&&i.isSameNode(t)||t.matches(He)));return null},Ye=t=>t!==null&&typeof t=="object"&&!(t instanceof Array),Or=(t,e)=>JSON.stringify(t)===JSON.stringify(e),_s=t=>{for(let e in t)return!1;return!0},Ae=(t,e)=>t&&e(t),Hr=function(t,e,i,s){t.forEach(r=>{new fi(r,i.config.chunk_size,s).upload()})};var Mr={canPushState(){return typeof history.pushState!="undefined"},dropLocal(t,e,i){return t.removeItem(this.localKey(e,i))},updateLocal(t,e,i,s,r){let n=this.getLocal(t,e,i),o=this.localKey(e,i),a=n===null?s:r(n);return t.setItem(o,JSON.stringify(a)),a},getLocal(t,e,i){return JSON.parse(t.getItem(this.localKey(e,i)))},updateCurrentState(t){!this.canPushState()||history.replaceState(t(history.state||{}),"",window.location.href)},pushState(t,e,i){if(this.canPushState()){if(i!==window.location.href){if(e.type=="redirect"&&e.scroll){let r=history.state||{};r.scroll=e.scroll,history.replaceState(r,"",window.location.href)}delete e.scroll,history[t+"State"](e,"",i||null);let s=this.getHashTargetEl(window.location.hash);s?s.scrollIntoView():e.type==="redirect"&&window.scroll(0,0)}}else this.redirect(i)},setCookie(t,e){document.cookie=`${t}=${e}`},getCookie(t){return document.cookie.replace(new RegExp(`(?:(?:^|.*;s*)${t}s*=s*([^;]*).*$)|^.*$`),"$1")},redirect(t,e){e&&Mr.setCookie("__phoenix_flash__",e+"; max-age=60000; path=/"),window.location=t},localKey(t,e){return`${t}-${e}`},getHashTargetEl(t){let e=t.toString().substring(1);if(e!=="")return document.getElementById(e)||document.querySelector(`a[name="${e}"]`)}},Le=Mr;var vo={focusMain(){let t=document.querySelector("main h1, main, h1");if(t){let e=t.tabIndex;t.tabIndex=-1,t.focus(),t.tabIndex=e}},anyOf(t,e){return e.find(i=>t instanceof i)},isFocusable(t,e){return t instanceof HTMLAnchorElement&&t.rel!=="ignore"||t instanceof HTMLAreaElement&&t.href!==void 0||!t.disabled&&this.anyOf(t,[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement])||t instanceof HTMLIFrameElement||t.tabIndex>0||!e&&t.getAttribute("tabindex")!==null&&t.getAttribute("aria-hidden")!=="true"},attemptFocus(t,e){if(this.isFocusable(t,e))try{t.focus()}catch(i){}return!!document.activeElement&&document.activeElement.isSameNode(t)},focusFirstInteractive(t){let e=t.firstElementChild;for(;e;){if(this.attemptFocus(e,!0)||this.focusFirstInteractive(e,!0))return!0;e=e.nextElementSibling}},focusFirst(t){let e=t.firstElementChild;for(;e;){if(this.attemptFocus(e)||this.focusFirst(e))return!0;e=e.nextElementSibling}},focusLast(t){let e=t.lastElementChild;for(;e;){if(this.attemptFocus(e)||this.focusLast(e))return!0;e=e.previousElementSibling}}},Ue=vo;var mi=null,Nr=200,bo={exec(t,e,i,s,r){let[n,o]=r||[null,{callback:r&&r.callback}];(e.charAt(0)==="["?JSON.parse(e):[[n,o]]).forEach(([l,c])=>{l===n&&o.data&&(c.data=Object.assign(c.data||{},o.data),c.callback=c.callback||o.callback),this.filterToEls(s,c).forEach(p=>{this[`exec_${l}`](t,e,i,s,p,c)})})},isVisible(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length>0)},isInViewport(t){let e=t.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,s=window.innerWidth||document.documentElement.clientWidth;return e.right>0&&e.bottom>0&&e.left<s&&e.top<i},exec_exec(t,e,i,s,r,{attr:n,to:o}){(o?f.all(document,o):[s]).forEach(l=>{let c=l.getAttribute(n);if(!c)throw new Error(`expected ${n} to contain JS command on "${o}"`);i.liveSocket.execJS(l,c,t)})},exec_dispatch(t,e,i,s,r,{to:n,event:o,detail:a,bubbles:l}){a=a||{},a.dispatcher=s,f.dispatchEvent(r,o,{detail:a,bubbles:l})},exec_push(t,e,i,s,r,n){let{event:o,data:a,target:l,page_loading:c,loading:p,value:m,dispatcher:v,callback:E}=n,b={loading:p,value:m,target:l,page_loading:!!c},A=t==="change"&&v?v:s,N=l||A.getAttribute(i.binding("target"))||A;i.withinTargets(N,(I,L)=>{if(!!I.isConnected())if(t==="change"){let{newCid:B,_target:q}=n;q=q||(f.isFormInput(s)?s.name:void 0),q&&(b._target=q),I.pushInput(s,L,B,o||e,b,E)}else if(t==="submit"){let{submitter:B}=n;I.submitForm(s,L,o||e,B,b,E)}else I.pushEvent(t,s,L,o||e,a,b,E)})},exec_navigate(t,e,i,s,r,{href:n,replace:o}){i.liveSocket.historyRedirect(n,o?"replace":"push")},exec_patch(t,e,i,s,r,{href:n,replace:o}){i.liveSocket.pushHistoryPatch(n,o?"replace":"push",s)},exec_focus(t,e,i,s,r){window.requestAnimationFrame(()=>Ue.attemptFocus(r))},exec_focus_first(t,e,i,s,r){window.requestAnimationFrame(()=>Ue.focusFirstInteractive(r)||Ue.focusFirst(r))},exec_push_focus(t,e,i,s,r){window.requestAnimationFrame(()=>mi=r||s)},exec_pop_focus(t,e,i,s,r){window.requestAnimationFrame(()=>{mi&&mi.focus(),mi=null})},exec_add_class(t,e,i,s,r,{names:n,transition:o,time:a}){this.addOrRemoveClasses(r,n,[],o,a,i)},exec_remove_class(t,e,i,s,r,{names:n,transition:o,time:a}){this.addOrRemoveClasses(r,[],n,o,a,i)},exec_toggle_class(t,e,i,s,r,{to:n,names:o,transition:a,time:l}){this.toggleClasses(r,o,a,i)},exec_toggle_attr(t,e,i,s,r,{attr:[n,o,a]}){r.hasAttribute(n)?a!==void 0?r.getAttribute(n)===o?this.setOrRemoveAttrs(r,[[n,a]],[]):this.setOrRemoveAttrs(r,[[n,o]],[]):this.setOrRemoveAttrs(r,[],[n]):this.setOrRemoveAttrs(r,[[n,o]],[])},exec_transition(t,e,i,s,r,{time:n,transition:o}){this.addOrRemoveClasses(r,[],[],o,n,i)},exec_toggle(t,e,i,s,r,{display:n,ins:o,outs:a,time:l}){this.toggle(t,i,r,n,o,a,l)},exec_show(t,e,i,s,r,{display:n,transition:o,time:a}){this.show(t,i,r,n,o,a)},exec_hide(t,e,i,s,r,{display:n,transition:o,time:a}){this.hide(t,i,r,n,o,a)},exec_set_attr(t,e,i,s,r,{attr:[n,o]}){this.setOrRemoveAttrs(r,[[n,o]],[])},exec_remove_attr(t,e,i,s,r,{attr:n}){this.setOrRemoveAttrs(r,[],[n])},show(t,e,i,s,r,n){this.isVisible(i)||this.toggle(t,e,i,s,r,null,n)},hide(t,e,i,s,r,n){this.isVisible(i)&&this.toggle(t,e,i,s,null,r,n)},toggle(t,e,i,s,r,n,o){o=o||Nr;let[a,l,c]=r||[[],[],[]],[p,m,v]=n||[[],[],[]];if(a.length>0||p.length>0)if(this.isVisible(i)){let E=()=>{this.addOrRemoveClasses(i,m,a.concat(l).concat(c)),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(i,p,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(i,v,m))})};i.dispatchEvent(new Event(`${U}:hide-start`)),e.transition(o,E,()=>{this.addOrRemoveClasses(i,[],p.concat(v)),f.putSticky(i,"toggle",b=>b.style.display="none"),i.dispatchEvent(new Event(`${U}:hide-end`))})}else{if(t==="remove")return;let E=()=>{this.addOrRemoveClasses(i,l,p.concat(m).concat(v));let b=s||this.defaultDisplay(i);f.putSticky(i,"toggle",A=>A.style.display=b),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(i,a,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(i,c,l))})};i.dispatchEvent(new Event(`${U}:show-start`)),e.transition(o,E,()=>{this.addOrRemoveClasses(i,[],a.concat(c)),i.dispatchEvent(new Event(`${U}:show-end`))})}else this.isVisible(i)?window.requestAnimationFrame(()=>{i.dispatchEvent(new Event(`${U}:hide-start`)),f.putSticky(i,"toggle",E=>E.style.display="none"),i.dispatchEvent(new Event(`${U}:hide-end`))}):window.requestAnimationFrame(()=>{i.dispatchEvent(new Event(`${U}:show-start`));let E=s||this.defaultDisplay(i);f.putSticky(i,"toggle",b=>b.style.display=E),i.dispatchEvent(new Event(`${U}:show-end`))})},toggleClasses(t,e,i,s,r){window.requestAnimationFrame(()=>{let[n,o]=f.getSticky(t,"classes",[[],[]]),a=e.filter(c=>n.indexOf(c)<0&&!t.classList.contains(c)),l=e.filter(c=>o.indexOf(c)<0&&t.classList.contains(c));this.addOrRemoveClasses(t,a,l,i,s,r)})},addOrRemoveClasses(t,e,i,s,r,n){r=r||Nr;let[o,a,l]=s||[[],[],[]];if(o.length>0){let c=()=>{this.addOrRemoveClasses(t,a,[].concat(o).concat(l)),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(t,o,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(t,l,a))})},p=()=>this.addOrRemoveClasses(t,e.concat(l),i.concat(o).concat(a));return n.transition(r,c,p)}window.requestAnimationFrame(()=>{let[c,p]=f.getSticky(t,"classes",[[],[]]),m=e.filter(A=>c.indexOf(A)<0&&!t.classList.contains(A)),v=i.filter(A=>p.indexOf(A)<0&&t.classList.contains(A)),E=c.filter(A=>i.indexOf(A)<0).concat(m),b=p.filter(A=>e.indexOf(A)<0).concat(v);f.putSticky(t,"classes",A=>(A.classList.remove(...b),A.classList.add(...E),[E,b]))})},setOrRemoveAttrs(t,e,i){let[s,r]=f.getSticky(t,"attrs",[[],[]]),n=e.map(([l,c])=>l).concat(i),o=s.filter(([l,c])=>!n.includes(l)).concat(e),a=r.filter(l=>!n.includes(l)).concat(i);f.putSticky(t,"attrs",l=>(a.forEach(c=>l.removeAttribute(c)),o.forEach(([c,p])=>l.setAttribute(c,p)),[o,a]))},hasAllClasses(t,e){return e.every(i=>t.classList.contains(i))},isToggledOut(t,e){return!this.isVisible(t)||this.hasAllClasses(t,e)},filterToEls(t,{to:e}){return e?f.all(document,e):[t]},defaultDisplay(t){return{tr:"table-row",td:"table-cell"}[t.tagName.toLowerCase()]||"block"}},ee=bo;var Se={byId(t){return document.getElementById(t)||ie(`no id found for ${t}`)},removeClass(t,e){t.classList.remove(e),t.classList.length===0&&t.removeAttribute("class")},all(t,e,i){if(!t)return[];let s=Array.from(t.querySelectorAll(e));return i?s.forEach(i):s},childNodeLength(t){let e=document.createElement("template");return e.innerHTML=t,e.content.childElementCount},isUploadInput(t){return t.type==="file"&&t.getAttribute(me)!==null},isAutoUpload(t){return t.hasAttribute("data-phx-auto-upload")},findUploadInputs(t){let e=t.id,i=this.all(document,`input[type="file"][${me}][form="${e}"]`);return this.all(t,`input[type="file"][${me}]`).concat(i)},findComponentNodeList(t,e){return this.filterWithinSameLiveView(this.all(t,`[${pe}="${e}"]`),t)},isPhxDestroyed(t){return!!(t.id&&Se.private(t,"destroyed"))},wantsNewTab(t){let e=t.ctrlKey||t.shiftKey||t.metaKey||t.button&&t.button===1,i=t.target instanceof HTMLAnchorElement&&t.target.hasAttribute("download"),s=t.target.hasAttribute("target")&&t.target.getAttribute("target").toLowerCase()==="_blank";return e||s||i},isUnloadableFormSubmit(t){return t.target&&t.target.getAttribute("method")==="dialog"||t.submitter&&t.submitter.getAttribute("formmethod")==="dialog"?!1:!t.defaultPrevented&&!this.wantsNewTab(t)},isNewPageClick(t,e){let i=t.target instanceof HTMLAnchorElement?t.target.getAttribute("href"):null,s;if(t.defaultPrevented||i===null||this.wantsNewTab(t)||i.startsWith("mailto:")||i.startsWith("tel:")||t.target.isContentEditable)return!1;try{s=new URL(i)}catch(r){try{s=new URL(i,e)}catch(n){return!0}}return s.host===e.host&&s.protocol===e.protocol&&s.pathname===e.pathname&&s.search===e.search?s.hash===""&&!s.href.endsWith("#"):s.protocol.startsWith("http")},markPhxChildDestroyed(t){this.isPhxChild(t)&&t.setAttribute(ve,""),this.putPrivate(t,"destroyed",!0)},findPhxChildrenInFragment(t,e){let i=document.createElement("template");return i.innerHTML=t,this.findPhxChildren(i.content,e)},isIgnored(t,e){return(t.getAttribute(e)||t.getAttribute("data-phx-update"))==="ignore"},isPhxUpdate(t,e,i){return t.getAttribute&&i.indexOf(t.getAttribute(e))>=0},findPhxSticky(t){return this.all(t,`[${hs}]`)},findPhxChildren(t,e){return this.all(t,`${He}[${We}="${e}"]`)},findParentCIDs(t,e){let i=new Set(e),s=e.reduce((r,n)=>{let o=`[${pe}="${n}"] [${pe}]`;return this.filterWithinSameLiveView(this.all(t,o),t).map(a=>parseInt(a.getAttribute(pe))).forEach(a=>r.delete(a)),r},i);return s.size===0?new Set(e):s},filterWithinSameLiveView(t,e){return e.querySelector(He)?t.filter(i=>this.withinSameLiveView(i,e)):t},withinSameLiveView(t,e){for(;t=t.parentNode;){if(t.isSameNode(e))return!0;if(t.getAttribute(ve)!==null)return!1}},private(t,e){return t[Ee]&&t[Ee][e]},deletePrivate(t,e){t[Ee]&&delete t[Ee][e]},putPrivate(t,e,i){t[Ee]||(t[Ee]={}),t[Ee][e]=i},updatePrivate(t,e,i,s){let r=this.private(t,e);r===void 0?this.putPrivate(t,e,s(i)):this.putPrivate(t,e,s(r))},copyPrivates(t,e){e[Ee]&&(t[Ee]=e[Ee])},putTitle(t){let e=document.querySelector("title");if(e){let{prefix:i,suffix:s}=e.dataset;document.title=`${i||""}${t}${s||""}`}else document.title=t},debounce(t,e,i,s,r,n,o,a){let l=t.getAttribute(i),c=t.getAttribute(r);l===""&&(l=s),c===""&&(c=n);let p=l||c;switch(p){case null:return a();case"blur":this.once(t,"debounce-blur")&&t.addEventListener("blur",()=>a());return;default:let m=parseInt(p),v=()=>c?this.deletePrivate(t,ut):a(),E=this.incCycle(t,dt,v);if(isNaN(m))return ie(`invalid throttle/debounce value: ${p}`);if(c){let A=!1;if(e.type==="keydown"){let N=this.private(t,us);this.putPrivate(t,us,e.key),A=N!==e.key}if(!A&&this.private(t,ut))return!1;{a();let N=setTimeout(()=>{o()&&this.triggerCycle(t,dt)},m);this.putPrivate(t,ut,N)}}else setTimeout(()=>{o()&&this.triggerCycle(t,dt,E)},m);let b=t.form;b&&this.once(b,"bind-debounce")&&b.addEventListener("submit",()=>{Array.from(new FormData(b).entries(),([A])=>{let N=b.querySelector(`[name="${A}"]`);this.incCycle(N,dt),this.deletePrivate(N,ut)})}),this.once(t,"bind-debounce")&&t.addEventListener("blur",()=>{clearTimeout(this.private(t,ut)),this.triggerCycle(t,dt)})}},triggerCycle(t,e,i){let[s,r]=this.private(t,e);i||(i=s),i===s&&(this.incCycle(t,e),r())},once(t,e){return this.private(t,e)===!0?!1:(this.putPrivate(t,e,!0),!0)},incCycle(t,e,i=function(){}){let[s]=this.private(t,e)||[0,i];return s++,this.putPrivate(t,e,[s,i]),s},isFeedbackContainer(t,e){return t.hasAttribute&&t.hasAttribute(e)},maybeHideFeedback(t,e,i,s){let r={};e.forEach(n=>{if(!t.contains(n))return;let o=n.getAttribute(i);if(!o){ee.addOrRemoveClasses(n,[],[Ct]);return}if(r[o]===!0){this.hideFeedback(n);return}r[o]=this.shouldHideFeedback(t,o,s),r[o]===!0&&this.hideFeedback(n)})},hideFeedback(t){ee.addOrRemoveClasses(t,[Ct],[])},shouldHideFeedback(t,e,i){let s=`[name="${e}"],
                   [name="${e}[]"],
                   [${i}="${e}"]`,r=!1;return Se.all(t,s,n=>{(this.private(n,Tt)||this.private(n,lt))&&(r=!0)}),!r},feedbackSelector(t,e,i){let s=`[${e}="${t.name}"],
                 [${e}="${t.name.replace(/\[\]$/,"")}"]`;return t.getAttribute(i)&&(s+=`,[${e}="${t.getAttribute(i)}"]`),s},resetForm(t,e,i){Array.from(t.elements).forEach(s=>{let r=this.feedbackSelector(s,e,i);this.deletePrivate(s,Tt),this.deletePrivate(s,lt),this.all(document,r,n=>{ee.addOrRemoveClasses(n,[Ct],[])})})},showError(t,e,i){if(t.name){let s=this.feedbackSelector(t,e,i);this.all(document,s,r=>{ee.addOrRemoveClasses(r,[],[Ct])})}},isPhxChild(t){return t.getAttribute&&t.getAttribute(We)},isPhxSticky(t){return t.getAttribute&&t.getAttribute(hs)!==null},isChildOfAny(t,e){return!!e.find(i=>i.contains(t))},firstPhxChild(t){return this.isPhxChild(t)?t:this.all(t,`[${We}]`)[0]},dispatchEvent(t,e,i={}){let s=!0;t.nodeName==="INPUT"&&t.type==="file"&&e==="click"&&(s=!1);let o={bubbles:i.bubbles===void 0?s:!!i.bubbles,cancelable:!0,detail:i.detail||{}},a=e==="click"?new MouseEvent("click",o):new CustomEvent(e,o);t.dispatchEvent(a)},cloneNode(t,e){if(typeof e=="undefined")return t.cloneNode(!0);{let i=t.cloneNode(!1);return i.innerHTML=e,i}},mergeAttrs(t,e,i={}){let s=new Set(i.exclude||[]),r=i.isIgnored,n=e.attributes;for(let a=n.length-1;a>=0;a--){let l=n[a].name;if(s.has(l))l==="value"&&t.value===e.value&&t.setAttribute("value",e.getAttribute(l));else{let c=e.getAttribute(l);t.getAttribute(l)!==c&&(!r||r&&l.startsWith("data-"))&&t.setAttribute(l,c)}}let o=t.attributes;for(let a=o.length-1;a>=0;a--){let l=o[a].name;r?l.startsWith("data-")&&!e.hasAttribute(l)&&![oe,Pe].includes(l)&&t.removeAttribute(l):e.hasAttribute(l)||t.removeAttribute(l)}},mergeFocusedInput(t,e){t instanceof HTMLSelectElement||Se.mergeAttrs(t,e,{exclude:["value"]}),e.readOnly?t.setAttribute("readonly",!0):t.removeAttribute("readonly")},hasSelectionRange(t){return t.setSelectionRange&&(t.type==="text"||t.type==="textarea")},restoreFocus(t,e,i){if(t instanceof HTMLSelectElement&&t.focus(),!Se.isTextualInput(t))return;let s=t.matches(":focus");t.readOnly&&t.blur(),s||t.focus(),this.hasSelectionRange(t)&&t.setSelectionRange(e,i)},isFormInput(t){return/^(?:input|select|textarea)$/i.test(t.tagName)&&t.type!=="button"},syncAttrsToProps(t){t instanceof HTMLInputElement&&oi.indexOf(t.type.toLocaleLowerCase())>=0&&(t.checked=t.getAttribute("checked")!==null)},isTextualInput(t){return yr.indexOf(t.type)>=0},isNowTriggerFormExternal(t,e){return t.getAttribute&&t.getAttribute(e)!==null},syncPendingRef(t,e,i){let s=t.getAttribute(oe);if(s===null)return!0;let r=t.getAttribute(Pe);return Se.isFormInput(t)||t.getAttribute(i)!==null?(Se.isUploadInput(t)&&Se.mergeAttrs(t,e,{isIgnored:!0}),Se.putPrivate(t,oe,e),!1):(Qt.forEach(n=>{t.classList.contains(n)&&e.classList.add(n)}),e.setAttribute(oe,s),e.setAttribute(Pe,r),!0)},cleanChildNodes(t,e){if(Se.isPhxUpdate(t,e,["append","prepend"])){let i=[];t.childNodes.forEach(s=>{s.id||(!(s.nodeType===Node.TEXT_NODE&&s.nodeValue.trim()==="")&&s.nodeType!==s.COMMENT_NODE&&ie(`only HTML element tags with an id are allowed inside containers with phx-update.

removing illegal node: "${(s.outerHTML||s.nodeValue).trim()}"

`),i.push(s))}),i.forEach(s=>s.remove())}},replaceRootContainer(t,e,i){let s=new Set(["id",ve,Fe,si,Re]);if(t.tagName.toLowerCase()===e.toLowerCase())return Array.from(t.attributes).filter(r=>!s.has(r.name.toLowerCase())).forEach(r=>t.removeAttribute(r.name)),Object.keys(i).filter(r=>!s.has(r.toLowerCase())).forEach(r=>t.setAttribute(r,i[r])),t;{let r=document.createElement(e);return Object.keys(i).forEach(n=>r.setAttribute(n,i[n])),s.forEach(n=>r.setAttribute(n,t.getAttribute(n))),r.innerHTML=t.innerHTML,t.replaceWith(r),r}},getSticky(t,e,i){let s=(Se.private(t,"sticky")||[]).find(([r])=>e===r);if(s){let[r,n,o]=s;return o}else return typeof i=="function"?i():i},deleteSticky(t,e){this.updatePrivate(t,"sticky",[],i=>i.filter(([s,r])=>s!==e))},putSticky(t,e,i){let s=i(t);this.updatePrivate(t,"sticky",[],r=>{let n=r.findIndex(([o])=>e===o);return n>=0?r[n]=[e,i,s]:r.push([e,i,s]),r})},applyStickyOperations(t){let e=Se.private(t,"sticky");!e||e.forEach(([i,s,r])=>this.putSticky(t,i,s))}},f=Se;var Ie=class{static isActive(e,i){let s=i._phxRef===void 0,r=Ie.isPreflightInProgress(i),o=e.getAttribute(At).split(",").indexOf(X.genFileRef(i))>=0;return i.size>0&&(s||o||!r)}static isPreflighted(e,i){return e.getAttribute(nt).split(",").indexOf(X.genFileRef(i))>=0&&this.isActive(e,i)}static isPreflightInProgress(e){return e._preflightInProgress===!0}static markPreflightInProgress(e){e._preflightInProgress=!0}constructor(e,i,s){this.ref=X.genFileRef(i),this.fileEl=e,this.file=i,this.view=s,this.meta=null,this._isCancelled=!1,this._isDone=!1,this._progress=0,this._lastProgressSent=-1,this._onDone=function(){},this._onElUpdated=this.onElUpdated.bind(this),this.fileEl.addEventListener(ot,this._onElUpdated)}metadata(){return this.meta}progress(e){this._progress=Math.floor(e),this._progress>this._lastProgressSent&&(this._progress>=100?(this._progress=100,this._lastProgressSent=100,this._isDone=!0,this.view.pushFileProgress(this.fileEl,this.ref,100,()=>{X.untrackFile(this.fileEl,this.file),this._onDone()})):(this._lastProgressSent=this._progress,this.view.pushFileProgress(this.fileEl,this.ref,this._progress)))}cancel(){this._isCancelled=!0,this._isDone=!0,this._onDone()}isDone(){return this._isDone}error(e="failed"){this.fileEl.removeEventListener(ot,this._onElUpdated),this.view.pushFileProgress(this.fileEl,this.ref,{error:e}),f.isAutoUpload(this.fileEl)||X.clearFiles(this.fileEl)}onDone(e){this._onDone=()=>{this.fileEl.removeEventListener(ot,this._onElUpdated),e()}}onElUpdated(){this.fileEl.getAttribute(At).split(",").indexOf(this.ref)===-1&&this.cancel()}toPreflightPayload(){return{last_modified:this.file.lastModified,name:this.file.name,relative_path:this.file.webkitRelativePath,size:this.file.size,type:this.file.type,ref:this.ref,meta:typeof this.file.meta=="function"?this.file.meta():void 0}}uploader(e){if(this.meta.uploader){let i=e[this.meta.uploader]||ie(`no uploader configured for ${this.meta.uploader}`);return{name:this.meta.uploader,callback:i}}else return{name:"channel",callback:Hr}}zipPostFlight(e){this.meta=e.entries[this.ref],this.meta||ie(`no preflight upload response returned with ref ${this.ref}`,{input:this.fileEl,response:e})}};var So=0,X=class{static genFileRef(e){let i=e._phxRef;return i!==void 0?i:(e._phxRef=(So++).toString(),e._phxRef)}static getEntryDataURL(e,i,s){let r=this.activeFiles(e).find(n=>this.genFileRef(n)===i);s(URL.createObjectURL(r))}static hasUploadsInProgress(e){let i=0;return f.findUploadInputs(e).forEach(s=>{s.getAttribute(nt)!==s.getAttribute(br)&&i++}),i>0}static serializeUploads(e){let i=this.activeFiles(e),s={};return i.forEach(r=>{let n={path:e.name},o=e.getAttribute(me);s[o]=s[o]||[],n.ref=this.genFileRef(r),n.last_modified=r.lastModified,n.name=r.name||n.ref,n.relative_path=r.webkitRelativePath,n.type=r.type,n.size=r.size,typeof r.meta=="function"&&(n.meta=r.meta()),s[o].push(n)}),s}static clearFiles(e){e.value=null,e.removeAttribute(me),f.putPrivate(e,"files",[])}static untrackFile(e,i){f.putPrivate(e,"files",f.private(e,"files").filter(s=>!Object.is(s,i)))}static trackFiles(e,i,s){if(e.getAttribute("multiple")!==null){let r=i.filter(n=>!this.activeFiles(e).find(o=>Object.is(o,n)));f.putPrivate(e,"files",this.activeFiles(e).concat(r)),e.value=null}else s&&s.files.length>0&&(e.files=s.files),f.putPrivate(e,"files",i)}static activeFileInputs(e){let i=f.findUploadInputs(e);return Array.from(i).filter(s=>s.files&&this.activeFiles(s).length>0)}static activeFiles(e){return(f.private(e,"files")||[]).filter(i=>Ie.isActive(e,i))}static inputsAwaitingPreflight(e){let i=f.findUploadInputs(e);return Array.from(i).filter(s=>this.filesAwaitingPreflight(s).length>0)}static filesAwaitingPreflight(e){return this.activeFiles(e).filter(i=>!Ie.isPreflighted(e,i)&&!Ie.isPreflightInProgress(i))}static markPreflightInProgress(e){e.forEach(i=>Ie.markPreflightInProgress(i.file))}constructor(e,i,s){this.view=i,this.onComplete=s,this._entries=Array.from(X.filesAwaitingPreflight(e)||[]).map(r=>new Ie(e,r,i)),X.markPreflightInProgress(this._entries),this.numEntriesInProgress=this._entries.length}entries(){return this._entries}initAdapterUpload(e,i,s){this._entries=this._entries.map(n=>(n.zipPostFlight(e),n.onDone(()=>{this.numEntriesInProgress--,this.numEntriesInProgress===0&&this.onComplete()}),n));let r=this._entries.reduce((n,o)=>{if(!o.meta)return n;let{name:a,callback:l}=o.uploader(s.uploaders);return n[a]=n[a]||{callback:l,entries:[]},n[a].entries.push(o),n},{});for(let n in r){let{callback:o,entries:a}=r[n];o(a,i,e,s)}}};var yo={LiveFileUpload:{activeRefs(){return this.el.getAttribute(At)},preflightedRefs(){return this.el.getAttribute(nt)},mounted(){this.preflightedWas=this.preflightedRefs()},updated(){let t=this.preflightedRefs();this.preflightedWas!==t&&(this.preflightedWas=t,t===""&&this.__view.cancelSubmit(this.el.form)),this.activeRefs()===""&&(this.el.value=null),this.el.dispatchEvent(new CustomEvent(ot))}},LiveImgPreview:{mounted(){this.ref=this.el.getAttribute("data-phx-entry-ref"),this.inputEl=document.getElementById(this.el.getAttribute(me)),X.getEntryDataURL(this.inputEl,this.ref,t=>{this.url=t,this.el.src=t})},destroyed(){URL.revokeObjectURL(this.url)}},FocusWrap:{mounted(){this.focusStart=this.el.firstElementChild,this.focusEnd=this.el.lastElementChild,this.focusStart.addEventListener("focus",()=>Ue.focusLast(this.el)),this.focusEnd.addEventListener("focus",()=>Ue.focusFirst(this.el)),this.el.addEventListener(`${U}:show-end`,()=>this.el.focus()),window.getComputedStyle(this.el).display!=="none"&&Ue.focusFirst(this.el)}}},Fr=yo;var gi=class{constructor(e,i,s){let r=new Set,n=new Set([...i.children].map(a=>a.id)),o=[];Array.from(e.children).forEach(a=>{if(a.id&&(r.add(a.id),n.has(a.id))){let l=a.previousElementSibling&&a.previousElementSibling.id;o.push({elementId:a.id,previousElementId:l})}}),this.containerId=i.id,this.updateType=s,this.elementsToModify=o,this.elementIdsToAdd=[...n].filter(a=>!r.has(a))}perform(){let e=f.byId(this.containerId);this.elementsToModify.forEach(i=>{i.previousElementId?Ae(document.getElementById(i.previousElementId),s=>{Ae(document.getElementById(i.elementId),r=>{r.previousElementSibling&&r.previousElementSibling.id==s.id||s.insertAdjacentElement("afterend",r)})}):Ae(document.getElementById(i.elementId),s=>{s.previousElementSibling==null||e.insertAdjacentElement("afterbegin",s)})}),this.updateType=="prepend"&&this.elementIdsToAdd.reverse().forEach(i=>{Ae(document.getElementById(i),s=>e.insertAdjacentElement("afterbegin",s))})}};var Ur=11;function Eo(t,e){var i=e.attributes,s,r,n,o,a;if(!(e.nodeType===Ur||t.nodeType===Ur)){for(var l=i.length-1;l>=0;l--)s=i[l],r=s.name,n=s.namespaceURI,o=s.value,n?(r=s.localName||r,a=t.getAttributeNS(n,r),a!==o&&(s.prefix==="xmlns"&&(r=s.name),t.setAttributeNS(n,r,o))):(a=t.getAttribute(r),a!==o&&t.setAttribute(r,o));for(var c=t.attributes,p=c.length-1;p>=0;p--)s=c[p],r=s.name,n=s.namespaceURI,n?(r=s.localName||r,e.hasAttributeNS(n,r)||t.removeAttributeNS(n,r)):e.hasAttribute(r)||t.removeAttribute(r)}}var _i,wo="http://www.w3.org/1999/xhtml",ce=typeof document=="undefined"?void 0:document,Ao=!!ce&&"content"in ce.createElement("template"),Co=!!ce&&ce.createRange&&"createContextualFragment"in ce.createRange();function xo(t){var e=ce.createElement("template");return e.innerHTML=t,e.content.childNodes[0]}function To(t){_i||(_i=ce.createRange(),_i.selectNode(ce.body));var e=_i.createContextualFragment(t);return e.childNodes[0]}function ko(t){var e=ce.createElement("body");return e.innerHTML=t,e.childNodes[0]}function Po(t){return t=t.trim(),Ao?xo(t):Co?To(t):ko(t)}function vi(t,e){var i=t.nodeName,s=e.nodeName,r,n;return i===s?!0:(r=i.charCodeAt(0),n=s.charCodeAt(0),r<=90&&n>=97?i===s.toUpperCase():n<=90&&r>=97?s===i.toUpperCase():!1)}function Ro(t,e){return!e||e===wo?ce.createElement(t):ce.createElementNS(e,t)}function Lo(t,e){for(var i=t.firstChild;i;){var s=i.nextSibling;e.appendChild(i),i=s}return e}function vs(t,e,i){t[i]!==e[i]&&(t[i]=e[i],t[i]?t.setAttribute(i,""):t.removeAttribute(i))}var $r={OPTION:function(t,e){var i=t.parentNode;if(i){var s=i.nodeName.toUpperCase();s==="OPTGROUP"&&(i=i.parentNode,s=i&&i.nodeName.toUpperCase()),s==="SELECT"&&!i.hasAttribute("multiple")&&(t.hasAttribute("selected")&&!e.selected&&(t.setAttribute("selected","selected"),t.removeAttribute("selected")),i.selectedIndex=-1)}vs(t,e,"selected")},INPUT:function(t,e){vs(t,e,"checked"),vs(t,e,"disabled"),t.value!==e.value&&(t.value=e.value),e.hasAttribute("value")||t.removeAttribute("value")},TEXTAREA:function(t,e){var i=e.value;t.value!==i&&(t.value=i);var s=t.firstChild;if(s){var r=s.nodeValue;if(r==i||!i&&r==t.placeholder)return;s.nodeValue=i}},SELECT:function(t,e){if(!e.hasAttribute("multiple")){for(var i=-1,s=0,r=t.firstChild,n,o;r;)if(o=r.nodeName&&r.nodeName.toUpperCase(),o==="OPTGROUP")n=r,r=n.firstChild;else{if(o==="OPTION"){if(r.hasAttribute("selected")){i=s;break}s++}r=r.nextSibling,!r&&n&&(r=n.nextSibling,n=null)}t.selectedIndex=i}}},It=1,Br=11,Vr=3,jr=8;function $e(){}function Io(t){if(t)return t.getAttribute&&t.getAttribute("id")||t.id}function Do(t){return function(i,s,r){if(r||(r={}),typeof s=="string")if(i.nodeName==="#document"||i.nodeName==="HTML"||i.nodeName==="BODY"){var n=s;s=ce.createElement("html"),s.innerHTML=n}else s=Po(s);else s.nodeType===Br&&(s=s.firstElementChild);var o=r.getNodeKey||Io,a=r.onBeforeNodeAdded||$e,l=r.onNodeAdded||$e,c=r.onBeforeElUpdated||$e,p=r.onElUpdated||$e,m=r.onBeforeNodeDiscarded||$e,v=r.onNodeDiscarded||$e,E=r.onBeforeElChildrenUpdated||$e,b=r.skipFromChildren||$e,A=r.addChild||function(T,x){return T.appendChild(x)},N=r.childrenOnly===!0,I=Object.create(null),L=[];function B(T){L.push(T)}function q(T,x){if(T.nodeType===It)for(var J=T.firstChild;J;){var R=void 0;x&&(R=o(J))?B(R):(v(J),J.firstChild&&q(J,x)),J=J.nextSibling}}function Z(T,x,J){m(T)!==!1&&(x&&x.removeChild(T),v(T),q(T,J))}function W(T){if(T.nodeType===It||T.nodeType===Br)for(var x=T.firstChild;x;){var J=o(x);J&&(I[J]=x),W(x),x=x.nextSibling}}W(i);function V(T){l(T);for(var x=T.firstChild;x;){var J=x.nextSibling,R=o(x);if(R){var $=I[R];$&&vi(x,$)?(x.parentNode.replaceChild($,x),g($,x)):V(x)}else V(x);x=J}}function _e(T,x,J){for(;x;){var R=x.nextSibling;(J=o(x))?B(J):Z(x,T,!0),x=R}}function g(T,x,J){var R=o(x);R&&delete I[R],!(!J&&(c(T,x)===!1||(t(T,x),p(T),E(T,x)===!1)))&&(T.nodeName!=="TEXTAREA"?k(T,x):$r.TEXTAREA(T,x))}function k(T,x){var J=b(T,x),R=x.firstChild,$=T.firstChild,Ne,ue,xe,Je,re;e:for(;R;){for(Je=R.nextSibling,Ne=o(R);!J&&$;){if(xe=$.nextSibling,R.isSameNode&&R.isSameNode($)){R=Je,$=xe;continue e}ue=o($);var st=$.nodeType,ye=void 0;if(st===R.nodeType&&(st===It?(Ne?Ne!==ue&&((re=I[Ne])?xe===re?ye=!1:(T.insertBefore(re,$),ue?B(ue):Z($,T,!0),$=re,ue=o($)):ye=!1):ue&&(ye=!1),ye=ye!==!1&&vi($,R),ye&&g($,R)):(st===Vr||st==jr)&&(ye=!0,$.nodeValue!==R.nodeValue&&($.nodeValue=R.nodeValue))),ye){R=Je,$=xe;continue e}ue?B(ue):Z($,T,!0),$=xe}if(Ne&&(re=I[Ne])&&vi(re,R))J||A(T,re),g(re,R);else{var bt=a(R);bt!==!1&&(bt&&(R=bt),R.actualize&&(R=R.actualize(T.ownerDocument||ce)),A(T,R),V(R))}R=Je,$=xe}_e(T,$,ue);var jt=$r[T.nodeName];jt&&jt(T,x)}var O=i,Y=O.nodeType,de=s.nodeType;if(!N){if(Y===It)de===It?vi(i,s)||(v(i),O=Lo(i,Ro(s.nodeName,s.namespaceURI))):O=s;else if(Y===Vr||Y===jr){if(de===Y)return O.nodeValue!==s.nodeValue&&(O.nodeValue=s.nodeValue),O;O=s}}if(O===s)v(i);else{if(s.isSameNode&&s.isSameNode(O))return;if(g(O,s,N),L)for(var vt=0,Ji=L.length;vt<Ji;vt++){var Xe=I[L[vt]];Xe&&Z(Xe,Xe.parentNode,!1)}}return!N&&O!==i&&i.parentNode&&(O.actualize&&(O=O.actualize(i.ownerDocument||ce)),i.parentNode.replaceChild(O,i)),O}}var Oo=Do(Eo),bs=Oo;var Qe=class{static patchEl(e,i,s){bs(e,i,{childrenOnly:!1,onBeforeElUpdated:(r,n)=>{if(s&&s.isSameNode(r)&&f.isFormInput(r))return f.mergeFocusedInput(r,n),!1}})}constructor(e,i,s,r,n,o){this.view=e,this.liveSocket=e.liveSocket,this.container=i,this.id=s,this.rootID=e.root.id,this.html=r,this.streams=n,this.streamInserts={},this.streamComponentRestore={},this.targetCID=o,this.cidPatch=be(this.targetCID),this.pendingRemoves=[],this.phxRemove=this.liveSocket.binding("remove"),this.callbacks={beforeadded:[],beforeupdated:[],beforephxChildAdded:[],afteradded:[],afterupdated:[],afterdiscarded:[],afterphxChildAdded:[],aftertransitionsDiscarded:[]}}before(e,i){this.callbacks[`before${e}`].push(i)}after(e,i){this.callbacks[`after${e}`].push(i)}trackBefore(e,...i){this.callbacks[`before${e}`].forEach(s=>s(...i))}trackAfter(e,...i){this.callbacks[`after${e}`].forEach(s=>s(...i))}markPrunableContentForRemoval(){let e=this.liveSocket.binding(ct);f.all(this.container,`[${e}=append] > *, [${e}=prepend] > *`,i=>{i.setAttribute(ns,"")})}perform(e){let{view:i,liveSocket:s,container:r,html:n}=this,o=this.isCIDPatch()?this.targetCIDContainer(n):r;if(this.isCIDPatch()&&!o)return;let a=s.getActiveElement(),{selectionStart:l,selectionEnd:c}=a&&f.hasSelectionRange(a)?a:{},p=s.binding(ct),m=s.binding(ze),v=s.binding(Ke),E=s.binding(kt),b=s.binding(ri),A=s.binding(ni),N=s.binding(Sr),I=[],L=[],B=[],q=[],Z=null;function W(V,_e){bs(V,_e,{childrenOnly:V.getAttribute(pe)===null,getNodeKey:g=>f.isPhxDestroyed(g)?null:e?g.id:g.id||g.getAttribute&&g.getAttribute(ti),skipFromChildren:g=>g.getAttribute(p)===li,addChild:(g,k)=>{let{ref:O,streamAt:Y}=this.getStreamInsert(k);if(O===void 0)return g.appendChild(k);if(this.setStreamRef(k,O),Y===0)g.insertAdjacentElement("afterbegin",k);else if(Y===-1)g.appendChild(k);else if(Y>0){let de=Array.from(g.children)[Y];g.insertBefore(k,de)}},onBeforeNodeAdded:g=>{this.trackBefore("added",g);let k=g;return!e&&this.streamComponentRestore[g.id]&&(k=this.streamComponentRestore[g.id],delete this.streamComponentRestore[g.id],W.bind(this)(k,g)),k},onNodeAdded:g=>{g.getAttribute&&this.maybeReOrderStream(g,!0),f.isFeedbackContainer(g,m)&&L.push(g),g instanceof HTMLImageElement&&g.srcset?g.srcset=g.srcset:g instanceof HTMLVideoElement&&g.autoplay&&g.play(),f.isNowTriggerFormExternal(g,N)&&(Z=g),(f.isPhxChild(g)&&i.ownsElement(g)||f.isPhxSticky(g)&&i.ownsElement(g.parentNode))&&this.trackAfter("phxChildAdded",g),I.push(g)},onNodeDiscarded:g=>this.onNodeDiscarded(g),onBeforeNodeDiscarded:g=>g.getAttribute&&g.getAttribute(ns)!==null?!0:!(g.parentElement!==null&&g.id&&f.isPhxUpdate(g.parentElement,p,[li,"append","prepend"])||this.maybePendingRemove(g)||this.skipCIDSibling(g)),onElUpdated:g=>{f.isNowTriggerFormExternal(g,N)&&(Z=g),B.push(g),this.maybeReOrderStream(g,!1)},onBeforeElUpdated:(g,k)=>{if((f.isFeedbackContainer(g,m)||f.isFeedbackContainer(k,m))&&(L.push(g),L.push(k)),f.cleanChildNodes(k,p),this.skipCIDSibling(k))return this.maybeReOrderStream(g),!1;if(f.isPhxSticky(g))return!1;if(f.isIgnored(g,p)||g.form&&g.form.isSameNode(Z))return this.trackBefore("updated",g,k),f.mergeAttrs(g,k,{isIgnored:!0}),B.push(g),f.applyStickyOperations(g),!1;if(g.type==="number"&&g.validity&&g.validity.badInput)return!1;if(!f.syncPendingRef(g,k,E))return f.isUploadInput(g)&&(this.trackBefore("updated",g,k),B.push(g)),f.applyStickyOperations(g),!1;if(f.isPhxChild(k)){let de=g.getAttribute(ve);return f.mergeAttrs(g,k,{exclude:[Fe]}),de!==""&&g.setAttribute(ve,de),g.setAttribute(Re,this.rootID),f.applyStickyOperations(g),!1}f.copyPrivates(k,g);let O=a&&g.isSameNode(a)&&f.isFormInput(g),Y=O&&this.isChangedSelect(g,k);return O&&g.type!=="hidden"&&!Y?(this.trackBefore("updated",g,k),f.mergeFocusedInput(g,k),f.syncAttrsToProps(g),B.push(g),f.applyStickyOperations(g),!1):(Y&&g.blur(),f.isPhxUpdate(k,p,["append","prepend"])&&q.push(new gi(g,k,k.getAttribute(p))),f.syncAttrsToProps(k),f.applyStickyOperations(k),this.trackBefore("updated",g,k),!0)}})}return this.trackBefore("added",r),this.trackBefore("updated",r,r),s.time("morphdom",()=>{this.streams.forEach(([V,_e,g,k])=>{_e.forEach(([O,Y,de])=>{this.streamInserts[O]={ref:V,streamAt:Y,limit:de,reset:k}}),k!==void 0&&f.all(r,`[${hi}="${V}"]`,O=>{this.removeStreamChildElement(O)}),g.forEach(O=>{let Y=r.querySelector(`[id="${O}"]`);Y&&this.removeStreamChildElement(Y)})}),e&&f.all(this.container,`[${p}=${li}]`,V=>{this.liveSocket.owner(V,_e=>{_e===this.view&&Array.from(V.children).forEach(g=>{this.removeStreamChildElement(g)})})}),W.bind(this)(o,n)}),s.isDebugEnabled()&&Ir(s.doofinderMount),q.length>0&&s.time("post-morph append/prepend restoration",()=>{q.forEach(V=>V.perform())}),f.maybeHideFeedback(o,L,m,v),s.silenceEvents(()=>f.restoreFocus(a,l,c)),f.dispatchEvent(document,`${U}:update`),I.forEach(V=>this.trackAfter("added",V)),B.forEach(V=>this.trackAfter("updated",V)),this.transitionPendingRemoves(),Z&&(s.unload(),Object.getPrototypeOf(Z).submit.call(Z)),!0}onNodeDiscarded(e){(f.isPhxChild(e)||f.isPhxSticky(e))&&this.liveSocket.destroyViewByEl(e),this.trackAfter("discarded",e)}maybePendingRemove(e){return e.getAttribute&&e.getAttribute(this.phxRemove)!==null?(this.pendingRemoves.push(e),!0):!1}removeStreamChildElement(e){this.streamInserts[e.id]?(this.streamComponentRestore[e.id]=e,e.remove()):this.maybePendingRemove(e)||(e.remove(),this.onNodeDiscarded(e))}getStreamInsert(e){return(e.id?this.streamInserts[e.id]:{})||{}}setStreamRef(e,i){f.putSticky(e,hi,s=>s.setAttribute(hi,i))}maybeReOrderStream(e,i){let{ref:s,streamAt:r,reset:n}=this.getStreamInsert(e);if(r!==void 0&&(this.setStreamRef(e,s),!(!n&&!i)&&!!e.parentElement)){if(r===0)e.parentElement.insertBefore(e,e.parentElement.firstElementChild);else if(r>0){let o=Array.from(e.parentElement.children),a=o.indexOf(e);if(r>=o.length-1)e.parentElement.appendChild(e);else{let l=o[r];a>r?e.parentElement.insertBefore(e,l):e.parentElement.insertBefore(e,l.nextElementSibling)}}this.maybeLimitStream(e)}}maybeLimitStream(e){let{limit:i}=this.getStreamInsert(e),s=i!==null&&Array.from(e.parentElement.children);i&&i<0&&s.length>i*-1?s.slice(0,s.length+i).forEach(r=>this.removeStreamChildElement(r)):i&&i>=0&&s.length>i&&s.slice(i).forEach(r=>this.removeStreamChildElement(r))}transitionPendingRemoves(){let{pendingRemoves:e,liveSocket:i}=this;e.length>0&&(i.transitionRemoves(e),i.requestDOMUpdate(()=>{e.forEach(s=>{let r=f.firstPhxChild(s);r&&i.destroyViewByEl(r),s.remove()}),this.trackAfter("transitionsDiscarded",e)}))}isChangedSelect(e,i){if(!(e instanceof HTMLSelectElement)||e.multiple)return!1;if(e.options.length!==i.options.length)return!0;let s=e.selectedOptions[0],r=i.selectedOptions[0];return s&&s.hasAttribute("selected")&&r.setAttribute("selected",s.getAttribute("selected")),!e.isEqualNode(i)}isCIDPatch(){return this.cidPatch}skipCIDSibling(e){return e.nodeType===Node.ELEMENT_NODE&&e.hasAttribute(ei)}targetCIDContainer(e){if(!this.isCIDPatch())return;let[i,...s]=f.findComponentNodeList(this.container,this.targetCID);return s.length===0&&f.childNodeLength(e)===1?i:i&&i.parentNode}indexOf(e,i){return Array.from(e.children).indexOf(i)}};var Ho=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),Mo=new Set(["'",'"']),Xr=(t,e,i)=>{let s=0,r=!1,n,o,a,l,c,p,m=t.match(/^(\s*(?:<!--.*?-->\s*)*)<([^\s\/>]+)/);if(m===null)throw new Error(`malformed html ${t}`);for(s=m[0].length,n=m[1],a=m[2],l=s,s;s<t.length&&t.charAt(s)!==">";s++)if(t.charAt(s)==="="){let b=t.slice(s-3,s)===" id";s++;let A=t.charAt(s);if(Mo.has(A)){let N=s;for(s++,s;s<t.length&&t.charAt(s)!==A;s++);if(b){c=t.slice(N+1,s);break}}}let v=t.length-1;for(r=!1;v>=n.length+a.length;){let b=t.charAt(v);if(r)b==="-"&&t.slice(v-3,v)==="<!-"?(r=!1,v-=4):v-=1;else if(b===">"&&t.slice(v-2,v)==="--")r=!0,v-=3;else{if(b===">")break;v-=1}}o=t.slice(v+1,t.length);let E=Object.keys(e).map(b=>e[b]===!0?b:`${b}="${e[b]}"`).join(" ");if(i){let b=c?` id="${c}"`:"";Ho.has(a)?p=`<${a}${b}${E===""?"":" "}${E}/>`:p=`<${a}${b}${E===""?"":" "}${E}></${a}>`}else{let b=t.slice(l,v+1);p=`<${a}${E===""?"":" "}${E}${b}`}return[p,n,o]},Dt=class{static extract(e){let{[ps]:i,[fs]:s,[ms]:r}=e;return delete e[ps],delete e[fs],delete e[ms],{diff:e,title:r,reply:i||null,events:s||[]}}constructor(e,i){this.viewId=e,this.rendered={},this.magicId=0,this.mergeDiff(i)}parentViewId(){return this.viewId}toString(e){let[i,s]=this.recursiveToString(this.rendered,this.rendered[ae],e,!0,{});return[i,s]}recursiveToString(e,i=e[ae],s,r,n){s=s?new Set(s):null;let o={buffer:"",components:i,onlyCids:s,streams:new Set};return this.toOutputBuffer(e,null,o,r,n),[o.buffer,o.streams]}componentCIDs(e){return Object.keys(e[ae]||{}).map(i=>parseInt(i))}isComponentOnlyDiff(e){return e[ae]?Object.keys(e).length===1:!1}getComponent(e,i){return e[ae][i]}resetRender(e){this.rendered[ae][e]&&(this.rendered[ae][e].reset=!0)}mergeDiff(e){let i=e[ae],s={};if(delete e[ae],this.rendered=this.mutableMerge(this.rendered,e),this.rendered[ae]=this.rendered[ae]||{},i){let r=this.rendered[ae];for(let n in i)i[n]=this.cachedFindComponent(n,i[n],r,i,s);for(let n in i)r[n]=i[n];e[ae]=i}}cachedFindComponent(e,i,s,r,n){if(n[e])return n[e];{let o,a,l=i[we];if(be(l)){let c;l>0?c=this.cachedFindComponent(l,r[l],s,r,n):c=s[-l],a=c[we],o=this.cloneMerge(c,i,!0),o[we]=a}else o=i[we]!==void 0||s[e]===void 0?i:this.cloneMerge(s[e],i,!1);return n[e]=o,o}}mutableMerge(e,i){return i[we]!==void 0?i:(this.doMutableMerge(e,i),e)}doMutableMerge(e,i){for(let s in i){let r=i[s],n=e[s];Ye(r)&&r[we]===void 0&&Ye(n)?this.doMutableMerge(n,r):e[s]=r}e[ui]&&(e.newRender=!0)}cloneMerge(e,i,s){let r=M(M({},e),i);for(let n in r){let o=i[n],a=e[n];Ye(o)&&o[we]===void 0&&Ye(a)?r[n]=this.cloneMerge(a,o,s):o===void 0&&Ye(a)&&(r[n]=this.cloneMerge(a,{},s))}return s?(delete r.magicId,delete r.newRender):e[ui]&&(r.newRender=!0),r}componentToString(e){let[i,s]=this.recursiveCIDToString(this.rendered[ae],e,null),[r,n,o]=Xr(i,{});return[r,s]}pruneCIDs(e){e.forEach(i=>delete this.rendered[ae][i])}get(){return this.rendered}isNewFingerprint(e={}){return!!e[we]}templateStatic(e,i){return typeof e=="number"?i[e]:e}nextMagicID(){return this.magicId++,`m${this.magicId}-${this.parentViewId()}`}toOutputBuffer(e,i,s,r,n={}){if(e[Lt])return this.comprehensionToBuffer(e,i,s);let{[we]:o}=e;o=this.templateStatic(o,i);let a=e[ui],l=s.buffer;a&&(s.buffer=""),r&&a&&!e.magicId&&(e.newRender=!0,e.magicId=this.nextMagicID()),s.buffer+=o[0];for(let c=1;c<o.length;c++)this.dynamicToBuffer(e[c-1],i,s,r),s.buffer+=o[c];if(a){let c=!1,p;r||e.magicId?(c=r&&!e.newRender,p=M({[ti]:e.magicId},n)):p=n,c&&(p[ei]=!0);let[m,v,E]=Xr(s.buffer,p,c);e.newRender=!1,s.buffer=l+v+m+E}}comprehensionToBuffer(e,i,s){let{[Lt]:r,[we]:n,[gs]:o}=e,[a,l,c,p]=o||[null,{},[],null];n=this.templateStatic(n,i);let m=i||e[Lr];for(let v=0;v<r.length;v++){let E=r[v];s.buffer+=n[0];for(let b=1;b<n.length;b++){let A=!1;this.dynamicToBuffer(E[b-1],m,s,A),s.buffer+=n[b]}}o!==void 0&&(e[Lt].length>0||c.length>0||p)&&(delete e[gs],e[Lt]=[],s.streams.add(o))}dynamicToBuffer(e,i,s,r){if(typeof e=="number"){let[n,o]=this.recursiveCIDToString(s.components,e,s.onlyCids);s.buffer+=n,s.streams=new Set([...s.streams,...o])}else Ye(e)?this.toOutputBuffer(e,i,s,r,{}):s.buffer+=e}recursiveCIDToString(e,i,s){let r=e[i]||ie(`no component for CID ${i}`,e),n={[pe]:i},o=s&&!s.has(i);r.newRender=!o,r.magicId=`c${i}-${this.parentViewId()}`;let a=!r.reset,[l,c]=this.recursiveToString(r,e,s,a,n);return delete r.reset,[l,c]}};var No=1,Be=class{static makeID(){return No++}static elementID(e){return e.phxHookId}constructor(e,i,s){this.__view=e,this.liveSocket=e.liveSocket,this.__callbacks=s,this.__listeners=new Set,this.__isDisconnected=!1,this.el=i,this.el.phxHookId=this.constructor.makeID();for(let r in this.__callbacks)this[r]=this.__callbacks[r]}__mounted(){this.mounted&&this.mounted()}__updated(){this.updated&&this.updated()}__beforeUpdate(){this.beforeUpdate&&this.beforeUpdate()}__destroyed(){this.destroyed&&this.destroyed()}__reconnected(){this.__isDisconnected&&(this.__isDisconnected=!1,this.reconnected&&this.reconnected())}__disconnected(){this.__isDisconnected=!0,this.disconnected&&this.disconnected()}pushEvent(e,i={},s=function(){}){return this.__view.pushHookEvent(this.el,null,e,i,s)}pushEventTo(e,i,s={},r=function(){}){return this.__view.withinTargets(e,(n,o)=>n.pushHookEvent(this.el,o,i,s,r))}handleEvent(e,i){let s=(r,n)=>n?e:i(r.detail);return this.liveSocket.doofinderMount.addEventListener(`${U}:${e}`,s),this.__listeners.add(s),s}removeHandleEvent(e){let i=e(null,!0);this.liveSocket.doofinderMount.removeEventListener(`${U}:${i}`,e),this.__listeners.delete(e)}upload(e,i){return this.__view.dispatchUploads(null,e,i)}uploadTo(e,i,s){return this.__view.withinTargets(e,(r,n)=>{r.dispatchUploads(n,i,s)})}__cleanup__(){this.__listeners.forEach(e=>this.removeHandleEvent(e))}};var bi=(t,e,i=[])=>{let c=e,{submitter:s}=c,r=ar(c,["submitter"]),n;if(s&&s.name){let p=document.createElement("input");p.type="hidden";let m=s.getAttribute("form");m&&p.setAttribute("form",m),p.name=s.name,p.value=s.value,s.parentElement.insertBefore(p,s),n=p}let o=new FormData(t),a=[];o.forEach((p,m,v)=>{p instanceof File&&a.push(m)}),a.forEach(p=>o.delete(p));let l=new URLSearchParams;for(let[p,m]of o.entries())(i.length===0||i.indexOf(p)>=0)&&l.append(p,m);s&&n&&s.parentElement.removeChild(n);for(let p in r)l.append(p,r[p]);return l.toString()},mt=class{constructor(e,i,s,r,n){this.isDead=!1,this.liveSocket=i,this.flash=r,this.parent=s,this.root=s?s.root:this,this.el=e,this.id=this.el.id,this.ref=0,this.childJoins=0,this.loaderTimer=null,this.pendingDiffs=[],this.redirect=!1,this.href=null,this.joinCount=this.parent?this.parent.joinCount-1:0,this.joinPending=!0,this.destroyed=!1,this.joinCallback=function(o){o&&o()},this.stopCallback=function(){},this.pendingJoinOps=this.parent?null:[],this.viewHooks={},this.formSubmits=[],this.children=this.parent?null:{},this.root.children[this.id]={},this.channel=this.liveSocket.channel(`lv:${this.id}`,()=>{let o=this.href&&this.expandURL(this.href);return{redirect:this.redirect?o:void 0,url:this.redirect?void 0:o||void 0,params:this.connectParams(n),session:this.getSession(),static:this.getStatic(),flash:this.flash}})}setHref(e){this.href=e}setRedirect(e){this.redirect=!0,this.href=e}isMain(){return this.el.hasAttribute(si)}connectParams(e){let i=this.liveSocket.params(this.el),s=f.all(document,`[${this.binding(vr)}]`).map(r=>r.src||r.href).filter(r=>typeof r=="string");return s.length>0&&(i._track_static=s),i._mounts=this.joinCount,i._live_referer=e,i}isConnected(){return this.channel.canPush()}getSession(){return this.el.getAttribute(ve)}getStatic(){let e=this.el.getAttribute(Fe);return e===""?null:e}destroy(e=function(){}){this.destroyAllChildren(),this.destroyed=!0,delete this.root.children[this.id],this.parent&&delete this.root.children[this.parent.id][this.id],clearTimeout(this.loaderTimer);let i=()=>{e();for(let s in this.viewHooks)this.destroyHook(this.viewHooks[s])};f.markPhxChildDestroyed(this.el),this.log("destroyed",()=>["the child has been removed from the parent"]),this.channel.leave().receive("ok",i).receive("error",i).receive("timeout",i)}setContainerClasses(...e){this.el.classList.remove(as,at,xt,ls,ii),this.el.classList.add(...e)}showLoader(e){if(clearTimeout(this.loaderTimer),e)this.loaderTimer=setTimeout(()=>this.showLoader(),e);else{for(let i in this.viewHooks)this.viewHooks[i].__disconnected();this.setContainerClasses(at)}}execAll(e){f.all(this.el,`[${e}]`,i=>this.liveSocket.execJS(i,i.getAttribute(e)))}hideLoader(){clearTimeout(this.loaderTimer),this.setContainerClasses(as),this.execAll(this.binding("connected"))}triggerReconnected(){for(let e in this.viewHooks)this.viewHooks[e].__reconnected()}log(e,i){this.liveSocket.log(this,e,i)}transition(e,i,s=function(){}){this.liveSocket.transition(e,i,s)}withinTargets(e,i){if(e instanceof HTMLElement||e instanceof SVGElement)return this.liveSocket.owner(e,s=>i(s,e));if(be(e))f.findComponentNodeList(this.el,e).length===0?ie(`no component found matching phx-target of ${e}`):i(this,parseInt(e));else{let s=Array.from(document.querySelectorAll(e));s.length===0&&ie(`nothing found matching the phx-target selector "${e}"`),s.forEach(r=>this.liveSocket.owner(r,n=>i(n,r)))}}applyDiff(e,i,s){this.log(e,()=>["",ft(i)]);let{diff:r,reply:n,events:o,title:a}=Dt.extract(i);s({diff:r,reply:n,events:o}),a&&window.requestAnimationFrame(()=>f.putTitle(a))}onJoin(e){let{rendered:i,container:s}=e;if(s){let[r,n]=s;this.el=f.replaceRootContainer(this.el,r,n)}this.childJoins=0,this.joinPending=!0,this.flash=null,Le.dropLocal(this.liveSocket.localStorage,window.location.pathname,Yt),this.applyDiff("mount",i,({diff:r,events:n})=>{this.rendered=new Dt(this.id,r);let[o,a]=this.renderContainer(null,"join");this.dropPendingRefs();let l=this.formsForRecovery(o);this.joinCount++,l.length>0?l.forEach(([c,p,m],v)=>{this.pushFormRecovery(c,m,E=>{v===l.length-1&&this.onJoinComplete(E,o,a,n)})}):this.onJoinComplete(e,o,a,n)})}dropPendingRefs(){f.all(document,`[${Pe}="${this.id}"][${oe}]`,e=>{e.removeAttribute(oe),e.removeAttribute(Pe)})}onJoinComplete({live_patch:e},i,s,r){if(this.joinCount>1||this.parent&&!this.parent.isJoinPending())return this.applyJoinPatch(e,i,s,r);f.findPhxChildrenInFragment(i,this.id).filter(o=>{let a=o.id&&this.el.querySelector(`[id="${o.id}"]`),l=a&&a.getAttribute(Fe);return l&&o.setAttribute(Fe,l),a&&a.setAttribute(Re,this.root.id),this.joinChild(o)}).length===0?this.parent?(this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(e,i,s,r)]),this.parent.ackJoin(this)):(this.onAllChildJoinsComplete(),this.applyJoinPatch(e,i,s,r)):this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(e,i,s,r)])}attachTrueDocEl(){this.el=f.byId(this.id),this.el.setAttribute(Re,this.root.id)}execNewMounted(){let e=this.binding(ri),i=this.binding(ni);f.all(this.el,`[${e}], [${i}]`,s=>{this.maybeAddNewHook(s)}),f.all(this.el,`[${this.binding(ht)}], [data-phx-${ht}]`,s=>{this.maybeAddNewHook(s)}),f.all(this.el,`[${this.binding(ds)}]`,s=>this.maybeMounted(s))}applyJoinPatch(e,i,s,r){this.attachTrueDocEl();let n=new Qe(this,this.el,this.id,i,s,null);if(n.markPrunableContentForRemoval(),this.performPatch(n,!1,!0),this.joinNewChildren(),this.execNewMounted(),this.joinPending=!1,this.liveSocket.dispatchEvents(r),this.applyPendingUpdates(),e){let{kind:o,to:a}=e;this.liveSocket.historyPatch(a,o)}this.hideLoader(),this.joinCount>1&&this.triggerReconnected(),this.stopCallback()}triggerBeforeUpdateHook(e,i){this.liveSocket.triggerDOM("onBeforeElUpdated",[e,i]);let s=this.getHook(e),r=s&&f.isIgnored(e,this.binding(ct));if(s&&!e.isEqualNode(i)&&!(r&&Or(e.dataset,i.dataset)))return s.__beforeUpdate(),s}maybeMounted(e){let i=e.getAttribute(this.binding(ds)),s=i&&f.private(e,"mounted");i&&!s&&(this.liveSocket.execJS(e,i),f.putPrivate(e,"mounted",!0))}maybeAddNewHook(e,i){let s=this.addHook(e);s&&s.__mounted()}performPatch(e,i,s=!1){let r=[],n=!1,o=new Set;return e.after("added",a=>{this.liveSocket.triggerDOM("onNodeAdded",[a]),this.maybeAddNewHook(a),a.getAttribute&&this.maybeMounted(a)}),e.after("phxChildAdded",a=>{f.isPhxSticky(a)?this.liveSocket.joinRootViews():n=!0}),e.before("updated",(a,l)=>{this.triggerBeforeUpdateHook(a,l)&&o.add(a.id)}),e.after("updated",a=>{o.has(a.id)&&this.getHook(a).__updated()}),e.after("discarded",a=>{a.nodeType===Node.ELEMENT_NODE&&r.push(a)}),e.after("transitionsDiscarded",a=>this.afterElementsRemoved(a,i)),e.perform(s),this.afterElementsRemoved(r,i),n}afterElementsRemoved(e,i){let s=[];e.forEach(r=>{let n=f.all(r,`[${pe}]`),o=f.all(r,`[${this.binding(ht)}]`);n.concat(r).forEach(a=>{let l=this.componentID(a);be(l)&&s.indexOf(l)===-1&&s.push(l)}),o.concat(r).forEach(a=>{let l=this.getHook(a);l&&this.destroyHook(l)})}),i&&this.maybePushComponentsDestroyed(s)}joinNewChildren(){f.findPhxChildren(this.el,this.id).forEach(e=>this.joinChild(e))}getChildById(e){return this.root.children[this.id][e]}getDescendentByEl(e){return e.id===this.id?this:this.children[e.getAttribute(We)][e.id]}destroyDescendent(e){for(let i in this.root.children)for(let s in this.root.children[i])if(s===e)return this.root.children[i][s].destroy()}joinChild(e){if(!this.getChildById(e.id)){let s=new mt(e,this.liveSocket,this);return this.root.children[this.id][s.id]=s,s.join(),this.childJoins++,!0}}isJoinPending(){return this.joinPending}ackJoin(e){this.childJoins--,this.childJoins===0&&(this.parent?this.parent.ackJoin(this):this.onAllChildJoinsComplete())}onAllChildJoinsComplete(){this.joinCallback(()=>{this.pendingJoinOps.forEach(([e,i])=>{e.isDestroyed()||i()}),this.pendingJoinOps=[]})}update(e,i){if(this.isJoinPending()||this.liveSocket.hasPendingLink()&&this.root.isMain())return this.pendingDiffs.push({diff:e,events:i});this.rendered.mergeDiff(e);let s=!1;this.rendered.isComponentOnlyDiff(e)?this.liveSocket.time("component patch complete",()=>{f.findParentCIDs(this.el,this.rendered.componentCIDs(e)).forEach(n=>{this.componentPatch(this.rendered.getComponent(e,n),n)&&(s=!0)})}):_s(e)||this.liveSocket.time("full patch complete",()=>{let[r,n]=this.renderContainer(e,"update"),o=new Qe(this,this.el,this.id,r,n,null);s=this.performPatch(o,!0)}),this.liveSocket.dispatchEvents(i),s&&this.joinNewChildren()}renderContainer(e,i){return this.liveSocket.time(`toString diff (${i})`,()=>{let s=this.el.tagName,r=e?this.rendered.componentCIDs(e):null,[n,o]=this.rendered.toString(r);return[`<${s}>${n}</${s}>`,o]})}componentPatch(e,i){if(_s(e))return!1;let[s,r]=this.rendered.componentToString(i),n=new Qe(this,this.el,this.id,s,r,i);return this.performPatch(n,!0)}getHook(e){return this.viewHooks[Be.elementID(e)]}addHook(e){if(Be.elementID(e)||!e.getAttribute)return;let i=e.getAttribute(`data-phx-${ht}`)||e.getAttribute(this.binding(ht));if(i&&!this.ownsElement(e))return;let s=this.liveSocket.getHookCallbacks(i);if(s){e.id||ie(`no DOM ID for hook "${i}". Hooks require a unique ID on each element.`,e);let r=new Be(this,e,s);return this.viewHooks[Be.elementID(r.el)]=r,r}else i!==null&&ie(`unknown hook found for "${i}"`,e)}destroyHook(e){e.__destroyed(),e.__cleanup__(),delete this.viewHooks[Be.elementID(e.el)]}applyPendingUpdates(){this.pendingDiffs.forEach(({diff:e,events:i})=>this.update(e,i)),this.pendingDiffs=[],this.eachChild(e=>e.applyPendingUpdates())}eachChild(e){let i=this.root.children[this.id]||{};for(let s in i)e(this.getChildById(s))}onChannel(e,i){this.liveSocket.onChannel(this.channel,e,s=>{this.isJoinPending()?this.root.pendingJoinOps.push([this,()=>i(s)]):this.liveSocket.requestDOMUpdate(()=>i(s))})}bindChannel(){this.liveSocket.onChannel(this.channel,"diff",e=>{this.liveSocket.requestDOMUpdate(()=>{this.applyDiff("update",e,({diff:i,events:s})=>this.update(i,s))})}),this.onChannel("redirect",({to:e,flash:i})=>this.onRedirect({to:e,flash:i})),this.onChannel("live_patch",e=>this.onLivePatch(e)),this.onChannel("live_redirect",e=>this.onLiveRedirect(e)),this.channel.onError(e=>this.onError(e)),this.channel.onClose(e=>this.onClose(e))}destroyAllChildren(){this.eachChild(e=>e.destroy())}onLiveRedirect(e){let{to:i,kind:s,flash:r}=e,n=this.expandURL(i);this.liveSocket.historyRedirect(n,s,r)}onLivePatch(e){let{to:i,kind:s}=e;this.href=this.expandURL(i),this.liveSocket.historyPatch(i,s)}expandURL(e){return e.startsWith("/")?`${window.location.protocol}//${window.location.host}${e}`:e}onRedirect({to:e,flash:i}){this.liveSocket.redirect(e,i)}isDestroyed(){return this.destroyed}joinDead(){this.isDead=!0}join(e){this.showLoader(this.liveSocket.loaderTimeout),this.bindChannel(),this.isMain()&&(this.stopCallback=this.liveSocket.withPageLoading({to:this.href,kind:"initial"})),this.joinCallback=i=>{i=i||function(){},e?e(this.joinCount,i):i()},this.liveSocket.wrapPush(this,{timeout:!1},()=>this.channel.join().receive("ok",i=>{this.isDestroyed()||this.liveSocket.requestDOMUpdate(()=>this.onJoin(i))}).receive("error",i=>!this.isDestroyed()&&this.onJoinError(i)).receive("timeout",()=>!this.isDestroyed()&&this.onJoinError({reason:"timeout"})))}onJoinError(e){if(e.reason==="reload"){this.log("error",()=>[`failed mount with ${e.status}. Falling back to page request`,e]),this.isMain()&&this.onRedirect({to:this.href});return}else if(e.reason==="unauthorized"||e.reason==="stale"){this.log("error",()=>["unauthorized live_redirect. Falling back to page request",e]),this.isMain()&&this.onRedirect({to:this.href});return}if((e.redirect||e.live_redirect)&&(this.joinPending=!1,this.channel.leave()),e.redirect)return this.onRedirect(e.redirect);if(e.live_redirect)return this.onLiveRedirect(e.live_redirect);this.displayError([at,xt,ii]),this.log("error",()=>["unable to join",e]),this.liveSocket.isConnected()&&this.liveSocket.reloadWithJitter(this)}onClose(e){if(!this.isDestroyed()){if(this.liveSocket.hasPendingLink()&&e!=="leave")return this.liveSocket.reloadWithJitter(this);this.destroyAllChildren(),this.liveSocket.dropActiveElement(this),document.activeElement&&document.activeElement.blur(),this.liveSocket.isUnloaded()&&this.showLoader(Tr)}}onError(e){this.onClose(e),this.liveSocket.isConnected()&&this.log("error",()=>["view crashed",e]),this.liveSocket.isUnloaded()||(this.liveSocket.isConnected()?this.displayError([at,xt,ii]):this.displayError([at,xt,ls]))}displayError(e){this.isMain()&&f.dispatchEvent(window,`${U}:page-loading-start`,{detail:{to:this.href,kind:"error"}}),this.showLoader(),this.setContainerClasses(...e),this.execAll(this.binding("disconnected"))}pushWithReply(e,i,s,r=function(){}){if(!this.isConnected())return;let[n,[o],a]=e?e():[null,[],{}],l=function(){};return(a.page_loading||o&&o.getAttribute(this.binding(os))!==null)&&(l=this.liveSocket.withPageLoading({kind:"element",target:o})),typeof s.cid!="number"&&delete s.cid,this.liveSocket.wrapPush(this,{timeout:!0},()=>this.channel.push(i,s,Pr).receive("ok",c=>{let p=m=>{c.redirect&&this.onRedirect(c.redirect),c.live_patch&&this.onLivePatch(c.live_patch),c.live_redirect&&this.onLiveRedirect(c.live_redirect),l(),r(c,m)};c.diff?this.liveSocket.requestDOMUpdate(()=>{this.applyDiff("update",c.diff,({diff:m,reply:v,events:E})=>{n!==null&&this.undoRefs(n),this.update(m,E),p(v)})}):(n!==null&&this.undoRefs(n),p(null))}))}undoRefs(e){!this.isConnected()||f.all(document,`[${Pe}="${this.id}"][${oe}="${e}"]`,i=>{let s=i.getAttribute(Ge),r=i.getAttribute(ai);i.removeAttribute(oe),i.removeAttribute(Pe),r!==null&&(i.readOnly=r==="true",i.removeAttribute(ai)),s!==null&&(i.disabled=s==="true",i.removeAttribute(Ge)),Qt.forEach(a=>f.removeClass(i,a));let n=i.getAttribute(Pt);n!==null&&(i.innerText=n,i.removeAttribute(Pt));let o=f.private(i,oe);if(o){let a=this.triggerBeforeUpdateHook(i,o);Qe.patchEl(i,o,this.liveSocket.getActiveElement()),a&&a.__updated(),f.deletePrivate(i,oe)}})}putRef(e,i,s={}){let r=this.ref++,n=this.binding(kt);return s.loading&&(e=e.concat(f.all(document,s.loading))),e.forEach(o=>{o.classList.add(`phx-${i}-loading`),o.setAttribute(oe,r),o.setAttribute(Pe,this.el.id);let a=o.getAttribute(n);a!==null&&(o.getAttribute(Pt)||o.setAttribute(Pt,o.innerText),a!==""&&(o.innerText=a),o.setAttribute(Ge,o.getAttribute(Ge)||o.disabled),o.setAttribute("disabled",""))}),[r,e,s]}componentID(e){let i=e.getAttribute&&e.getAttribute(pe);return i?parseInt(i):null}targetComponentID(e,i,s={}){if(be(i))return i;let r=s.target||e.getAttribute(this.binding("target"));return be(r)?parseInt(r):i&&(r!==null||s.target)?this.closestComponentID(i):null}closestComponentID(e){return be(e)?e:e?Ae(e.closest(`[${pe}]`),i=>this.ownsElement(i)&&this.componentID(i)):null}pushHookEvent(e,i,s,r,n){if(!this.isConnected())return this.log("hook",()=>["unable to push hook event. LiveView not connected",s,r]),!1;let[o,a,l]=this.putRef([e],"hook");return this.pushWithReply(()=>[o,a,l],"event",{type:"hook",event:s,value:r,cid:this.closestComponentID(i)},(c,p)=>n(p,o)),o}extractMeta(e,i,s){let r=this.binding("value-");for(let n=0;n<e.attributes.length;n++){i||(i={});let o=e.attributes[n].name;o.startsWith(r)&&(i[o.replace(r,"")]=e.getAttribute(o))}if(e.value!==void 0&&!(e instanceof HTMLFormElement)&&(i||(i={}),i.value=e.value,e.tagName==="INPUT"&&oi.indexOf(e.type)>=0&&!e.checked&&delete i.value),s){i||(i={});for(let n in s)i[n]=s[n]}return i}pushEvent(e,i,s,r,n,o={},a){this.pushWithReply(()=>this.putRef([i],e,o),"event",{type:e,event:r,value:this.extractMeta(i,n,o.value),cid:this.targetComponentID(i,s,o)},(l,c)=>a&&a(c))}pushFileProgress(e,i,s,r=function(){}){this.liveSocket.withinOwners(e.form,(n,o)=>{n.pushWithReply(null,"progress",{event:e.getAttribute(n.binding(Cr)),ref:e.getAttribute(me),entry_ref:i,progress:s,cid:n.targetComponentID(e.form,o)},r)})}pushInput(e,i,s,r,n,o){let a,l=be(s)?s:this.targetComponentID(e.form,i,n),c=()=>this.putRef([e,e.form],"change",n),p,m=this.extractMeta(e.form);e instanceof HTMLButtonElement&&(m.submitter=e),e.getAttribute(this.binding("change"))?p=bi(e.form,M({_target:n._target},m),[e.name]):p=bi(e.form,M({_target:n._target},m)),f.isUploadInput(e)&&e.files&&e.files.length>0&&X.trackFiles(e,Array.from(e.files)),a=X.serializeUploads(e);let v={type:"form",event:r,value:p,uploads:a,cid:l};this.pushWithReply(c,"event",v,E=>{if(f.showError(e,this.liveSocket.binding(ze),this.liveSocket.binding(Ke)),f.isUploadInput(e)&&f.isAutoUpload(e)){if(X.filesAwaitingPreflight(e).length>0){let[b,A]=c();this.uploadFiles(e.form,i,b,l,N=>{o&&o(E),this.triggerAwaitingSubmit(e.form),this.undoRefs(b)})}}else o&&o(E)})}triggerAwaitingSubmit(e){let i=this.getScheduledSubmit(e);if(i){let[s,r,n,o]=i;this.cancelSubmit(e),o()}}getScheduledSubmit(e){return this.formSubmits.find(([i,s,r,n])=>i.isSameNode(e))}scheduleSubmit(e,i,s,r){if(this.getScheduledSubmit(e))return!0;this.formSubmits.push([e,i,s,r])}cancelSubmit(e){this.formSubmits=this.formSubmits.filter(([i,s,r])=>i.isSameNode(e)?(this.undoRefs(s),!1):!0)}disableForm(e,i={}){let s=m=>!(pt(m,`${this.binding(ct)}=ignore`,m.form)||pt(m,"data-phx-update=ignore",m.form)),r=m=>m.hasAttribute(this.binding(kt)),n=m=>m.tagName=="BUTTON",o=m=>["INPUT","TEXTAREA","SELECT"].includes(m.tagName),a=Array.from(e.elements),l=a.filter(r),c=a.filter(n).filter(s),p=a.filter(o).filter(s);return c.forEach(m=>{m.setAttribute(Ge,m.disabled),m.disabled=!0}),p.forEach(m=>{m.setAttribute(ai,m.readOnly),m.readOnly=!0,m.files&&(m.setAttribute(Ge,m.disabled),m.disabled=!0)}),e.setAttribute(this.binding(os),""),this.putRef([e].concat(l).concat(c).concat(p),"submit",i)}pushFormSubmit(e,i,s,r,n,o){let a=()=>this.disableForm(e,n),l=this.targetComponentID(e,i);if(X.hasUploadsInProgress(e)){let[c,p]=a(),m=()=>this.pushFormSubmit(e,i,s,r,n,o);return this.scheduleSubmit(e,c,n,m)}else if(X.inputsAwaitingPreflight(e).length>0){let[c,p]=a(),m=()=>[c,p,n];this.uploadFiles(e,i,c,l,v=>{let E=this.extractMeta(e),b=bi(e,M({submitter:r},E));this.pushWithReply(m,"event",{type:"form",event:s,value:b,cid:l},o)})}else if(!(e.hasAttribute(oe)&&e.classList.contains("phx-submit-loading"))){let c=this.extractMeta(e),p=bi(e,M({submitter:r},c));this.pushWithReply(a,"event",{type:"form",event:s,value:p,cid:l},o)}}uploadFiles(e,i,s,r,n){let o=this.joinCount,a=X.activeFileInputs(e),l=a.length;a.forEach(c=>{let p=new X(c,this,()=>{l--,l===0&&n()}),m=p.entries().map(E=>E.toPreflightPayload());if(m.length===0){l--;return}let v={ref:c.getAttribute(me),entries:m,cid:this.targetComponentID(c.form,i)};this.log("upload",()=>["sending preflight request",v]),this.pushWithReply(null,"allow_upload",v,E=>{if(this.log("upload",()=>["got preflight response",E]),E.error){this.undoRefs(s);let[b,A]=E.error;this.log("upload",()=>[`error for entry ${b}`,A])}else{let b=A=>{this.channel.onError(()=>{this.joinCount===o&&A()})};p.initAdapterUpload(E,b,this.liveSocket)}})})}dispatchUploads(e,i,s){let r=this.targetCtxElement(e)||this.el,n=f.findUploadInputs(r).filter(o=>o.name===i);n.length===0?ie(`no live file inputs found matching the name "${i}"`):n.length>1?ie(`duplicate live file inputs found matching the name "${i}"`):f.dispatchEvent(n[0],Zt,{detail:{files:s}})}targetCtxElement(e){if(be(e)){let[i]=f.findComponentNodeList(this.el,e);return i}else return e||null}pushFormRecovery(e,i,s){this.liveSocket.withinOwners(e,(r,n)=>{let o=this.binding("change"),a=Array.from(e.elements).filter(p=>f.isFormInput(p)&&p.name&&!p.hasAttribute(o));if(a.length===0)return;a.forEach(p=>p.hasAttribute(me)&&X.clearFiles(p));let l=a.find(p=>p.type!=="hidden")||a[0],c=e.getAttribute(this.binding(cs))||e.getAttribute(this.binding("change"));ee.exec("change",c,r,l,["push",{_target:l.name,newCid:i,callback:s}])})}pushLinkPatch(e,i,s){let r=this.liveSocket.setPendingLink(e),n=i?()=>this.putRef([i],"click"):null,o=()=>this.liveSocket.redirect(window.location.href),a=e.startsWith("/")?`${location.protocol}//${location.host}${e}`:e,l=this.pushWithReply(n,"live_patch",{url:a},c=>{this.liveSocket.requestDOMUpdate(()=>{c.link_redirect?this.liveSocket.replaceMain(e,null,s,r):(this.liveSocket.commitPendingLink(r)&&(this.href=e),this.applyPendingUpdates(),s&&s(r))})});l?l.receive("timeout",o):o()}formsForRecovery(e){if(this.joinCount===0)return[];let i=this.binding("change"),s=document.createElement("template");return s.innerHTML=e,f.all(this.el,`form[${i}]`).filter(r=>r.id&&this.ownsElement(r)).filter(r=>r.elements.length>0).filter(r=>r.getAttribute(this.binding(cs))!=="ignore").map(r=>{let n=CSS.escape(r.getAttribute(i)),o=s.content.querySelector(`form[id="${r.id}"][${i}="${n}"]`);return o?[r,o,this.targetComponentID(o)]:[r,r,this.targetComponentID(r)]}).filter(([r,n,o])=>n)}maybePushComponentsDestroyed(e){let i=e.filter(s=>f.findComponentNodeList(this.el,s).length===0);i.length>0&&(i.forEach(s=>this.rendered.resetRender(s)),this.pushWithReply(null,"cids_will_destroy",{cids:i},()=>{let s=i.filter(r=>f.findComponentNodeList(this.el,r).length===0);s.length>0&&this.pushWithReply(null,"cids_destroyed",{cids:s},r=>{this.rendered.pruneCIDs(r.cids)})}))}ownsElement(e){let i=e.closest(He);return e.getAttribute(We)===this.id||i&&i.id===this.id||!i&&this.isDead}submitForm(e,i,s,r,n={}){f.putPrivate(e,lt,!0);let o=this.liveSocket.binding(ze),a=this.liveSocket.binding(Ke),l=Array.from(e.elements);l.forEach(c=>f.putPrivate(c,lt,!0)),this.liveSocket.blurActiveElement(this),this.pushFormSubmit(e,i,s,r,n,()=>{l.forEach(c=>f.showError(c,o,a)),this.liveSocket.restorePreviouslyActiveFocus()})}binding(e){return this.liveSocket.binding(e)}};var Ot=class{constructor(e,i,s={}){if(this.unloaded=!1,!i||i.constructor.name==="Object")throw new Error(`
      a phoenix Socket must be provided as the second argument to the LiveSocket constructor. For example:

          import {Socket} from "phoenix"
          import {LiveSocket} from "phoenix_live_view"
          let liveSocket = new LiveSocket("/live", Socket, {...})
      `);this.socket=new i(e,s),this.bindingPrefix=s.bindingPrefix||kr,this.opts=s,this.params=pi(s.params||{}),this.viewLogger=s.viewLogger,this.metadataCallbacks=s.metadata||{},this.defaults=Object.assign(ft(Rr),s.defaults||{}),this.activeElement=null,this.prevActive=null,this.silenced=!1,this.main=null,this.outgoingMainEl=null,this.clickStartedAtTarget=null,this.linkRef=1,this.roots={},this.href=window.location.href,this.pendingLink=null,this.currentLocation=ft(window.location),this.hooks=s.hooks||{},this.uploaders=s.uploaders||{},this.loaderTimeout=s.loaderTimeout||xr,this.reloadWithJitterTimer=null,this.maxReloads=s.maxReloads||pr,this.reloadJitterMin=s.reloadJitterMin||mr,this.reloadJitterMax=s.reloadJitterMax||gr,this.failsafeJitter=s.failsafeJitter||_r,this.localStorage=s.localStorage||window.localStorage,this.sessionStorage=s.sessionStorage||window.sessionStorage,this.boundTopLevelEvents=!1,this.domCallbacks=Object.assign({onNodeAdded:pi(),onBeforeElUpdated:pi()},s.dom||{}),this.doofinderMount=s.doofinderMount,this.connectCallback=s.connectCallback||(()=>{}),this.disconnectCallback=s.disconnectCallback||(()=>{}),this.unbindFunctions=[],this.transitions=new Jr,window.addEventListener("pagehide",r=>{this.unloaded=!0}),this.socket.onOpen(()=>{this.isUnloaded()&&window.location.reload()}),this.socket.onOpen(()=>{this.connectCallback()})}isProfileEnabled(){return this.sessionStorage.getItem(ci)==="true"}isDebugEnabled(){return this.sessionStorage.getItem(Rt)==="true"}isDebugDisabled(){return this.sessionStorage.getItem(Rt)==="false"}enableDebug(){this.sessionStorage.setItem(Rt,"true")}enableProfiling(){this.sessionStorage.setItem(ci,"true")}disableDebug(){this.sessionStorage.setItem(Rt,"false")}disableProfiling(){this.sessionStorage.removeItem(ci)}enableLatencySim(e){this.enableDebug(),console.log("latency simulator enabled for the duration of this browser session. Call disableLatencySim() to disable"),this.sessionStorage.setItem(di,e)}disableLatencySim(){this.sessionStorage.removeItem(di)}getLatencySim(){let e=this.sessionStorage.getItem(di);return e?parseInt(e):null}getSocket(){return this.socket}connect(){window.location.hostname==="localhost"&&!this.isDebugDisabled()&&this.enableDebug(),this.joinRootViews()&&(this.bindTopLevelEvents(),this.socket.connect())}disconnect(e){clearTimeout(this.reloadWithJitterTimer),this.socket.disconnect(e)}replaceTransport(e){clearTimeout(this.reloadWithJitterTimer),this.socket.replaceTransport(e),this.connect()}execJS(e,i,s=null){this.owner(e,r=>ee.exec(s,i,r,e))}execJSHookPush(e,i,s,r){this.withinOwners(e,n=>{ee.exec("hook",i,n,e,["push",{data:s,callback:r}])})}unload(){this.unloaded||(this.main&&this.isConnected()&&this.log(this.main,"socket",()=>["disconnect for page nav"]),this.unloaded=!0,this.destroyAllViews(),this.disconnect())}triggerDOM(e,i){this.domCallbacks[e](...i)}time(e,i){if(!this.isProfileEnabled()||!console.time)return i();console.time(e);let s=i();return console.timeEnd(e),s}log(e,i,s){if(this.viewLogger){let[r,n]=s();this.viewLogger(e,i,r,n)}else if(this.isDebugEnabled()){let[r,n]=s();Dr(e,i,r,n)}}requestDOMUpdate(e){this.transitions.after(e)}transition(e,i,s=function(){}){this.transitions.addTransition(e,i,s)}onChannel(e,i,s){e.on(i,r=>{let n=this.getLatencySim();n?setTimeout(()=>s(r),n):s(r)})}wrapPush(e,i,s){let r=this.getLatencySim(),n=e.joinCount;if(!r)return this.isConnected()&&i.timeout?s().receive("timeout",()=>{e.joinCount===n&&!e.isDestroyed()&&this.reloadWithJitter(e,()=>{this.log(e,"timeout",()=>["received timeout while communicating with server. Falling back to hard refresh for recovery"])})}):s();let o={receives:[],receive(a,l){this.receives.push([a,l])}};return setTimeout(()=>{e.isDestroyed()||o.receives.reduce((a,[l,c])=>a.receive(l,c),s())},r),o}reloadWithJitter(e,i){clearTimeout(this.reloadWithJitterTimer),this.disconnect();let s=this.reloadJitterMin,r=this.reloadJitterMax,n=Math.floor(Math.random()*(r-s+1))+s;Le.updateLocal(this.localStorage,window.location.pathname,Yt,0,a=>a+1)>this.maxReloads&&(n=this.failsafeJitter),this.reloadWithJitterTimer=setTimeout(()=>{this.disconnectCallback()},n)}getHookCallbacks(e){return e&&e.startsWith("Phoenix.")?Fr[e.split(".")[1]]:this.hooks[e]}isUnloaded(){return this.unloaded}isConnected(){return this.socket.isConnected()}getBindingPrefix(){return this.bindingPrefix}binding(e){return`${this.getBindingPrefix()}${e}`}channel(e,i){return this.socket.channel(e,i)}joinRootViews(){if(this.doofinderMount){let e=this.newRootView(this.doofinderMount);return e.setHref(this.getHref()),e.join(),this.main=e,!0}else return!1}redirect(e,i){this.disconnect(this.disconnectCallback),Le.redirect(e,i)}replaceMain(e,i,s=null,r=this.setPendingLink(e)){let n=this.currentLocation.href;this.outgoingMainEl=this.outgoingMainEl||this.main.el;let o=f.cloneNode(this.outgoingMainEl,"");this.main.showLoader(this.loaderTimeout),this.main.destroy(),this.main=this.newRootView(o,i,n),this.main.setRedirect(e),this.transitionRemoves(null,!0),this.main.join((a,l)=>{a===1&&this.commitPendingLink(r)&&this.requestDOMUpdate(()=>{f.findPhxSticky(document).forEach(c=>o.appendChild(c)),this.outgoingMainEl.replaceWith(o),this.outgoingMainEl=null,s&&s(r),l()})})}transitionRemoves(e,i){let s=this.binding("remove");if(e=e||f.all(document,`[${s}]`),i){let r=f.findPhxSticky(document)||[];e=e.filter(n=>!f.isChildOfAny(n,r))}e.forEach(r=>{this.execJS(r,r.getAttribute(s),"remove")})}isPhxView(e){return e.getAttribute&&e.getAttribute(ve)!==null}newRootView(e,i,s){let r=new mt(e,this,null,i,s);return this.roots[r.id]=r,r}owner(e,i){let s=Ae(e.closest(He),r=>this.getViewByEl(r))||this.main;s&&i(s)}withinOwners(e,i){this.owner(e,s=>i(s,e))}getViewByEl(e){let i=e.getAttribute(Re);return Ae(this.getRootById(i),s=>s.getDescendentByEl(e))}getRootById(e){return this.roots[e]}destroyAllViews(){for(let e in this.roots)this.roots[e].destroy(),delete this.roots[e];this.main=null}destroyViewByEl(e){let i=this.getRootById(e.getAttribute(Re));i&&i.id===e.id?(i.destroy(),delete this.roots[i.id]):i&&i.destroyDescendent(e.id)}setActiveElement(e){if(this.activeElement===e)return;this.activeElement=e;let i=()=>{e===this.activeElement&&(this.activeElement=null),e.removeEventListener("mouseup",this),e.removeEventListener("touchend",this)};e.addEventListener("mouseup",i),e.addEventListener("touchend",i)}getActiveElement(){return document.activeElement===document.body?this.activeElement||document.activeElement:document.activeElement||document.body}dropActiveElement(e){this.prevActive&&e.ownsElement(this.prevActive)&&(this.prevActive=null)}restorePreviouslyActiveFocus(){this.prevActive&&this.prevActive!==document.body&&this.prevActive.focus()}blurActiveElement(){this.prevActive=this.getActiveElement(),this.prevActive!==document.body&&this.prevActive.blur()}bindTopLevelEvents({dead:e}={}){this.boundTopLevelEvents||(this.boundTopLevelEvents=!0,this.socket.onClose(i=>{if(i&&i.code===1e3&&this.main)return this.reloadWithJitter(this.main)}),this.unbindFunctions.push((()=>{let i=function(){};return document.body.addEventListener("click",i),function(){document.body.removeEventListener("click",i)}})()),window.addEventListener("pageshow",i=>{i.persisted&&(this.getSocket().disconnect(),this.withPageLoading({to:window.location.href,kind:"redirect"}),window.location.reload())},!0),this.bindClicks(),e||this.bindForms(),this.bind({keyup:"keyup",keydown:"keydown"},(i,s,r,n,o,a)=>{let l=n.getAttribute(this.binding(Ar)),c=i.key&&i.key.toLowerCase();if(l&&l.toLowerCase()!==c)return;let p=M({key:i.key},this.eventMeta(s,i,n));ee.exec(s,o,r,n,["push",{data:p}])}),this.bind({blur:"focusout",focus:"focusin"},(i,s,r,n,o,a)=>{if(!a){let l=M({key:i.key},this.eventMeta(s,i,n));ee.exec(s,o,r,n,["push",{data:l}])}}),this.bind({blur:"blur",focus:"focus"},(i,s,r,n,o,a)=>{if(a==="window"){let l=this.eventMeta(s,i,n);ee.exec(s,o,r,n,["push",{data:l}])}}),this.unbindFunctions.push((()=>{let i=s=>s.preventDefault();return this.doofinderMount.addEventListener("dragover",i),()=>this.doofinderMount.removeEventListener("dragover",i)})()),this.unbindFunctions.push((()=>{let i=s=>{s.preventDefault();let r=Ae(pt(s.target,this.binding(rs)),a=>a.getAttribute(this.binding(rs))),n=r&&document.getElementById(r),o=Array.from(s.dataTransfer.files||[]);!n||n.disabled||o.length===0||!(n.files instanceof FileList)||(X.trackFiles(n,o,s.dataTransfer),n.dispatchEvent(new Event("input",{bubbles:!0})))};return this.doofinderMount.addEventListener("drop",i),()=>this.doofinderMount.removeEventListener("drop",i)})()),this.on(Zt,i=>{let s=i.target;if(!f.isUploadInput(s))return;let r=Array.from(i.detail.files||[]).filter(n=>n instanceof File||n instanceof Blob);X.trackFiles(s,r),s.dispatchEvent(new Event("input",{bubbles:!0}))},this.doofinderMount))}unbindTopLevelEvents(){this.unbindFunctions.forEach(e=>e()),this.unbindFunctions=[]}eventMeta(e,i,s){let r=this.metadataCallbacks[e];return r?r(i,s):{}}setPendingLink(e){return this.linkRef++,this.pendingLink=e,this.linkRef}commitPendingLink(e){return this.linkRef!==e?!1:(this.href=this.pendingLink,this.pendingLink=null,!0)}getHref(){return this.href}hasPendingLink(){return!!this.pendingLink}bind(e,i){for(let s in e){let r=e[s];this.on(r,n=>{let o=this.binding(s),a=this.binding(`window-${s}`),l=n.target.getAttribute&&n.target.getAttribute(o);l?this.debounce(n.target,n,r,()=>{this.withinOwners(n.target,c=>{i(n,s,c,n.target,l,null)})}):f.all(document,`[${a}]`,c=>{let p=c.getAttribute(a);this.debounce(c,n,r,()=>{this.withinOwners(c,m=>{i(n,s,m,c,p,"window")})})})},this.doofinderMount)}}bindClicks(){let e=i=>{this.clickStartedAtTarget=i.target};this.doofinderMount.addEventListener("click",e),this.unbindFunctions.push(()=>this.doofinderMount.removeEventListener("click",e)),this.bindClick("click","click",!1),this.bindClick("mousedown","capture-click",!0)}bindClick(e,i,s){let r=this.binding(i),n=o=>{if(!this.isConnected())return;let a=null;if(s)a=o.target.matches(`[${r}]`)?o.target:o.target.querySelector(`[${r}]`);else{o.detail===0&&(this.clickStartedAtTarget=o.target);let c=this.clickStartedAtTarget||o.target;a=pt(c,r),this.dispatchClickAway(o,c),this.clickStartedAtTarget=null}let l=a&&a.getAttribute(r);if(!l){!s&&f.isNewPageClick(o,window.location)&&this.unload();return}a.getAttribute("href")==="#"&&o.preventDefault(),!a.hasAttribute(oe)&&(a.disabled||this.debounce(a,o,"click",()=>{this.withinOwners(a,c=>{ee.exec("click",l,c,a,["push",{data:this.eventMeta("click",o,a)}])})}))};this.doofinderMount.addEventListener(e,n,s),this.unbindFunctions.push(()=>this.doofinderMount.removeEventListener(e,n,s))}dispatchClickAway(e,i){let s=this.binding("click-away");f.all(document,`[${s}]`,r=>{r.isSameNode(i)||r.contains(i)||this.withinOwners(r,n=>{let o=r.getAttribute(s);ee.isVisible(r)&&ee.isInViewport(r)&&ee.exec("click",o,n,r,["push",{data:this.eventMeta("click",e,e.target)}])})})}maybeScroll(e){typeof e=="number"&&requestAnimationFrame(()=>{window.scrollTo(0,e)})}dispatchEvent(e,i={}){f.dispatchEvent(this.doofinderMount,`${U}:${e}`,{detail:i})}dispatchEvents(e){e.forEach(([i,s])=>this.dispatchEvent(i,s))}withPageLoading(e,i){f.dispatchEvent(this.doofinderMount,`${U}:page-loading-start`,{detail:e});let s=()=>f.dispatchEvent(this.doofinderMount,`${U}:page-loading-stop`,{detail:e});return i?i(s):s}pushHistoryPatch(e,i,s){if(!this.isConnected()||!this.main.isMain())return Le.redirect(e);this.withPageLoading({to:e,kind:"patch"},r=>{this.main.pushLinkPatch(e,s,n=>{this.historyPatch(e,i,n),r()})})}historyPatch(e,i,s=this.setPendingLink(e)){!this.commitPendingLink(s)||(Le.pushState(i,{type:"patch",id:this.main.id},e),f.dispatchEvent(window,`${U}:navigate`,{detail:{patch:!0,href:e,pop:!1}}),this.registerNewLocation(window.location))}historyRedirect(e,i,s){if(!this.isConnected()||!this.main.isMain())return Le.redirect(e,s);if(/^\/$|^\/[^\/]+.*$/.test(e)){let{protocol:n,host:o}=window.location;e=`${n}//${o}${e}`}let r=window.scrollY;this.withPageLoading({to:e,kind:"redirect"},n=>{this.replaceMain(e,s,o=>{o===this.linkRef&&(Le.pushState(i,{type:"redirect",id:this.main.id,scroll:r},e),f.dispatchEvent(window,`${U}:navigate`,{detail:{href:e,patch:!1,pop:!1}}),this.registerNewLocation(window.location)),n()})})}replaceRootHistory(){Le.pushState("replace",{root:!0,type:"patch",id:this.main.id})}registerNewLocation(e){let{pathname:i,search:s}=this.currentLocation;return i+s===e.pathname+e.search?!1:(this.currentLocation=ft(e),!0)}bindForms(){let e=0,i=!1;this.on("submit",s=>{let r=s.target.getAttribute(this.binding("submit")),n=s.target.getAttribute(this.binding("change"));!i&&n&&!r&&(i=!0,s.preventDefault(),s.stopPropagation(),this.withinOwners(s.target,o=>{o.disableForm(s.target),window.requestAnimationFrame(()=>{f.isUnloadableFormSubmit(s)&&this.unload(),s.target.submit()})}))},this.doofinderMount),this.on("submit",s=>{let r=s.target.getAttribute(this.binding("submit"));if(!r){f.isUnloadableFormSubmit(s)&&this.unload();return}s.preventDefault(),s.stopPropagation(),s.target.disabled=!0,this.withinOwners(s.target,n=>{ee.exec("submit",r,n,s.target,["push",{submitter:s.submitter}])})},this.doofinderMount);for(let s of["change","input"])this.on(s,r=>{r.stopPropagation();let n=this.binding("change"),o=r.target,a=o.getAttribute(n),l=o.form&&o.form.getAttribute(n),c=a||l;if(!c||o.type==="number"&&o.validity&&o.validity.badInput)return;let p=a?o:o.form,m=e;e++;let{at:v,type:E}=f.private(o,"prev-iteration")||{};v===m-1&&s==="change"&&E==="input"||(f.putPrivate(o,"prev-iteration",{at:m,type:s}),this.debounce(o,r,s,()=>{this.withinOwners(p,b=>{f.putPrivate(o,Tt,!0),f.isTextualInput(o)||this.setActiveElement(o),ee.exec("change",c,b,o,["push",{_target:r.target.name,dispatcher:p}])})}))},this.doofinderMount);this.on("reset",s=>{let r=s.target;f.resetForm(r,this.binding(ze),this.binding(Ke));let n=Array.from(r.elements).find(o=>o.type==="reset");n&&window.requestAnimationFrame(()=>{n.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!1}))})})}debounce(e,i,s,r){if(s==="blur"||s==="focusout")return r();let n=this.binding(Er),o=this.binding(wr),a=this.defaults.debounce.toString(),l=this.defaults.throttle.toString();this.withinOwners(e,c=>{let p=()=>!c.isDestroyed()&&document.body.contains(e);f.debounce(e,i,n,a,o,l,p,()=>{r()})})}silenceEvents(e){this.silenced=!0,e(),this.silenced=!1}on(e,i,s=window){let r=n=>{this.silenced||i(n)};s.addEventListener(e,r),this.unbindFunctions.push(function(){s.removeEventListener(e,r)})}},Jr=class{constructor(){this.transitions=new Set,this.pendingOps=[]}reset(){this.transitions.forEach(e=>{clearTimeout(e),this.transitions.delete(e)}),this.flushPendingOps()}after(e){this.size()===0?e():this.pushPendingOp(e)}addTransition(e,i,s){i();let r=setTimeout(()=>{this.transitions.delete(r),s(),this.flushPendingOps()},e);this.transitions.add(r)}pushPendingOp(e){this.pendingOps.push(e)}size(){return this.transitions.size}flushPendingOps(){if(this.size()>0)return;let e=this.pendingOps.shift();e&&(e(),this.flushPendingOps())}};var Ss=class{constructor(e){let{url:i,mount:s,hooks:r,params:n,mainHook:o,appName:a,disconnectCallback:l}=e,c={hooks:r,doofinderMount:s,params:n,metadata:{click:function(p){return{keys:{altKey:p.altKey,shiftKey:p.shiftKey,ctrlKey:p.ctrlKey,metaKey:p.metaKey}}}},disconnectCallback:l};this.__mainHook=o,this.__socket=new Ot(i,ss,c),this.__appName=a}get connected(){return this.__socket.isConnected()}enableDebug(){this.__socket.enableDebug()}disableDebug(){this.__socket.disableDebug()}setPreventReconnect(e=!1){this.__socket.preventReconnect=e}getHooksByName(e){if(this.connected){let i=this.__socket.doofinderMount,s=this.__socket.getViewByEl(i);return Array.from(i.querySelectorAll(`[dfd-hook="${e}"]`)).map(n=>s.getHook(n))}else return[]}connect(e){this.connected||this.__socket.connect(),Doofinder.Session.setLive(this.__appName),e()}disconnect(e){this.__socket.unbindTopLevelEvents(),this.__socket.destroyAllViews(),this.__socket.disconnect(e),this.__socket=null}pushEvent(e,i={},s=void 0){let[r]=this.getHooksByName(this.__mainHook);if(!r)throw new Error(`${this.__mainHook} hook is not ready!`);r.pushEvent(e,i,s)}};var gt=class{constructor(e,i){this._bucket=e,this._store=i||window.localStorage}get data(){return JSON.parse(this._store.getItem(this._bucket))||{}}set data(e){this._store.setItem(this._bucket,JSON.stringify(e))}getItem(e){return this.data[e]}setItem(e,i){let s=this.data;s[e]=i,this.data=s}removeItem(e){let i=this.data;delete i[e],this.data=i}clear(){this.data={}}destroy(){this._store.removeItem(this._bucket)}popItem(e){let i=this.data,s=i[e];return delete i[e],this.data=i,s}};var ys="dfd-animate",Es="dfd-fixed-layout",Me="hidden",Si="floating",yi="fullscreen",Ze="static";function Ei(t){let e=["left","top","right","bottom","width","height","scrollLeft","scrollTop","scrollWidth","scrollHeight"],i=e.reduce((r,n)=>(r[n]=0,r),{}),s=t;if(s===window)i=Te(M({},i),{width:s.outerWidth,height:s.outerHeight,clientWidth:s.innerWidth,clientHeight:s.innerHeight,scrollLeft:s.scrollX,scrollTop:s.scrollY,scrollWidth:document.scrollWidth,scrollHeight:document.scrollHeight});else{if(s===document)s=document.documentElement,i=Te(M({},i),{width:s.offsetWidth,height:s.offsetHeight});else if(s.getBoundingClientRect){let r=s.getBoundingClientRect();i=e.reduce((n,o)=>(n[o]=r[o],n),{})}i=Te(M({},i),{clientWidth:s.clientWidth,clientHeight:s.clientHeight,scrollLeft:s.scrollLeft,scrollTop:s.scrollTop,scrollWidth:s.scrollWidth,scrollHeight:s.scrollHeight})}return i}function qr(t){let e=t;for(;e&&getComputedStyle(e).position!=="fixed";)e=e.offsetParent;return!!e}"use strict";var ws=class{constructor(e,i={}){this.options=M({align:i.align,offsetX:0,offsetY:4,marginY:20,marginX:20,fillViewPortWidth:768},i),this.element=e}__origin__(e){let i=Ei(e),s=Ei(document),r=s.width<=this.options.fillViewPortWidth,n={width:i.width,top:i.top+i.height,left:i.left,fixed:qr(e),align:function(){let o=Math.abs(i.left)*100/s.width,a=Math.abs(s.clientWidth-i.right)*100/s.width;switch(!0){case r:case Math.abs(o-a)<=15:return"center";case o<a:return"left";default:return"right"}}(),fillViewPort:r};return n.fixed||(n.top+=Math.abs(s.scrollTop),n.left+=Math.abs(s.scrollLeft)),n}update(e){let i=this.__origin__(e),s=document.documentElement,r=this.options.align||i.align,n=s.clientHeight-i.top-this.options.marginY,o=this.options.offsetX,a=this.options.offsetY;if(this.element.style.maxWidth=null,this.element.style.height=null,r!=="center"&&(this.element.style.marginLeft=null),this.element.style.position=i.fixed?"fixed":"absolute",r==="left"){let l=s.clientWidth-i.left-this.options.marginX,c=i.left;this.element.style.maxWidth=`${l-o}px`,this.element.style.left=`${c+o}px`,this.element.style.right=null}else if(r==="right"){let l=i.left+i.width-this.options.marginX+o,c=s.clientWidth-i.left-i.width;this.element.style.maxWidth=`${l+o}px`,this.element.style.right=`${c-o}px`,this.element.style.left=null}else{let l=s.clientWidth-i.left-i.width,c=Math.min(this.options.marginX,i.left,l);this.element.style.maxWidth=`${s.clientWidth-2*c}px`,this.element.style.left="50%",this.element.style.marginLeft=`-${Ei(this.element).width/2}px`}this.element.style.top=`${i.top+a}px`,this.element.style.height=`${n-a}px`}destroy(){["position","top","left","right","height","maxWidth","marginLeft"].forEach(e=>this.element.style[e]=null),this.options=null,this.element=null}};function wi(t,e=66,i=!1){let s;return function(...r){s?Date.now()-s>=e?(t(...r),s=Date.now()):i&&console.log("throttle: discard execution"):(t(...r),s=Date.now())}}var et=class{constructor(e){this.mount=e,this._positionReference=null}__animate__(){return new Promise(e=>{setTimeout(()=>{this.mount.classList.add(ys),e()},10)})}get positionReference(){return this._positionReference}show(){return P(this,null,function*(){let e=this.hidden();return e&&(this.mount.removeAttribute(Me),yield this.__animate__()),e})}hide(){return P(this,null,function*(){let e=!this.hidden();return e&&(this.mount.setAttribute(Me,""),this.mount.classList.remove(ys),this.mount.innerHTML=""),e})}updatePosition(e){return P(this,null,function*(){this._positionReference=e.positionReference})}destroy(){this.mount=void 0}hidden(){return this.mount.hasAttribute(Me)}};var As=class extends et{constructor(e,i={}){super(e);this.handleWindowChange=wi(this.handleWindowChange.bind(this)),this._position=new ws(this.mount,i)}__addListeners__(){window.addEventListener("resize",this.handleWindowChange,{passive:!0})}__removeListeners__(){window.removeEventListener("resize",this.handleWindowChange)}get position(){return this._position}handleWindowChange(){this._position.update(this._positionReference)}show(){var e=i=>super[i];return P(this,null,function*(){let s=this.hidden();return s&&(this.mount.style.opacity="0",this.mount.removeAttribute(Me)),this._position.update(this._positionReference),s&&(this.mount.setAttribute(Me,""),this.mount.style.opacity=null,yield e("show").call(this),this.__addListeners__()),s})}hide(){var e=i=>super[i];return P(this,null,function*(){let s=!this.hidden();return s&&(this.__removeListeners__(),yield e("hide").call(this)),s})}updatePosition(e){var i=s=>super[s];return P(this,null,function*(){i("updatePosition").call(this,e),this._position.update(this._positionReference)})}destroy(){this.__removeListeners__(),this._position.destroy(),this._position=null,super.destroy()}};var Cs=class extends et{show(){var e=i=>super[i];return P(this,null,function*(){let s=this.hidden();return s&&(document.documentElement.classList.add(Es),yield e("show").call(this)),s})}hide(){var e=i=>super[i];return P(this,null,function*(){let s=yield e("hide").call(this);return s&&document.documentElement.classList.remove(Es),s})}};function _t(t=8){let e="";for(;e.length<t;)e=`${e}${Math.random().toString(36).substring(2)}`;return e.substr(0,t)}var Fo=10,Uo=500;function xs(t,e={}){let i=document.querySelector(t);return i?Promise.resolve(i):new Promise((s,r)=>{let n=0,o=null,a=e.interval||Uo,l=e.times||Fo;o=setInterval(function(){n++<l?(i=document.querySelector(t),i&&(clearInterval(o),s(i))):(clearInterval(o),r(`selector '${t}' not found`))},a)})}var Ts="data-dfd-id",Ai="data-dfd-display",Ci="data-dfd-mount-id",xi="wrapper",Ti="wrapper-source",$o=`insertion method should be one of ${["append","prepend","before","after","replace","replace-content"].join(" | ")}`,ks=class{constructor(e,i=Ze,s={}){this._type=null,this._insertionPoint=null,this._insertionMethod=null,this._screenType=null,this._theme=null,this._mount=e,this._displayMethod=null,this.setType(i,s)}__place__(){return P(this,arguments,function*(e={}){if(!(e.insertionPoint===this._insertionPoint&&e.insertionMethod===this._insertionMethod)){this._insertionPoint=e.insertionPoint||"body",this._insertionMethod=this.__resolveInsertionMethod__(e.insertionMethod);try{this.__placeMount__()}catch(i){console.warn("insertion point not found, falling back to body",i),this._insertionPoint="body",this._insertionMethod="append",this.__placeMount__()}}})}__resolveInsertionMethod__(e="append"){return this._insertionPoint==="body"&&!["append","prepend"].includes(e)?"append":e}__resolveInsertionPoint__(){return P(this,null,function*(){let e=yield xs(this._insertionPoint);return this._insertionMethod==="replace"?this.__wrapMount__(e):(this.__unwrapMount__(),e)})}__resolveInsertionPosition__(){switch(this._insertionMethod){case"before":return"beforebegin";case"replace":case"replace-content":case"prepend":return"afterbegin";case"append":return"beforeend";case"after":return"afterend";default:throw $o}}__placeMount__(){return P(this,null,function*(){let e=yield this.__resolveInsertionPoint__(),i=this.__resolveInsertionPosition__();this._insertionMethod==="replace-content"&&(e.innerHTML=""),e.insertAdjacentElement(i,this._mount)})}__getWrapperElement__(e){return document.querySelector(`[${Ai}="${e}"][${Ci}="${this._mount.id}"]`)}__ensureElementId__(e){return e.setAttribute("id",e.getAttribute("id")||`dfd-${_t(16)}`),e.getAttribute("id")}__wrapMount__(e){let i=this.__ensureElementId__(e),s=e.cloneNode(!1);return s.setAttribute(Ts,i),s.setAttribute(Ai,xi),s.setAttribute(Ci,this._mount.id),e.setAttribute(Ts,i),e.setAttribute(Ai,Ti),e.setAttribute(Ci,this._mount.id),e.insertAdjacentElement("beforebegin",s),this.__updateWrap__(),s}__unwrapMount__(){let e=this.__getWrapperElement__(xi),i=this.__getWrapperElement__(Ti);e&&(e.insertAdjacentElement("beforebegin",this._mount),e.remove(),i&&(i.setAttribute("id",i.dataset.dfdId),i.removeAttribute(Ts),i.removeAttribute(Ai),i.removeAttribute(Ci),i.removeAttribute("hidden")))}__updateWrap__(){let e=this.__getWrapperElement__(this.hidden?Ti:xi),i=this.__getWrapperElement__(this.hidden?xi:Ti);!e||!i||(e.setAttribute("id",e.dataset.dfdId),e.removeAttribute("hidden"),i.removeAttribute("id"),i.setAttribute("hidden",""))}get type(){return this._type}get method(){return this._displayMethod}get hidden(){return this._displayMethod.hidden()}get screenType(){return this._screenType}set screenType(e){this._mount.setAttribute("data-dfd-screen",e),this._screenType=e}show(){return P(this,null,function*(){yield this._displayMethod.show(),this.__updateWrap__()})}hide(){return P(this,null,function*(){yield this._displayMethod.hide(),this.__updateWrap__()})}setType(e,i={}){var s;if(e!==this._type)switch(this._type=e,(s=this._displayMethod)==null||s.destroy(),e){case Si:this._displayMethod=new As(this._mount,{align:i.align});break;case yi:this._displayMethod=new Cs(this._mount);break;case Ze:default:this._displayMethod=new et(this._mount)}this.__place__(i.placement)}updateTheme(e){if(e!==this._theme){let i=`dfd-${e}`,s=`dfd-${this._theme}`;e&&this._theme?this._mount.classList.replace(s,i):e?this._mount.classList.add(i):this._theme&&this._mount.classList.remove(s),this._theme=e}}updatePosition(e){var i;(i=this._displayMethod)==null||i.updatePosition(e)}destroy(){return P(this,null,function*(){var e;yield this.hide(),(e=this._displayMethod)==null||e.destroy(),this._displayMethod=null,this._mount=null,this._type=null,this._insertionPoint=null,this._insertionMethod=null,this._theme=null})}};var Ps=class{constructor(e){this.el=document.createComment(e),document.body.appendChild(this.el)}on(e,i){if(this._checkReady())return this.el.addEventListener(e,i,{passive:!0}),()=>this.off(e,i)}once(e,i){if(this._checkReady())return this.el.addEventListener(e,i,{once:!0,passive:!0}),()=>this.off(e,i)}off(e,i){this._checkReady()&&this.el.removeEventListener(e,i)}emit(e,i){if(this._checkReady()){let s=new CustomEvent(e,{detail:i,bubbles:!1,cancelable:!1,composed:!1});this.el.dispatchEvent(s)}}teardown(){this._checkReady()&&(this.el=this.el.remove())}_checkReady(){if(this.el)return!0;throw new Error("tried to access a dead event bus!")}};var Wr=function(t){let e=t.slice(0,4);return RegExp(`#${e}/(brand-categories|classic|classic-initial|embedded|fullscreen|fullscreen-brand-categories|fullscreen-initial|mobile|mobile-brand-categories|mobile-initial)/`)},zr=function(t){let e=t.slice(0,4);return RegExp(`#${e}/(category-pages|mobile-category-pages)/`)};var Rs="__DF_DEBUG_MODE__",Kr="true",ki=window.sessionStorage;function Gr(){ki.setItem(Rs,Kr)}function Yr(){ki.removeItem(Rs)}function Qr(){return ki.getItem(Rs)===Kr}function Ls(t){return ki.getItem(t)||window[t]}function D(...t){Qr()&&console.log("[doofinder]",...t)}"use strict";var Pi=window.history,Ri=class{constructor({installationId:e,autoload:i,urlHash:s}){this._installationId=e,this._autoload=i?Object.freeze(i):null,this._urlHash=s,this._initialState=null,this._currentState=null}getQueryParamValue(){return this._autoload?new URLSearchParams(window.location.search).get(this._autoload.param):null}get hasQueryParam(){return this.getQueryParamValue()!==null}get(e=!1){return this.__fromHash__()||this.__fromQuery__()||this.__fromURL__()||this.__fromCurrentState__(e)}static getQuery(e){if(e){let i=e.split("/"),s=i[i.length-1];return Object.fromEntries(new URLSearchParams(s)).q}return""}replace(e){D("[state] replace state:",e),e=this.absoluteURL(e),this._currentState=e,Pi.replaceState(e,"",this._urlHash?e:"")}save(e){D("[state] save state:",e),e=this.absoluteURL(e),this._currentState=e;let i=Pi.state;e!==i&&(this.valid(i)||(this._initialState=i),Pi.pushState(e,"",this._urlHash?e:""))}saveAbsoluteURL(){let e=this.absoluteURL("");D("[state] saveAbsoluteURL state",e),Pi.pushState(e,"",this._urlHash?e:"")}absoluteURL(e){return window.location.origin+window.location.pathname+e}valid(e){return typeof e=="string"&&(Wr(this._installationId).test(e)||e.startsWith(`#/${this._installationId}/`))}validEvent({state:e}){let i=this.valid(e);switch(!0){case(this._initialState===null&&!i):case this._initialState===e:case(this._initialState&&e&&this._initialState.toString()===e.toString()):return!1;default:return i}}__fromHash__(){let e=this.valid(window.location.hash)?`#${window.location.hash.split("#",2)[1]}`:null;return D("[state] __fromHash__ state:",e),e}__fromQuery__(){if(!this._autoload){D("[state] __fromQuery__ with autoload false - state:",null);return}let e=this.getQueryParamValue(),i=e!=null?`#/${this._autoload.screen}/q=${e.trim()}`:null;return D("[state] __fromQuery__ state:",i),i}__fromURL__(){if(!this._autoload){D("[state] __fromURL__ with autoload false - state:",null);return}let i=this._autoload.urls.find(s=>location.pathname.search(s)===0)?`#/${this._autoload.screen}/`:null;return D("[state] __fromURL__ state:",i),i}__fromCurrentState__(e){return e?(D("[state] __fromCurrentState__ with isTransient true - state:",this._currentState),this._currentState):(D("[state] __fromCurrentState__ with isTransient false - state:",null),null)}};"use strict";var Bo=window.history,Ht=class{constructor({installationId:e,urlHash:i}){this._installationId=e,this._urlHash=i,this._dataStore=new gt(`${this._installationId}.category_merchandising.state`,window.sessionStorage)}get(){return this.__currentState__()||this.getFromURLHash()}getBackState(){if(!this.__loadBackState__())return null;let e=this.__popBackState__();return D("[category pages state] getBackState state",e),e}getFromURLHash(){let e=window.location.hash;return this.__isStateValid__(e)?(e=e.split("#",2)[1],D("[category pages state] __fromHash__ ",e),e):null}save(e){this.update(e)}replace(e){this.update(e)}update(e){if(!this.__isStateValid__(e))return;D("[category pages state] update state ",e),this._dataStore.setItem("currentState",e);let i=this.absoluteURL(e);Bo.replaceState(i,"",this._urlHash?i:"")}saveCurrentAsBackState(){this._dataStore.setItem("backState",this.__currentState__())}__currentState__(){return this._dataStore.getItem("currentState")}__loadBackState__(){return this._dataStore.getItem("backState")||!1}__popBackState__(){let e=this._dataStore.getItem("backState");return this._dataStore.removeItem("backState"),D("[category pages state] __popBackState__ ",e),e}absoluteURL(e){return window.location.origin+window.location.pathname+e}__isStateValid__(e){return typeof e=="string"&&zr(this._installationId).test(e)}};var Is="df:trigger:click",Mt="df:trigger:focus",Nt="df:trigger:input",Ds="df:trigger:submit";var tt=1;"use strict";var Vo="[dfd-carousel-btn-left]",jo="[dfd-carousel-btn-right]",Zr="[dfd-carousel-content]",Li="ltr",en={mounted(){this.btnLeftEl=this.el.querySelector(Vo),this.btnRightEl=this.el.querySelector(jo),this.contentEl=this.el.querySelector(Zr),getComputedStyle(this.contentEl).direction==="rtl"&&(Li="rtl"),this.getVisibleChildren=()=>{let t=this.contentEl.getBoundingClientRect();return Array.from(this.contentEl.children).filter(e=>{let i=e.getBoundingClientRect();return t.left<=i.left&&t.right>=i.right})},this.nextPage=()=>{let t=this.getVisibleChildren();if(t.length<=0)return;let e=t.slice(-1).pop(),i=e.nextElementSibling;if(!i)return;let s=this.contentEl.getBoundingClientRect(),r=e.getBoundingClientRect(),n=i.getBoundingClientRect(),o=r.width,a=i?n.x-r.x-r.width:0,l;Li==="ltr"?l=this.contentEl.scrollLeft+(r.x-s.x):l=this.contentEl.scrollLeft-(r.x+s.x),this.contentEl.scroll({left:l+o+a/2,behavior:"smooth"})},this.previousPage=()=>{let t=this.getVisibleChildren();if(t.length<=0)return;let e=t[0],i=e.previousElementSibling;if(!i)return;let s=this.contentEl.getBoundingClientRect(),r=e.getBoundingClientRect(),n=i.getBoundingClientRect(),o=n.width-(s.x-n.x),a=i?r.x-n.x-n.width:0,l;Li==="ltr"?l=this.contentEl.scrollLeft-s.width:l=this.contentEl.scrollLeft+s.width,this.contentEl.scroll({left:l+o+a/2,behavior:"smooth"})},this.btnLeftEl.addEventListener("click",this.previousPage),this.btnRightEl.addEventListener("click",this.nextPage)},updated(){this.contentEl=this.el.querySelector(Zr),getComputedStyle(this.contentEl).direction==="rtl"&&(Li="rtl")},destroyed(){this.btnLeftEl.removeEventListener("click",this.previousPage),this.btnRightEl.removeEventListener("click",this.nextPage)}};var Ii=240;function Xo(t){return!!t.type.match(/image\/.*/)}function tn(t){return P(this,null,function*(){if(!Xo(t))throw"invalid image, can't search";let e=yield sn(t),i=yield Jo(e);return yield sn(i)})}function sn(t){return new Promise(function(e,i){let s=new FileReader;s.onload=function(){e(s.result)},s.onerror=function(){i(s.error)},s.readAsDataURL(t)})}function Jo(t){return new Promise(function(e,i){let s=new Image;s.onload=function(){let r=document.createElement("canvas");r.width=Ii,r.height=Ii,r.getContext("2d").drawImage(s,0,0,Ii,Ii),r.toBlob(function(n){e(n)},"image/jpeg")},s.onerror=function(r){i("resize image error")},s.src=t})}var rn={mounted(){this.search=t=>P(this,null,function*(){this.el.dataset.status="loading";let e=yield tn(t);this.pushEvent("search",{search:{image:e}})}),this.el.addEventListener("change",t=>this.search(t.target.files[0]))}};function Os(t){setTimeout(()=>{t.focus(),t.selectionStart=t.selectionEnd=t.value.length},0)}"use strict";var nn={mounted(){this.search=t=>{let e=this.el.dataset.dfdAction||"search";this.pushEvent(e,{search:{query:t}})},this.handleEvent("set-input-focus",()=>Os(this.el)),this.handleEvent("unset-input-focus",()=>{setTimeout(()=>{var t;(t=document.activeElement)==null||t.blur()},0)}),this.el.addEventListener("input",()=>this.search(this.el.value)),this.el.addEventListener("keydown",t=>{let e=this.el.getAttribute("dfd-value-suggestion");t.key==="Tab"&&e&&e!==this.el.value&&(this.el.value=e,Os(this.el),this.search(e))})}};"use strict";var on={mounted(){let t={add_to_cart:e=>()=>{let i=JSON.parse(e.dataset.item);if(this.el.querySelectorAll("[data-role=variant_selected][value='']").length>0){let s=this.el.querySelector("[data-role=variant_selected][value='']").dataset.variant,r=this.evaluate_filters(s);this.pushEvent("get-variants",{item:i,filters:r},()=>{this.execJS("[data-role=selector][data-variant="+s+"]","show")})}else this.el.dataset.quantity=="true"&&this.el.dataset.status=="initial"?(this.execJS(null,"set_attr",["data-status","quantity"]),this.execJS("[data-role=decrease_quantity]","hide"),this.execJS("[data-role=delete_quantity]","show"),this.execJS("[data-role=amount_selected]","set_attr",["value","1"])):(this.send(i),this.execJS(null,"set_attr",["data-status","initial"]),this.execJS("[data-role=amount_selected]","set_attr",["value",1]),this.el.querySelector("[data-role=select_variant].selected")&&this.execJS("[data-role=select_variant].selected","remove_class","selected"),this.el.querySelectorAll("[data-role=open_selector]").forEach(r=>{this.execJS("[data-role=open_selector][data-variant="+r.dataset.variant+"] input","set_attr",["value",r.dataset.variant])}),this.el.querySelectorAll("[data-role=open_selector]").forEach(r=>{this.execJS("[data-role=variant_selected][data-variant="+r.dataset.variant+"]","remove_attr","data-index"),this.execJS("[data-role=variant_selected][data-variant="+r.dataset.variant+"]","set_attr",["value",""])}))},increase_quantity:e=>()=>{let i=this.el.querySelector("[data-role=amount_selected]"),s=parseInt(i.value)+1;this.update_quantity(i,s)},decrease_quantity:e=>()=>{let i=this.el.querySelector("[data-role=amount_selected]"),s=parseInt(i.value)-1;this.update_quantity(i,s)},delete_quantity:e=>()=>{this.execJS(null,"set_attr",["data-status","initial"])},open_selector:e=>()=>{if(!e.dataset.item){this.execJS("[data-role=selector][data-variant="+e.dataset.variant+"]","show");return}let i=this.evaluate_filters(e.dataset.variant),s=JSON.parse(e.dataset.item);this.pushEvent("get-variants",{item:s,filters:i},()=>{this.execJS("[data-role=selector][data-variant="+e.dataset.variant+"]","show")})},select_variant:e=>()=>{let i=e.closest("[data-role=selector]").dataset.variant;this.el.querySelector("[data-role=select_variant].selected")&&this.execJS("[data-role=select_variant].selected","remove_class","selected"),this.execJS("[data-role=selector][data-variant="+i+"]","hide"),this.execJS("[data-role=selector][data-variant="+i+"] [data-id='"+e.dataset.id+"']","add_class","selected"),this.execJS("[data-role=open_selector][data-variant="+i+"] input","set_attr",["value",e.dataset.val]),this.execJS("[data-role=variant_selected][data-variant="+i+"]","set_attr",["value",e.dataset.val]),this.restore_filters(i),this.execJS(null,"set_attr",["data-status","initial"])},close_selector:e=>()=>{let i=e.closest("[data-role=selector]").dataset.variant;this.execJS("[data-role=selector][data-variant="+i+"]","hide"),this.execJS(null,"set_attr",["data-status","initial"])},send:e=>()=>{let i=Array.from(this.el.querySelectorAll("[data-role=variant_selected]")).map(n=>n.value),s=this.el.querySelector("[data-role=amount_selected]").value,r=JSON.parse(e.dataset.item);s&&!i.includes("")?this.send(r):alert("Falta alg\xFAn dato")}};this.el.addEventListener("click",e=>{if(e.target.closest("[data-role]")){let i=Object.keys(t).find(s=>e.target.closest("[data-role]").dataset.role.match(s));i&&t[i](e.target.closest("[data-role]"))()}}),this.el.addEventListener("input",e=>{let i=e.target.closest("[data-role=amount_selected]");i&&i.value!=""&&this.update_quantity(i,parseInt(i.value))}),this.execJS=(e,i,s)=>{let r=this.el.querySelector(e);e==null&&(r=this.el),r!=null&&(i=="set_attr"?this.liveSocket.execJS(r,'[["'+i+'",{"to": null, "attr":["'+s[0]+'","'+s[1]+'"]}]]'):i=="remove_class"||i=="add_class"?this.liveSocket.execJS(r,'[["'+i+'",{"to": null, "time":200,"names":["'+s+'"],"transition":[[],[],[]]}]]'):this.liveSocket.execJS(r,'[["'+i+'",{"to": null}]]'))},this.update_quantity=(e,i)=>{this.execJS("[data-role=amount_selected]","set_attr",["value",parseInt(i)]),e.value=i,this.evaluate_quantity(i)},this.evaluate_quantity=e=>{e<=1?(this.execJS("[data-role=decrease_quantity]","hide"),this.execJS("[data-role=delete_quantity]","show"),this.execJS("[data-role=increase_quantity]","show")):(this.execJS("[data-role=decrease_quantity]","show"),this.execJS("[data-role=delete_quantity]","hide"),this.execJS("[data-role=increase_quantity]","show"))},this.evaluate_filters=e=>{let i=this.el.querySelector("[data-role=variant_selected][data-variant="+e+"]").dataset.index;return Array.from(this.el.querySelectorAll("[data-role=variant_selected][data-index]")).filter(s=>i==null||parseInt(s.dataset.index)<parseInt(i)).map(s=>({key:s.dataset.variant,value:s.value}))},this.restore_filters=e=>{let i=this.el.querySelector("[data-role=variant_selected][data-variant="+e+"]").dataset.index,s=this.el.querySelectorAll("[data-role=variant_selected][data-index]").length;i===void 0&&this.execJS("[data-role=variant_selected][data-variant="+e+"]","set_attr",["data-index",s+1]);for(let r=parseInt(i)+1;r<=s;r++){let n=this.el.querySelector("[data-role=variant_selected][data-index='"+r+"']").dataset.variant;this.execJS("[data-role=variant_selected][data-variant="+n+"]","set_attr",["value",""]),this.execJS("[data-role=variant_selected][data-variant="+n+"]","remove_attr","data-index"),this.execJS("[data-role=open_selector][data-variant="+n+"] input","set_attr",["value",n])}},this.send=e=>{let i=Array.from(this.el.querySelectorAll("[data-role=variant_selected][data-index]")).map(r=>({key:r.dataset.variant,value:r.value})),s=this.el.querySelector("[data-role=amount_selected]").value;this.start_add_to_cart(),this.pushEvent("add-to-cart-beta",{item:e,amount:s,filters:i},r=>{r.statusPromise=new De({resolveTimeout:3e3,rejectTimeout:5e3}),r.statusPromise.then(this.finish_add_to_cart,this.finish_add_to_cart),document.dispatchEvent(new CustomEvent("doofinder.cart.add",{detail:r}))})},this.start_add_to_cart=()=>{this.execJS(".dfd-cart-check-button[data-role=add_to_cart]","add_class","dfd-btn-loading"),this.execJS(".dfd-cart-add-button [data-role=add_to_cart]","add_class","dfd-btn-loading")},this.finish_add_to_cart=e=>{this.execJS(".dfd-cart-check-button[data-role=add_to_cart]","remove_class","dfd-btn-loading"),this.execJS(".dfd-cart-add-button [data-role=add_to_cart]","remove_class","dfd-btn-loading"),this.execJS(".dfd-cart-check-button[data-role=add_to_cart]","add_class","dfd-btn-done"),this.execJS(".dfd-cart-add-button [data-role=add_to_cart]","add_class","dfd-btn-done"),setTimeout(()=>{this.execJS(".dfd-cart-check-button[data-role=add_to_cart]","remove_class","dfd-btn-done"),this.execJS(".dfd-cart-add-button [data-role=add_to_cart]","remove_class","dfd-btn-done")},500),typeof e=="function"&&e()}}};function it(t){return`${U}:${t}`}"use strict";var Di="doofinder.cart.add.click",qo="doofinder.cart.add",Oi="doofinder.cart.hide.price",Hi="doofinder.cart.display.price",Hs="dfd-btn-loading",an="dfd-btn-done",ln="dfd-btn-error";function hn(t){t.addToCartResolveTimeout=3e3,t.addToCartRejectTimeout=5e3,t.addToCartButtonFeedback=function(i,s){let r=Wo.bind(null,i,s),n=Go.bind(null,i,i.innerHTML),o=zo.bind(null,i,n),a=Ko.bind(null,i,n);r().then(o,a)},t.handleCartAddClick=i=>{let s=i.detail.target?document.getElementById(i.detail.target.id):i.target,r=new De({resolveTimeout:t.addToCartResolveTimeout,rejectTimeout:t.addToCartRejectTimeout});r.then(n=>{t.pushEvent("add-to-cart",{item:i.detail.item,dfid:i.detail.dfid},()=>{typeof n=="function"&&n()}),t.pushEvent("close-add-to-cart-button",{item:i.detail.item,dfid:i.detail.dfid})},n=>{typeof n=="function"&&n(),t.pushEvent("close-add-to-cart-button",{item:i.detail.item,dfid:i.detail.dfid})}),setTimeout(()=>t.tag.dispatch(qo,Te(M({},i.detail.item),{statusPromise:r})),1e3),t.addToCartButtonFeedback&&t.addToCartButtonFeedback(s,r)},t.handleHidePrice=i=>{let s=i.detail.target?document.getElementById(i.detail.target.id):i.target;s.closest(".dfd-card-row").querySelector(".dfd-card-pricing").style.display="none"},t.handleDisplayPrice=i=>{let s=i.detail.target?document.getElementById(i.detail.target.id):i.target;s.closest(".dfd-card-row").querySelector(".dfd-card-pricing").style.display="flex"};let e=!!t.tag&&!!t.tag.dom?t.tag.dom.mount:t.tag.mount;e.addEventListener(Di,t.handleCartAddClick),e.addEventListener(it(Di),t.handleCartAddClick),e.addEventListener(Oi,t.handleHidePrice),e.addEventListener(it(Oi),t.handleHidePrice),e.addEventListener(Hi,t.handleDisplayPrice),e.addEventListener(it(Hi),t.handleDisplayPrice)}function cn(t){let e=!!t.tag&&!!t.tag.dom?t.tag.dom.mount:t.tag.mount;e.removeEventListener(Di,t.handleCartAddClick),e.removeEventListener(it(Di),t.handleCartAddClick),e.removeEventListener(Oi,t.handleHidePrice),e.removeEventListener(it(Oi),t.handleHidePrice),e.removeEventListener(Hi,t.handleDisplayPrice),e.removeEventListener(it(Hi),t.handleDisplayPrice)}function Wo(t,e){return t.setAttribute("disabled",""),t.setAttribute("dfd-update","ignore"),t.innerHTML="",t.classList.add(Hs),e}function zo(t,e){t.classList.remove(Hs),t.classList.add(an),setTimeout(e,1e3)}function Ko(t,e){t.classList.remove(Hs),t.classList.add(ln),setTimeout(e,2e3)}function Go(t,e){t.classList.remove(an),t.classList.remove(ln),t.innerHTML=e,t.removeAttribute("dfd-update"),t.removeAttribute("disabled")}"use strict";var dn={mounted(){this.close=()=>this.pushEvent("close-layer"),this.handleEvent("history-go",({n:t})=>{history.go(t)}),this.handleEvent("close",()=>{let t=this.tag.searchQueryRetention?this.tag.state.get():"";this.tag.updateQuery(t),this.tag.disconnect()}),this.handleEvent("save-state",({state:t})=>{this.tag.state.save(t)}),this.handleEvent("replace-state",({state:t})=>{this.tag.state.replace(t)}),this.handleEvent("disconnect",t=>{t.errors.forEach(e=>console.error("[Doofinder] error:",e)),this.tag.destroy()}),this.handleEvent("load",t=>{this.tag.onLoad(t),this.tag.dispatch("doofinder.layer.load",{display_type:t.display_type}),this.pushEvent("ready")}),this.handleEvent("click-suggestion",t=>P(this,null,function*(){var e;this.tag.trigger.updateQuery((e=t==null?void 0:t.search)==null?void 0:e.query)})),this.handleEvent("search",t=>{this.tag.dispatch("doofinder.layer.search",t)}),this.handleEvent("update-latest-searches",({entries:t})=>{this.tag.updateLatestSearches(t)}),this.el.addEventListener("contextmenu",t=>{let e=t.target.closest('[dfd-click="item-click"]');if(e){let i=e.getAttribute("dfd-value-link"),s=e.getAttribute("dfd-value-dfid");this.pushEvent("item-click",{link:i,dfid:s},()=>{this.debug(`item-click sent for ${s} to ${i}`)})}}),this.el.addEventListener("error",({target:t})=>{if(t.tagName!=="IMG")return;let e=t.closest('[data-dfd-role="card-thumbnail"]');setTimeout(()=>{e==null||e.parentElement.setAttribute("dfd-update","ignore"),e==null||e.classList.add("dfd-card-thumbnail-404")},1)},!0),this.applyOperationBySelector=function(t,e){if(t.startsWith("#")){let i=getElementById(t);e(i)}else this.el.querySelectorAll(t).forEach(i=>{e(i)})},this.handleEvent("dom:add-class",({target:t,newClass:e})=>{this.applyOperationBySelector(t.selector,i=>i==null?void 0:i.classList.add(e))}),this.handleEvent("dom:remove-class",({target:t,oldClass:e})=>{this.applyOperationBySelector(t.selector,i=>i==null?void 0:i.classList.remove(e))}),this.handleEvent("dom:add-attribute",({target:t,name:e,value:i})=>{this.applyOperationBySelector(t.selector,s=>s==null?void 0:s.setAttribute(e,i))}),this.handleEvent("dom:remove-attribute",({target:t,name:e})=>{this.applyOperationBySelector(t.selector,i=>i==null?void 0:i.removeAttribute(e))}),this.handleEvent("redirection:update",({redirection:t})=>{this.tag.trigger.redirection=t}),hn(this)},destroyed(){cn(this)}};var un=Object.freeze({Linear:function(t){return t},EaseInQuad:function(t){return t*t},EaseOutQuad:function(t){return t*(2-t)},EaseInOutQuad:function(t){return t<.5?2*t*t:-1+(4-2*t)*t},EaseInCubic:function(t){return t*t*t},EaseOutCubic:function(t){return--t*t*t+1},EaseInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},EaseInQuart:function(t){return t*t*t*t},EaseOutQuart:function(t){return 1- --t*t*t*t},EaseInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},EaseInQuint:function(t){return t*t*t*t*t},EaseOutQuint:function(t){return 1+--t*t*t*t*t},EaseInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}});function fn(t,e,i,s,r=un.EaseInQuint){let n=Date.now(),o=e[t];return new Promise((a,l)=>{function c(){let p=Date.now(),m=Math.min(1,(p-n)/s),v=r(m);e[t]=o+v*(i-o),m<1?requestAnimationFrame(c):a()}o===i?a():requestAnimationFrame(c)})}var pn=fn.bind(null,"scrollTop"),xc=fn.bind(null,"scrollLeft");function Yo(t){let e=t.scrollHeight>t.clientHeight,s=window.getComputedStyle(t).overflowY.indexOf("hidden")!==-1;return e&&!s}function Mi(t){return!t||t===document.documentElement?document.documentElement:Yo(t)?t:Mi(t.parentNode)}function mn(t,e){return typeof t!="undefined"?t:e}var Ft=class{constructor(e,i,s={}){let{threshold:r}=s;this.handleIntersection=this.handleIntersection.bind(this),this._callback=i,this._io=new IntersectionObserver(this.handleIntersection,{root:e,threshold:mn(r,0)})}observe(e){this._io.disconnect(),e&&this._io.observe(e),D("[ScrollObserver][observe]",e)}unobserve(){this._io.disconnect(),D("[ScrollObserver][unobserve]")}handleIntersection([e]){D("[ScrollObserver][intersection detected] target:",e.target),this._callback(e)}};var gn='[data-dfd-role~="scroll-sentinel"]',_n='[data-dfd-role~="scroll-top-sentinel"]',Qo="div.dfd-card";function Ut(t,e,i){i?t.scrollTop=e:pn(t,e,250)}function Zo(t){var s,r;let e=((s=document.querySelector(Qo))==null?void 0:s.offsetHeight)||0,i=((r=document.querySelector(gn))==null?void 0:r.offsetHeight)||0;return t.scrollHeight-i-e*2.6}var vn={mounted(){this.sentinel=()=>this.el.querySelector(gn),this.scrollTopSentinel=()=>this.el.querySelector(_n),this.scrollTarget=()=>this.el.dataset.dfdScrollTarget,this.refreshObservers=()=>{this.scrollObserver.observe(this.sentinel()),this.scrollTopObserver.observe(this.scrollTopSentinel())},this.changeBackToTopVisibility=t=>{this.pushEvent("change-back-to-top-visibility",{visible:t})},this.scrollObserver=new Ft(this.el,({target:t,isIntersecting:e})=>{if(!e)return;let i={index:t.dataset.index};this.debug('[push] "load-more", params:',i),this.pushEvent("load-more",i)}),this.scrollTopObserver=new Ft(this.el,({isIntersecting:t})=>{this.changeBackToTopVisibility(!t)}),this.handleEvent("search",t=>{this.debug('[handle] "search", params:',t);let{index:e,page:i}=t,s=this.sentinel();i===1&&e===(s==null?void 0:s.dataset.index)&&(this.changeBackToTopVisibility(!1),Ut(this.el,0,!0)),this.refreshObservers()}),this.handleEvent("back-to-top",({id:t,fast:e})=>{this.debug(`[handle] "back-to-top", id: ${t}, fast: ${e}`),this.scrollTarget()==="window"?window.scrollTo(0,0):(!t||t===this.el.id)&&Ut(this.el,0,!!e)}),this.handleEvent("change-current-index",()=>{this.scrollObserver.observe(this.sentinel()),this.scrollTopObserver.observe(this.scrollTopSentinel()),Ut(this.el,0,!0)}),this.scrollObserver.observe(this.sentinel()),this.scrollTopObserver.observe(this.scrollTopSentinel())},destroyed(){this.scrollObserver.unobserve(),this.scrollObserver=null,this.scrollTopObserver.unobserve(),this.scrollTopObserver=null}},Ms={mounted(){this.hideVirtualKeyboard=wi(()=>{let t=document.querySelector("input:focus");t?(this.debug("[hideVirtualKeyboard][blur] input:",t),t.blur()):this.debug("[hideVirtualKeyboard][noop]")},100),this.debug("[observe][touchstart] hideVirtualKeyboard()"),this.el.addEventListener("touchstart",this.hideVirtualKeyboard)},destroyed(){this.debug("[unobserve][touchstart] hideVirtualKeyboard()"),this.el.removeEventListener("touchstart",this.hideVirtualKeyboard)}},Ns={mounted(){this.scrollTarget=()=>this.el.dataset.dfdScrollTarget,this.scrollTopSentinel=()=>this.el.querySelector(_n),this.transientTargetCard=()=>this.el.querySelector(`[dfd-value-dfid="${this.tag.popTargetItemId()}"]`),this.changeBackToTopVisibility=t=>{this.pushEvent("change-back-to-top-visibility",{visible:t})},this.scrollTopObserver=new Ft(null,({isIntersecting:t})=>{this.changeBackToTopVisibility(!t)}),this.scrollTopObserver.observe(this.scrollTopSentinel()),this.handleEvent("update-scroll",t=>{setTimeout((()=>{let e=this.transientTargetCard();this.debug('[handle] "update-scroll"',"params:",t,"card:",e),e!=null?e.scrollIntoView({block:"center"}):t.scroll_end&&Ut(Mi(this.el),Zo(this.el),!1)}).bind(this),1e3)}),this.handleEvent("back-to-top",({id:t,fast:e})=>{this.debug(`[handle] "back-to-top", id: ${t}, fast: ${e}`),this.scrollTarget()==="window"?window.scrollTo(0,0):(!t||t===this.el.id)&&Ut(Mi(this.el),0,e)}),this.pushEvent("update-scroll")}};function Ni(t,e,i,s){return new Intl.NumberFormat(t,{style:"currency",maximumFractionDigits:parseInt(i,10),numberingSystem:s,currency:e})}function Fi(t,e,i){return new Intl.NumberFormat(t,{maximumFractionDigits:parseInt(e,10),numberingSystem:i})}var Fs=class{constructor(e,i,s,r,n){this.template=e,this.symbol=i,this.thousand=s,this.decimal=r,this.precision=n}format(e){let i=e<0,s=Math.pow(10,this.precision),r=(Math.round(e*s)/s).toFixed(this.precision),n=`${parseInt(Math.abs(r||0).toFixed(this.precision),10)}`,o=n.length>3?n.length%3:0,a=r.split(".")[1],l=[];return o>0&&l.push(`${n.substring(0,o)}${this.thousand}`),l.push(n.substring(o).replace(/(\d{3})(?=\d)/g,"$1"+this.thousand)),this.precision>0&&parseInt(a,10)>0&&l.push(`${this.decimal}${a}`),l=this.template.replace(/%s/g,this.symbol).replace(/%v/g,l.join("")),i&&(l=`-${l}`),l}};"use strict";var Ve;(function(t){t.Range="range",t.Steps="steps",t.Positions="positions",t.Count="count",t.Values="values"})(Ve||(Ve={}));var he;(function(t){t[t.None=-1]="None",t[t.NoValue=0]="NoValue",t[t.LargeValue=1]="LargeValue",t[t.SmallValue=2]="SmallValue"})(he||(he={}));function ea(t){return Ui(t)&&typeof t.from=="function"}function Ui(t){return typeof t=="object"&&typeof t.to=="function"}function bn(t){t.parentElement.removeChild(t)}function Us(t){return t!=null}function Sn(t){t.preventDefault()}function ta(t){return t.filter(function(e){return this[e]?!1:this[e]=!0},{})}function ia(t,e){return Math.round(t/e)*e}function sa(t,e){var i=t.getBoundingClientRect(),s=t.ownerDocument,r=s.documentElement,n=wn(s);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(n.x=0),e?i.top+n.y-r.clientTop:i.left+n.x-r.clientLeft}function Ce(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function yn(t,e,i){i>0&&(le(t,e),setTimeout(function(){Bi(t,e)},i))}function En(t){return Math.max(Math.min(t,100),0)}function $i(t){return Array.isArray(t)?t:[t]}function ra(t){t=String(t);var e=t.split(".");return e.length>1?e[1].length:0}function le(t,e){t.classList&&!/\s/.test(e)?t.classList.add(e):t.className+=" "+e}function Bi(t,e){t.classList&&!/\s/.test(e)?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function na(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)}function wn(t){var e=window.pageXOffset!==void 0,i=(t.compatMode||"")==="CSS1Compat",s=e?window.pageXOffset:i?t.documentElement.scrollLeft:t.body.scrollLeft,r=e?window.pageYOffset:i?t.documentElement.scrollTop:t.body.scrollTop;return{x:s,y:r}}function oa(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function aa(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(i){}return t}function la(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function $s(t,e){return 100/(e-t)}function Bs(t,e,i){return e*100/(t[i+1]-t[i])}function ha(t,e){return Bs(t,t[0]<0?e+Math.abs(t[0]):e-t[0],0)}function ca(t,e){return e*(t[1]-t[0])/100+t[0]}function $t(t,e){for(var i=1;t>=e[i];)i+=1;return i}function da(t,e,i){if(i>=t.slice(-1)[0])return 100;var s=$t(i,t),r=t[s-1],n=t[s],o=e[s-1],a=e[s];return o+ha([r,n],i)/$s(o,a)}function ua(t,e,i){if(i>=100)return t.slice(-1)[0];var s=$t(i,e),r=t[s-1],n=t[s],o=e[s-1],a=e[s];return ca([r,n],(i-o)*$s(o,a))}function fa(t,e,i,s){if(s===100)return s;var r=$t(s,t),n=t[r-1],o=t[r];return i?s-n>(o-n)/2?o:n:e[r-1]?t[r-1]+ia(s-t[r-1],e[r-1]):s}var An=function(){function t(e,i,s){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[s||!1],this.xNumSteps=[!1],this.snap=i;var r,n=[];for(Object.keys(e).forEach(function(o){n.push([$i(e[o]),o])}),n.sort(function(o,a){return o[0][0]-a[0][0]}),r=0;r<n.length;r++)this.handleEntryPoint(n[r][1],n[r][0]);for(this.xNumSteps=this.xSteps.slice(0),r=0;r<this.xNumSteps.length;r++)this.handleStepPoint(r,this.xNumSteps[r])}return t.prototype.getDistance=function(e){for(var i=[],s=0;s<this.xNumSteps.length-1;s++)i[s]=Bs(this.xVal,e,s);return i},t.prototype.getAbsoluteDistance=function(e,i,s){var r=0;if(e<this.xPct[this.xPct.length-1])for(;e>this.xPct[r+1];)r++;else e===this.xPct[this.xPct.length-1]&&(r=this.xPct.length-2);!s&&e===this.xPct[r+1]&&r++,i===null&&(i=[]);var n,o=1,a=i[r],l=0,c=0,p=0,m=0;for(s?n=(e-this.xPct[r])/(this.xPct[r+1]-this.xPct[r]):n=(this.xPct[r+1]-e)/(this.xPct[r+1]-this.xPct[r]);a>0;)l=this.xPct[r+1+m]-this.xPct[r+m],i[r+m]*o+100-n*100>100?(c=l*n,o=(a-100*n)/i[r+m],n=1):(c=i[r+m]*l/100*o,o=0),s?(p=p-c,this.xPct.length+m>=1&&m--):(p=p+c,this.xPct.length-m>=1&&m++),a=i[r+m]*o;return e+p},t.prototype.toStepping=function(e){return e=da(this.xVal,this.xPct,e),e},t.prototype.fromStepping=function(e){return ua(this.xVal,this.xPct,e)},t.prototype.getStep=function(e){return e=fa(this.xPct,this.xSteps,this.snap,e),e},t.prototype.getDefaultStep=function(e,i,s){var r=$t(e,this.xPct);return(e===100||i&&e===this.xPct[r-1])&&(r=Math.max(r-1,1)),(this.xVal[r]-this.xVal[r-1])/s},t.prototype.getNearbySteps=function(e){var i=$t(e,this.xPct);return{stepBefore:{startValue:this.xVal[i-2],step:this.xNumSteps[i-2],highestStep:this.xHighestCompleteStep[i-2]},thisStep:{startValue:this.xVal[i-1],step:this.xNumSteps[i-1],highestStep:this.xHighestCompleteStep[i-1]},stepAfter:{startValue:this.xVal[i],step:this.xNumSteps[i],highestStep:this.xHighestCompleteStep[i]}}},t.prototype.countStepDecimals=function(){var e=this.xNumSteps.map(ra);return Math.max.apply(null,e)},t.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},t.prototype.convert=function(e){return this.getStep(this.toStepping(e))},t.prototype.handleEntryPoint=function(e,i){var s;if(e==="min"?s=0:e==="max"?s=100:s=parseFloat(e),!Ce(s)||!Ce(i[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(s),this.xVal.push(i[0]);var r=Number(i[1]);s?this.xSteps.push(isNaN(r)?!1:r):isNaN(r)||(this.xSteps[0]=r),this.xHighestCompleteStep.push(0)},t.prototype.handleStepPoint=function(e,i){if(!!i){if(this.xVal[e]===this.xVal[e+1]){this.xSteps[e]=this.xHighestCompleteStep[e]=this.xVal[e];return}this.xSteps[e]=Bs([this.xVal[e],this.xVal[e+1]],i,0)/$s(this.xPct[e],this.xPct[e+1]);var s=(this.xVal[e+1]-this.xVal[e])/this.xNumSteps[e],r=Math.ceil(Number(s.toFixed(3))-1),n=this.xVal[e]+this.xNumSteps[e]*r;this.xHighestCompleteStep[e]=n}},t}(),Cn={to:function(t){return t===void 0?"":t.toFixed(2)},from:Number},xn={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},je={tooltips:".__tooltips",aria:".__aria"};function pa(t,e){if(!Ce(e))throw new Error("noUiSlider: 'step' is not numeric.");t.singleStep=e}function ma(t,e){if(!Ce(e))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");t.keyboardPageMultiplier=e}function ga(t,e){if(!Ce(e))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");t.keyboardMultiplier=e}function _a(t,e){if(!Ce(e))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");t.keyboardDefaultStep=e}function va(t,e){if(typeof e!="object"||Array.isArray(e))throw new Error("noUiSlider: 'range' is not an object.");if(e.min===void 0||e.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.spectrum=new An(e,t.snap||!1,t.singleStep)}function ba(t,e){if(e=$i(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider: 'start' option is incorrect.");t.handles=e.length,t.start=e}function Sa(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");t.snap=e}function ya(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");t.animate=e}function Ea(t,e){if(typeof e!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");t.animationDuration=e}function wa(t,e){var i=[!1],s;if(e==="lower"?e=[!0,!1]:e==="upper"&&(e=[!1,!0]),e===!0||e===!1){for(s=1;s<t.handles;s++)i.push(e);i.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");i=e}t.connect=i}function Aa(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function Tn(t,e){if(!Ce(e))throw new Error("noUiSlider: 'margin' option must be numeric.");e!==0&&(t.margin=t.spectrum.getDistance(e))}function Ca(t,e){if(!Ce(e))throw new Error("noUiSlider: 'limit' option must be numeric.");if(t.limit=t.spectrum.getDistance(e),!t.limit||t.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function xa(t,e){var i;if(!Ce(e)&&!Array.isArray(e))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(e)&&!(e.length===2||Ce(e[0])||Ce(e[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(e!==0){for(Array.isArray(e)||(e=[e,e]),t.padding=[t.spectrum.getDistance(e[0]),t.spectrum.getDistance(e[1])],i=0;i<t.spectrum.xNumSteps.length-1;i++)if(t.padding[0][i]<0||t.padding[1][i]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var s=e[0]+e[1],r=t.spectrum.xVal[0],n=t.spectrum.xVal[t.spectrum.xVal.length-1];if(s/(n-r)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function Ta(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function ka(t,e){if(typeof e!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var i=e.indexOf("tap")>=0,s=e.indexOf("drag")>=0,r=e.indexOf("fixed")>=0,n=e.indexOf("snap")>=0,o=e.indexOf("hover")>=0,a=e.indexOf("unconstrained")>=0,l=e.indexOf("drag-all")>=0,c=e.indexOf("smooth-steps")>=0;if(r){if(t.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");Tn(t,t.start[1]-t.start[0])}if(a&&(t.margin||t.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");t.events={tap:i||n,drag:s,dragAll:l,smoothSteps:c,fixed:r,snap:n,hover:o,unconstrained:a}}function Pa(t,e){if(e!==!1)if(e===!0||Ui(e)){t.tooltips=[];for(var i=0;i<t.handles;i++)t.tooltips.push(e)}else{if(e=$i(e),e.length!==t.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");e.forEach(function(s){if(typeof s!="boolean"&&!Ui(s))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),t.tooltips=e}}function Ra(t,e){if(e.length!==t.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");t.handleAttributes=e}function La(t,e){if(!Ui(e))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");t.ariaFormat=e}function Ia(t,e){if(!ea(e))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");t.format=e}function Da(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");t.keyboardSupport=e}function Oa(t,e){t.documentElement=e}function Ha(t,e){if(typeof e!="string"&&e!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function Ma(t,e){if(typeof e!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof t.cssPrefix=="string"?(t.cssClasses={},Object.keys(e).forEach(function(i){t.cssClasses[i]=t.cssPrefix+e[i]})):t.cssClasses=e}function kn(t){var e={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:Cn,format:Cn},i={step:{r:!1,t:pa},keyboardPageMultiplier:{r:!1,t:ma},keyboardMultiplier:{r:!1,t:ga},keyboardDefaultStep:{r:!1,t:_a},start:{r:!0,t:ba},connect:{r:!0,t:wa},direction:{r:!0,t:Ta},snap:{r:!1,t:Sa},animate:{r:!1,t:ya},animationDuration:{r:!1,t:Ea},range:{r:!0,t:va},orientation:{r:!1,t:Aa},margin:{r:!1,t:Tn},limit:{r:!1,t:Ca},padding:{r:!1,t:xa},behaviour:{r:!0,t:ka},ariaFormat:{r:!1,t:La},format:{r:!1,t:Ia},tooltips:{r:!1,t:Pa},keyboardSupport:{r:!0,t:Da},documentElement:{r:!1,t:Oa},cssPrefix:{r:!0,t:Ha},cssClasses:{r:!0,t:Ma},handleAttributes:{r:!1,t:Ra}},s={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:xn,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};t.format&&!t.ariaFormat&&(t.ariaFormat=t.format),Object.keys(i).forEach(function(l){if(!Us(t[l])&&s[l]===void 0){if(i[l].r)throw new Error("noUiSlider: '"+l+"' is required.");return}i[l].t(e,Us(t[l])?t[l]:s[l])}),e.pips=t.pips;var r=document.createElement("div"),n=r.style.msTransform!==void 0,o=r.style.transform!==void 0;e.transformRule=o?"transform":n?"msTransform":"webkitTransform";var a=[["left","top"],["right","bottom"]];return e.style=a[e.dir][e.ort],e}function Na(t,e,i){var s=oa(),r=la(),n=r&&aa(),o=t,a,l,c,p,m,v=e.spectrum,E=[],b=[],A=[],N=0,I={},L=t.ownerDocument,B=e.documentElement||L.documentElement,q=L.body,Z=L.dir==="rtl"||e.ort===1?0:100;function W(h,d){var u=L.createElement("div");return d&&le(u,d),h.appendChild(u),u}function V(h,d){var u=W(h,e.cssClasses.origin),_=W(u,e.cssClasses.handle);if(W(_,e.cssClasses.touchArea),_.setAttribute("data-handle",String(d)),e.keyboardSupport&&(_.setAttribute("tabindex","0"),_.addEventListener("keydown",function(S){return Yn(S,d)})),e.handleAttributes!==void 0){var y=e.handleAttributes[d];Object.keys(y).forEach(function(S){_.setAttribute(S,y[S])})}return _.setAttribute("role","slider"),_.setAttribute("aria-orientation",e.ort?"vertical":"horizontal"),d===0?le(_,e.cssClasses.handleLower):d===e.handles-1&&le(_,e.cssClasses.handleUpper),u.handle=_,u}function _e(h,d){return d?W(h,e.cssClasses.connect):!1}function g(h,d){var u=W(d,e.cssClasses.connects);l=[],c=[],c.push(_e(u,h[0]));for(var _=0;_<e.handles;_++)l.push(V(d,_)),A[_]=_,c.push(_e(u,h[_+1]))}function k(h){le(h,e.cssClasses.target),e.dir===0?le(h,e.cssClasses.ltr):le(h,e.cssClasses.rtl),e.ort===0?le(h,e.cssClasses.horizontal):le(h,e.cssClasses.vertical);var d=getComputedStyle(h).direction;return d==="rtl"?le(h,e.cssClasses.textDirectionRtl):le(h,e.cssClasses.textDirectionLtr),W(h,e.cssClasses.base)}function O(h,d){return!e.tooltips||!e.tooltips[d]?!1:W(h.firstChild,e.cssClasses.tooltip)}function Y(){return o.hasAttribute("disabled")}function de(h){var d=l[h];return d.hasAttribute("disabled")}function vt(h){h!=null?(l[h].setAttribute("disabled",""),l[h].handle.removeAttribute("tabindex")):(o.setAttribute("disabled",""),l.forEach(function(d){d.handle.removeAttribute("tabindex")}))}function Ji(h){h!=null?(l[h].removeAttribute("disabled"),l[h].handle.setAttribute("tabindex","0")):(o.removeAttribute("disabled"),l.forEach(function(d){d.removeAttribute("disabled"),d.handle.setAttribute("tabindex","0")}))}function Xe(){m&&(St("update"+je.tooltips),m.forEach(function(h){h&&bn(h)}),m=null)}function T(){Xe(),m=l.map(O),zi("update"+je.tooltips,function(h,d,u){if(!(!m||!e.tooltips)&&m[d]!==!1){var _=h[d];e.tooltips[d]!==!0&&(_=e.tooltips[d].to(u[d])),m[d].innerHTML=_}})}function x(){St("update"+je.aria),zi("update"+je.aria,function(h,d,u,_,y){A.forEach(function(S){var C=l[S],w=Xt(b,S,0,!0,!0,!0),j=Xt(b,S,100,!0,!0,!0),F=y[S],z=String(e.ariaFormat.to(u[S]));w=v.fromStepping(w).toFixed(1),j=v.fromStepping(j).toFixed(1),F=v.fromStepping(F).toFixed(1),C.children[0].setAttribute("aria-valuemin",w),C.children[0].setAttribute("aria-valuemax",j),C.children[0].setAttribute("aria-valuenow",F),C.children[0].setAttribute("aria-valuetext",z)})})}function J(h){if(h.mode===Ve.Range||h.mode===Ve.Steps)return v.xVal;if(h.mode===Ve.Count){if(h.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var d=h.values-1,u=100/d,_=[];d--;)_[d]=d*u;return _.push(100),R(_,h.stepped)}return h.mode===Ve.Positions?R(h.values,h.stepped):h.mode===Ve.Values?h.stepped?h.values.map(function(y){return v.fromStepping(v.getStep(v.toStepping(y)))}):h.values:[]}function R(h,d){return h.map(function(u){return v.fromStepping(d?v.getStep(u):u)})}function $(h){function d(F,z){return Number((F+z).toFixed(7))}var u=J(h),_={},y=v.xVal[0],S=v.xVal[v.xVal.length-1],C=!1,w=!1,j=0;return u=ta(u.slice().sort(function(F,z){return F-z})),u[0]!==y&&(u.unshift(y),C=!0),u[u.length-1]!==S&&(u.push(S),w=!0),u.forEach(function(F,z){var K,H,Q,ne=F,te=u[z+1],se,Yi,Qi,Zi,tr,es,ir,sr=h.mode===Ve.Steps;for(sr&&(K=v.xNumSteps[z]),K||(K=te-ne),te===void 0&&(te=ne),K=Math.max(K,1e-7),H=ne;H<=te;H=d(H,K)){for(se=v.toStepping(H),Yi=se-j,tr=Yi/(h.density||1),es=Math.round(tr),ir=Yi/es,Q=1;Q<=es;Q+=1)Qi=j+Q*ir,_[Qi.toFixed(5)]=[v.fromStepping(Qi),0];Zi=u.indexOf(H)>-1?he.LargeValue:sr?he.SmallValue:he.NoValue,!z&&C&&H!==te&&(Zi=0),H===te&&w||(_[se.toFixed(5)]=[H,Zi]),j=se}}),_}function Ne(h,d,u){var _,y,S=L.createElement("div"),C=(_={},_[he.None]="",_[he.NoValue]=e.cssClasses.valueNormal,_[he.LargeValue]=e.cssClasses.valueLarge,_[he.SmallValue]=e.cssClasses.valueSub,_),w=(y={},y[he.None]="",y[he.NoValue]=e.cssClasses.markerNormal,y[he.LargeValue]=e.cssClasses.markerLarge,y[he.SmallValue]=e.cssClasses.markerSub,y),j=[e.cssClasses.valueHorizontal,e.cssClasses.valueVertical],F=[e.cssClasses.markerHorizontal,e.cssClasses.markerVertical];le(S,e.cssClasses.pips),le(S,e.ort===0?e.cssClasses.pipsHorizontal:e.cssClasses.pipsVertical);function z(H,Q){var ne=Q===e.cssClasses.value,te=ne?j:F,se=ne?C:w;return Q+" "+te[e.ort]+" "+se[H]}function K(H,Q,ne){if(ne=d?d(Q,ne):ne,ne!==he.None){var te=W(S,!1);te.className=z(ne,e.cssClasses.marker),te.style[e.style]=H+"%",ne>he.NoValue&&(te=W(S,!1),te.className=z(ne,e.cssClasses.value),te.setAttribute("data-value",String(Q)),te.style[e.style]=H+"%",te.innerHTML=String(u.to(Q)))}}return Object.keys(h).forEach(function(H){K(H,h[H][0],h[H][1])}),S}function ue(){p&&(bn(p),p=null)}function xe(h){ue();var d=$(h),u=h.filter,_=h.format||{to:function(y){return String(Math.round(y))}};return p=o.appendChild(Ne(d,u,_)),p}function Je(){var h=a.getBoundingClientRect(),d="offset"+["Width","Height"][e.ort];return e.ort===0?h.width||a[d]:h.height||a[d]}function re(h,d,u,_){var y=function(C){var w=st(C,_.pageOffset,_.target||d);if(!w||Y()&&!_.doNotReject||na(o,e.cssClasses.tap)&&!_.doNotReject||h===s.start&&w.buttons!==void 0&&w.buttons>1||_.hover&&w.buttons)return!1;n||w.preventDefault(),w.calcPoint=w.points[e.ort],u(w,_)},S=[];return h.split(" ").forEach(function(C){d.addEventListener(C,y,n?{passive:!0}:!1),S.push([C,y])}),S}function st(h,d,u){var _=h.type.indexOf("touch")===0,y=h.type.indexOf("mouse")===0,S=h.type.indexOf("pointer")===0,C=0,w=0;if(h.type.indexOf("MSPointer")===0&&(S=!0),h.type==="mousedown"&&!h.buttons&&!h.touches)return!1;if(_){var j=function(K){var H=K.target;return H===u||u.contains(H)||h.composed&&h.composedPath().shift()===u};if(h.type==="touchstart"){var F=Array.prototype.filter.call(h.touches,j);if(F.length>1)return!1;C=F[0].pageX,w=F[0].pageY}else{var z=Array.prototype.find.call(h.changedTouches,j);if(!z)return!1;C=z.pageX,w=z.pageY}}return d=d||wn(L),(y||S)&&(C=h.clientX+d.x,w=h.clientY+d.y),h.pageOffset=d,h.points=[C,w],h.cursor=y||S,h}function ye(h){var d=h-sa(a,e.ort),u=d*100/Je();return u=En(u),e.dir?100-u:u}function bt(h){var d=100,u=!1;return l.forEach(function(_,y){if(!de(y)){var S=b[y],C=Math.abs(S-h),w=C===100&&d===100,j=C<d,F=C<=d&&h>S;(j||F||w)&&(u=y,d=C)}}),u}function jt(h,d){h.type==="mouseout"&&h.target.nodeName==="HTML"&&h.relatedTarget===null&&qi(h,d)}function zn(h,d){if(navigator.appVersion.indexOf("MSIE 9")===-1&&h.buttons===0&&d.buttonsProperty!==0)return qi(h,d);var u=(e.dir?-1:1)*(h.calcPoint-d.startCalcPoint),_=u*100/d.baseSize;Ks(u>0,_,d.locations,d.handleNumbers,d.connect)}function qi(h,d){d.handle&&(Bi(d.handle,e.cssClasses.active),N-=1),d.listeners.forEach(function(u){B.removeEventListener(u[0],u[1])}),N===0&&(Bi(o,e.cssClasses.drag),Gi(),h.cursor&&(q.style.cursor="",q.removeEventListener("selectstart",Sn))),e.events.smoothSteps&&(d.handleNumbers.forEach(function(u){qe(u,b[u],!0,!0,!1,!1)}),d.handleNumbers.forEach(function(u){G("update",u)})),d.handleNumbers.forEach(function(u){G("change",u),G("set",u),G("end",u)})}function Wi(h,d){if(!d.handleNumbers.some(de)){var u;if(d.handleNumbers.length===1){var _=l[d.handleNumbers[0]];u=_.children[0],N+=1,le(u,e.cssClasses.active)}h.stopPropagation();var y=[],S=re(s.move,B,zn,{target:h.target,handle:u,connect:d.connect,listeners:y,startCalcPoint:h.calcPoint,baseSize:Je(),pageOffset:h.pageOffset,handleNumbers:d.handleNumbers,buttonsProperty:h.buttons,locations:b.slice()}),C=re(s.end,B,qi,{target:h.target,handle:u,listeners:y,doNotReject:!0,handleNumbers:d.handleNumbers}),w=re("mouseout",B,jt,{target:h.target,handle:u,listeners:y,doNotReject:!0,handleNumbers:d.handleNumbers});y.push.apply(y,S.concat(C,w)),h.cursor&&(q.style.cursor=getComputedStyle(h.target).cursor,l.length>1&&le(o,e.cssClasses.drag),q.addEventListener("selectstart",Sn,!1)),d.handleNumbers.forEach(function(j){G("start",j)})}}function Kn(h){h.stopPropagation();var d=ye(h.calcPoint),u=bt(d);u!==!1&&(e.events.snap||yn(o,e.cssClasses.tap,e.animationDuration),qe(u,d,!0,!0),Gi(),G("slide",u,!0),G("update",u,!0),e.events.snap?Wi(h,{handleNumbers:[u]}):(G("change",u,!0),G("set",u,!0)))}function Gn(h){var d=ye(h.calcPoint),u=v.getStep(d),_=v.fromStepping(u);Object.keys(I).forEach(function(y){y.split(".")[0]==="hover"&&I[y].forEach(function(S){S.call(qt,_)})})}function Yn(h,d){if(Y()||de(d))return!1;var u=["Left","Right"],_=["Down","Up"],y=["PageDown","PageUp"],S=["Home","End"];e.dir&&!e.ort?u.reverse():e.ort&&!e.dir&&(_.reverse(),y.reverse());var C=h.key.replace("Arrow",""),w=C===y[0],j=C===y[1],F=C===_[0]||C===u[0]||w,z=C===_[1]||C===u[1]||j,K=C===S[0],H=C===S[1];if(!F&&!z&&!K&&!H)return!0;h.preventDefault();var Q;if(z||F){var ne=F?0:1,te=er(d),se=te[ne];if(se===null)return!1;se===!1&&(se=v.getDefaultStep(b[d],F,e.keyboardDefaultStep)),j||w?se*=e.keyboardPageMultiplier:se*=e.keyboardMultiplier,se=Math.max(se,1e-7),se=(F?-1:1)*se,Q=E[d]+se}else H?Q=e.spectrum.xVal[e.spectrum.xVal.length-1]:Q=e.spectrum.xVal[0];return qe(d,v.toStepping(Q),!0,!0),G("slide",d),G("update",d),G("change",d),G("set",d),!1}function Qn(h){h.fixed||l.forEach(function(d,u){re(s.start,d.children[0],Wi,{handleNumbers:[u]})}),h.tap&&re(s.start,a,Kn,{}),h.hover&&re(s.move,a,Gn,{hover:!0}),h.drag&&c.forEach(function(d,u){if(!(d===!1||u===0||u===c.length-1)){var _=l[u-1],y=l[u],S=[d],C=[_,y],w=[u-1,u];le(d,e.cssClasses.draggable),h.fixed&&(S.push(_.children[0]),S.push(y.children[0])),h.dragAll&&(C=l,w=A),S.forEach(function(j){re(s.start,j,Wi,{handles:C,handleNumbers:w,connect:d})})}})}function zi(h,d){I[h]=I[h]||[],I[h].push(d),h.split(".")[0]==="update"&&l.forEach(function(u,_){G("update",_)})}function Zn(h){return h===je.aria||h===je.tooltips}function St(h){var d=h&&h.split(".")[0],u=d?h.substring(d.length):h;Object.keys(I).forEach(function(_){var y=_.split(".")[0],S=_.substring(y.length);(!d||d===y)&&(!u||u===S)&&(!Zn(S)||u===S)&&delete I[_]})}function G(h,d,u){Object.keys(I).forEach(function(_){var y=_.split(".")[0];h===y&&I[_].forEach(function(S){S.call(qt,E.map(e.format.to),d,E.slice(),u||!1,b.slice(),qt)})})}function Xt(h,d,u,_,y,S,C){var w;return l.length>1&&!e.events.unconstrained&&(_&&d>0&&(w=v.getAbsoluteDistance(h[d-1],e.margin,!1),u=Math.max(u,w)),y&&d<l.length-1&&(w=v.getAbsoluteDistance(h[d+1],e.margin,!0),u=Math.min(u,w))),l.length>1&&e.limit&&(_&&d>0&&(w=v.getAbsoluteDistance(h[d-1],e.limit,!1),u=Math.min(u,w)),y&&d<l.length-1&&(w=v.getAbsoluteDistance(h[d+1],e.limit,!0),u=Math.max(u,w))),e.padding&&(d===0&&(w=v.getAbsoluteDistance(0,e.padding[0],!1),u=Math.max(u,w)),d===l.length-1&&(w=v.getAbsoluteDistance(100,e.padding[1],!0),u=Math.min(u,w))),C||(u=v.getStep(u)),u=En(u),u===h[d]&&!S?!1:u}function Ki(h,d){var u=e.ort;return(u?d:h)+", "+(u?h:d)}function Ks(h,d,u,_,y){var S=u.slice(),C=_[0],w=e.events.smoothSteps,j=[!h,h],F=[h,!h];_=_.slice(),h&&_.reverse(),_.length>1?_.forEach(function(K,H){var Q=Xt(S,K,S[K]+d,j[H],F[H],!1,w);Q===!1?d=0:(d=Q-S[K],S[K]=Q)}):j=F=[!0];var z=!1;_.forEach(function(K,H){z=qe(K,u[K]+d,j[H],F[H],!1,w)||z}),z&&(_.forEach(function(K){G("update",K),G("slide",K)}),y!=null&&G("drag",C))}function Gs(h,d){return e.dir?100-h-d:h}function eo(h,d){b[h]=d,E[h]=v.fromStepping(d);var u=Gs(d,0)-Z,_="translate("+Ki(u+"%","0")+")";l[h].style[e.transformRule]=_,Ys(h),Ys(h+1)}function Gi(){A.forEach(function(h){var d=b[h]>50?-1:1,u=3+(l.length+d*h);l[h].style.zIndex=String(u)})}function qe(h,d,u,_,y,S){return y||(d=Xt(b,h,d,u,_,!1,S)),d===!1?!1:(eo(h,d),!0)}function Ys(h){if(!!c[h]){var d=0,u=100;h!==0&&(d=b[h-1]),h!==c.length-1&&(u=b[h]);var _=u-d,y="translate("+Ki(Gs(d,_)+"%","0")+")",S="scale("+Ki(_/100,"1")+")";c[h].style[e.transformRule]=y+" "+S}}function Qs(h,d){return h===null||h===!1||h===void 0||(typeof h=="number"&&(h=String(h)),h=e.format.from(h),h!==!1&&(h=v.toStepping(h)),h===!1||isNaN(h))?b[d]:h}function Jt(h,d,u){var _=$i(h),y=b[0]===void 0;d=d===void 0?!0:d,e.animate&&!y&&yn(o,e.cssClasses.tap,e.animationDuration),A.forEach(function(w){qe(w,Qs(_[w],w),!0,!1,u)});var S=A.length===1?0:1;if(y&&v.hasNoSize()&&(u=!0,b[0]=0,A.length>1)){var C=100/(A.length-1);A.forEach(function(w){b[w]=w*C})}for(;S<A.length;++S)A.forEach(function(w){qe(w,b[w],!0,!0,u)});Gi(),A.forEach(function(w){G("update",w),_[w]!==null&&d&&G("set",w)})}function to(h){Jt(e.start,h)}function io(h,d,u,_){if(h=Number(h),!(h>=0&&h<A.length))throw new Error("noUiSlider: invalid handle number, got: "+h);qe(h,Qs(d,h),!0,!0,_),G("update",h),u&&G("set",h)}function Zs(h){if(h===void 0&&(h=!1),h)return E.length===1?E[0]:E.slice(0);var d=E.map(e.format.to);return d.length===1?d[0]:d}function so(){for(St(je.aria),St(je.tooltips),Object.keys(e.cssClasses).forEach(function(h){Bi(o,e.cssClasses[h])});o.firstChild;)o.removeChild(o.firstChild);delete o.noUiSlider}function er(h){var d=b[h],u=v.getNearbySteps(d),_=E[h],y=u.thisStep.step,S=null;if(e.snap)return[_-u.stepBefore.startValue||null,u.stepAfter.startValue-_||null];y!==!1&&_+y>u.stepAfter.startValue&&(y=u.stepAfter.startValue-_),_>u.thisStep.startValue?S=u.thisStep.step:u.stepBefore.step===!1?S=!1:S=_-u.stepBefore.highestStep,d===100?y=null:d===0&&(S=null);var C=v.countStepDecimals();return y!==null&&y!==!1&&(y=Number(y.toFixed(C))),S!==null&&S!==!1&&(S=Number(S.toFixed(C))),[S,y]}function ro(){return A.map(er)}function no(h,d){var u=Zs(),_=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];_.forEach(function(S){h[S]!==void 0&&(i[S]=h[S])});var y=kn(i);_.forEach(function(S){h[S]!==void 0&&(e[S]=y[S])}),v=y.spectrum,e.margin=y.margin,e.limit=y.limit,e.padding=y.padding,e.pips?xe(e.pips):ue(),e.tooltips?T():Xe(),b=[],Jt(Us(h.start)?h.start:u,d)}function oo(){a=k(o),g(e.connect,a),Qn(e.events),Jt(e.start),e.pips&&xe(e.pips),e.tooltips&&T(),x()}oo();var qt={destroy:so,steps:ro,on:zi,off:St,get:Zs,set:Jt,setHandle:io,reset:to,disable:vt,enable:Ji,__moveHandles:function(h,d,u){Ks(h,d,b,u)},options:i,updateOptions:no,target:o,removePips:ue,removeTooltips:Xe,getPositions:function(){return b.slice()},getTooltips:function(){return m},getOrigins:function(){return l},pips:xe};return qt}function Fa(t,e){if(!t||!t.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+t);if(t.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var i=kn(e),s=Na(t,i,e);return t.noUiSlider=s,s}var Pn={__spectrum:An,cssClasses:xn,create:Fa};function Rn(t){return t.filter((e,i)=>t.indexOf(e)===i)}function Ln(t){let e={};return{to(i){let s=t.format(i);return e[s]=i,s},from(i){return e[i]}}}function Vs(t,e){let{min:i,max:s,from:r,to:n}=t;return i=parseFloat(i),s=parseFloat(s),i===s&&s++,r=parseFloat(r)||i,n=parseFloat(n)||s,{range:{min:i,max:s},start:[e.to(r),e.to(n)]}}function In(t,e,i,s={}){return Pn.create(t,M({cssPrefix:"dfd-slider-",orientation:"horizontal",direction:s.rtl?"rtl":"ltr",tooltips:!0,padding:0,connect:!0,animate:!0,step:1,keyboardSupport:!0,format:e,pips:{mode:"count",values:3,density:6,stepped:!0,format:e}},i))}function Dn(t,e,i){let s=getComputedStyle(t).direction==="rtl",r=t.noUiSlider.options.direction==="rtl",n=t.noUiSlider.options.orientation==="vertical",a=t.noUiSlider.getTooltips().map(c=>c.cloneNode(!0)),l=t.noUiSlider.getOrigins();a.forEach(function(c,p){c&&l[p].appendChild(c)}),t.noUiSlider.on("update",function(c,p,m,v,E){let b=[[]],A=[[]],N=[[]],I=0;a[0]&&(b[0][0]=0,A[0][0]=E[0],N[0][0]=c[0]);for(let L=1;L<E.length;L++)(!a[L]||E[L]-E[L-1]>e)&&(I++,b[I]=[],N[I]=[],A[I]=[]),a[L]&&(b[I].push(L),N[I].push(c[L]),A[I].push(E[L]));b.forEach(function(L,B){let q=L.length;for(let Z=0;Z<q;Z++){let W=L[Z];if(Z===q-1){let V=0;A[B].forEach(function(O){V+=1e3-O});let _e=n?"bottom":"right",g=r?0:q-1,k=1e3-A[B][g];V=(s&&!n?100:0)+V/q-k,a[W].innerHTML=Rn(N[B]).join(i),a[W].style.display="block",a[W].style[_e]=V+"%"}else a[W].style.display="none"}})})}"use strict";var On={mounted(){let{facet:t,language:e,currency:i,currencyDecimal:s,currencyFormat:r,currencyPrecision:n,currencySymbol:o,currencyThousand:a,decimalPrecision:l,min:c,max:p,from:m,to:v,target:E}=this.el.dataset,b=this.el.dataset.autohideTooltips==="true",A=this.options.numberingSystem||"latn",N=(document.documentElement.getAttribute("dir")||"").toLowerCase()==="rtl",I=(()=>typeof r=="string"?new Fs(r,o,a,s,parseInt(n,10)):i?Ni(e,i,parseInt(n,10),A):Fi(e,parseInt(l,10),A))();this.format=Ln(I),this.slider=In(this.el,this.format,Vs({min:c,max:p,from:m,to:v},this.format),{rtl:N}),this.slider.on("change",L=>{let[B,q]=L,W={index:this.el.dataset.index,range:{[t]:{from:this.format.from(B),to:this.format.from(q)}}};E?this.pushEventTo(E,"slide",W):this.pushEvent("slide",W)}),b||Dn(this.el,25," - ")},updated(){let{min:t,max:e,from:i,to:s}=this.el.dataset;this.slider.updateOptions(Vs({min:t,max:e,from:i,to:s},this.format))},destroyed(){this.el.noUiSlider.destroy()}};"use strict";var Hn={mounted(){let t=0,e=0;this.el.addEventListener("touchstart",i=>{t=i.changedTouches[0].screenY},!1),this.el.addEventListener("touchend",i=>{e=i.changedTouches[0].screenY,e>t&&this.pushEvent(this.el.dataset.action,{index:""})},!1)}};var Vi=window.SpeechRecognition||window.webkitSpeechRecognition||null,Mn=["click"],Nn=["start","end","error","result"],Ua="voice-search",Fn="voice-status-change";function $a(t){return t.results.length>0?t.results[0][0].transcript:null}var Un={mounted(){!Vi||(this.recording=!1,this.driver=new Vi,this.driver.continuous=!1,this.driver.interimResults=!1,this.handleVoiceEvent=t=>{switch(t.type){case"end":case"error":this.driver.stop(),this.recording=!1,this.pushEvent(Fn,{recording:!1});break;case"click":this.driver[this.recording?"stop":"start"](),this.recording=!this.recording,this.pushEvent(Fn,{recording:this.recording});break;case"result":let e=$a(t);e&&this.pushEvent(Ua,{query:e});break}},Mn.forEach(t=>this.el.addEventListener(t,this.handleVoiceEvent)),Nn.forEach(t=>this.driver.addEventListener(t,this.handleVoiceEvent)))},destroyed(){Mn.forEach(t=>this.el.removeEventListener(t,this.handleVoiceEvent)),Nn.forEach(t=>this.driver.removeEventListener(t,this.handleVoiceEvent)),this.driver=null}};"use strict";var $n={mounted(){this.sort=t=>{let e=t.target.selectedOptions[0];this.pushEvent("sort",{index:e.getAttribute("dfd-data-index"),field:e.getAttribute("dfd-data-field"),order:e.getAttribute("dfd-data-order")})},this.el.addEventListener("change",this.sort)},destroyed(){this.el.removeEventListener("change",this.sort)}};function ge(t,e,...i){var o;let s=((o=i.find(a=>!!a.options))==null?void 0:o.options)||{},r={get tag(){return e},get options(){return s},debug(...a){D(`[hook][${t}]`,...a)}};return["mounted","beforeUpdate","updated","destroyed","disconnected","reconnected"].forEach(a=>{let l=i.map(c=>c[a]).filter(c=>!!c);r[a]=function(){l.length>0&&this.debug(`${a}()`),l.forEach(c=>c.call(this))}}),r}function Bn(t){return JSON.parse(JSON.stringify(t))}function js(t,e,i){let s=i.x,r=s+i.width,n=i.y,o=n+i.height;return t>=s&&t<=r&&e>=n&&e<=o}function Bt(t,e=!1){let i=Ls("__DF_LAYER_SERVER__")||`https://${t.toLowerCase()}-layer.doofinder.com`;return e?i.replace(/^http/,"ws"):i}function Vn(){var t;if("maxTouchPoints"in navigator)return navigator.maxTouchPoints>0;if("msMaxTouchPoints"in navigator)return navigator.msMaxTouchPoints>0;{let e=(t=window.matchMedia)==null?void 0:t.call(window,"(pointer:coarse)");if((e==null?void 0:e.media)==="(pointer:coarse)")return!!e.matches;if("orientation"in window)return!0;{let i=navigator.userAgent;return/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(i)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(i)}}}function Xs(t){let e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));if(e)return decodeURIComponent(e[1])}function jn(t){if(t instanceof PointerEvent)switch(t.pointerType){case"mouse":case"pen":case"touch":return!0;default:return!1}else if(t instanceof MouseEvent){let{pageX:e,pageY:i,target:s}=t;return!(e===i&&e===0&&Ba(s))}return!1}function Ba(t){return t.getAttribute("type")==="submit"&&(t.tagName==="BUTTON"||t.tagName==="INPUT")}function Js(t){return typeof t=="undefined"?null:t}var Va="Search",Xn=Vn(),Jn="latestSearches",ja="dfd-root",qs="dfdTarget",Xa=10,Vt="transientState",Ws="isTransient",ji=class{constructor(e){this.__handleTriggerEvent__=this.__handleTriggerEvent__.bind(this),this.__handlePopstate__=this.__handlePopstate__.bind(this),this.__handleLinkClick__=this.__handleLinkClick__.bind(this),this.__handleDocumentMousedown__=this.__handleDocumentMousedown__.bind(this),this.__handleDocumentKeyup__=this.__handleDocumentKeyup__.bind(this),this.__updateSocketParams__=this.__updateSocketParams__.bind(this),this.__afterConnect__=this.__afterConnect__.bind(this),this.__afterDisconnect__=this.__afterDisconnect__.bind(this);let{id:i,installationId:s,zone:r,language:n,currency:o,exportResultsData:a,hashid:l,trigger:c,autoload:p,urlHash:m,search_query_retention:v,layerType:E}=e;this._installationId=s,this._zone=r,this._hashid=l,this._language=n,this._currency=o,this._exportResultsData=a,this._layerType=E,this._mount=this.__createMount__(i),this._mount.addEventListener("click",this.__handleLinkClick__),this._eventBus=new Ps(this._mount.id),this._eventBusSubscriptions=[Is,Mt,Nt,Ds].map(b=>this._eventBus.on(b,this.__handleTriggerEvent__)),this._trigger=c,this._trigger.setEventBus(this._eventBus),this._display=new ks(this._mount),this._state=this._layerType!=="category_pages"?new Ri({installationId:s,autoload:p,urlHash:m}):new Ht({installationId:s,urlHash:m}),this._data=new gt(`${s}.data`),this._sessionData=new gt(`${s}.data`,window.sessionStorage),this._params=this.__buildSocketParams__(e),this._hooks=this.__buildSocketHooks__(e),this._connection=null,this._connectedPromise=new De,this._theme=null,v==null?this._searchQueryRetention=m:this._searchQueryRetention=v,this._transientQuery=null,this.closable&&this.mount.classList.add("dfd-closable"),window.addEventListener("popstate",this.__handlePopstate__),this._trigger.flushMessages(),this.__applyTransientState__(),this.__loadState__().then(()=>this.dispatch("doofinder.ready"))}__createMount__(e){let i=document.createElement("div");return i.id=e||`df-${_t(32)}`,i.dataset.dfdView=Va,i.setAttribute(Me,""),i.classList.add(ja),Object.defineProperty(i,"doofinderTag",{value:this,writable:!1}),i}get mount(){return this._mount}get trigger(){return this._trigger}get display(){return this._display}get hashid(){return this._hashid}get installationId(){return this._installationId}get zone(){return this._zone}get language(){return this._language}get currency(){return this._currency}get exportResultsData(){return this._exportResultsData}get layerType(){return this._layerType}get searchQueryRetention(){return this._searchQueryRetention}get data(){return this._data}get state(){return this._state}get closable(){return this.display.type!==Ze||!this.state.hasQueryParam}enableDebug(){return this._connection?(this._connection.enableDebug(),!0):!1}debug(...e){D("[tag]",...e)}saveTransientState(e){this._sessionData.setItem(Vt,e),this._sessionData.setItem(Ws,!0),this.debug("save transient state:",e)}__popTransientState__(){let e=this._sessionData.getItem(Vt)||null;return this._sessionData.removeItem(Vt),this.debug("pop transient state:",e),e}__handleTriggerEvent__(e){let{source:i,originalEvent:s}=e.detail,{query:r}=e.detail;!r&&this._transientQuery&&(r=this._transientQuery);let n=r?{query:r}:{};this.connect(n).then(()=>{this.__shouldDisplay__(e)?(this.show(i),e.type===Nt&&this.search(r)):e.type===Ds&&this.submit(r,o=>{var l;if(!o)return;let{submit:a}=o||{};a&&((l=s==null?void 0:s.target.closest("form"))==null||l.submit())})})}__applyTransientState__(){let e=this._sessionData.getItem(Vt),i=this._sessionData.getItem(Ws);this.debug("__applyTransientState__","isTransient:",i,"searchQueryRetention:",this._searchQueryRetention),i&&(this._searchQueryRetention?(this.debug("apply transient state - search query retention true:",e),this.updateQuery(e)):(this.debug("apply transient state - search query retention false:",""),this._state.replace(""),this.updateQuery("")),this._sessionData.removeItem(Ws),this._sessionData.removeItem(Vt))}__shouldDisplay__(e){let{query:i}=e.detail;switch(this._display.type){case Si:return(e.type===Nt||e.type===Mt)&&(this._display.screenType==="classic-initial"||!!i);case Ze:return(e.type===Nt||e.type===Mt)&&!!i;case yi:return e.type===Is||e.type===Mt;default:return!1}}__handlePopstate__(e){this._layerType!=="category_pages"&&(this.debug("handle pop state event:",e),this._connection?this._state.validEvent(e)?this.__changeState__(e.state):this.disconnect():this.__loadState__())}__changeState__(e){var i;this.debug("[tag] change state: ",e,"connection: ",this._connection),(i=this._connection)==null||i.pushEvent("change-state",e)}__handleLinkClick__(e){var i,s;if(this._layerType==="category_pages"){if(!e.target.href)return;this._state.saveCurrentAsBackState();return}if(e.target.href){let r=e.target.closest("[dfd-value-dfid]"),n=r==null?void 0:r.getAttribute("dfd-value-dfid");n&&this._sessionData.setItem(qs,n),(i=this._connection)==null||i.setPreventReconnect(!0);let o=!0;this.saveTransientState(this._state.get(o))}else(s=this._connection)==null||s.setPreventReconnect(!1)}popTargetItemId(){return this.debug("popTargetItemId",this._sessionData.getItem(qs)),this._sessionData.popItem(qs)}__handleDocumentMousedown__(e){if(this._display.type===Ze||!jn(e))return;let{clientX:i,clientY:s}=e;if(js(i,s,this._mount.getBoundingClientRect()))return;let r=this._display.method.positionReference;!!r&&(js(i,s,r.getBoundingClientRect())||e.target.closest('button[type="submit"]')&&e.target.closest("form")===r.closest("form"))||this.close()}__handleDocumentKeyup__(e){var i;e.key==="Escape"&&this.layerType!=="category_pages"&&((i=document.activeElement)==null||i.blur(),this.close())}__loadState__(){if(this._layerType==="category_pages")return Promise.resolve();let e=this._state.get();return this.debug("load state:",e),e?(this._state.saveAbsoluteURL(),this.updateQuery(e),e&&e.match("^#([A-Za-z0-9-]+)/(embedded|classic)/$")?Promise.resolve(this.close()):this.connect({state:e}).then(()=>this.show())):Promise.resolve()}updateQuery(e){let i=Ri.getQuery(e);this._trigger.updateQuery(i),this._transientQuery=i}getLatestSearches(){return this._data.getItem(Jn)||[]}updateLatestSearches(e){this._data.setItem(Jn,e)}onLoad(e){let{min_capture_length:i,capture_submit:s,align:r,display_type:n,insertion_point:o,insertion_method:a,screen_type:l,theme:c}=e;this.__updateTrigger__({min_capture_length:i,capture_submit:s}),this.__updateDisplay__({display_type:n,insertion_point:o,insertion_method:a,screen_type:l,theme:c,align:r}),this._connectedPromise.resolve(e)}__updateTrigger__({min_capture_length:e,capture_submit:i}){this._trigger.setCaptureLength(e),this._trigger.captureSubmit=i}__updateDisplay__({display_type:e,insertion_point:i,insertion_method:s,screen_type:r,theme:n,align:o}){this._display.setType(e,{placement:{insertionPoint:i,insertionMethod:s},align:o}),this._display.screenType=r,this._display.updateTheme(n),this._display.hidden||this.updatePosition()}updatePosition(e){return P(this,null,function*(){this._display.updatePosition({positionReference:e||(yield this._trigger.getElement())})})}close(){var e,i;this.closable&&((i=(e=this.getHooksByName("Layer"))==null?void 0:e.pop())==null||i.close())}show(e){return P(this,null,function*(){yield this.updatePosition(e),yield this._display.show(),this.dispatch("doofinder.show")})}hide(){return P(this,null,function*(){yield this._display.hide(),this.dispatch("doofinder.hide")})}dispatch(e,i={}){let s=Te(M({},i),{tag:this});document.dispatchEvent(new CustomEvent(e,{detail:s}))}connect(e){return this._connection||(this.debug(`creating live socket for layer: ${this._mount.id}`),this._connection=new Ss(this.__connectionSetup__(e)),this._connection.connect(this.__afterConnect__)),this._connectedPromise}open(){return P(this,arguments,function*(e={}){let{search:i,screen:s}=e,r=M({},e);i!=null&&!s&&(r.screen="fallback"),typeof i=="string"&&(delete r.search,r.query=i),yield this.connect(r),yield this.show(),typeof i=="object"&&this.search(i)})}openCategoryPages(e){return P(this,null,function*(){let{search:i}=e,s={search:i},r=this._state.getBackState()||this._state.getFromURLHash();r&&(s.state=r),D("[category pages] connect with",s),yield this.connect(s),yield this.show(),r||(D("[category pages] no state, opening with: ",i),this.search(i))})}disconnect(){var e;this.layerType!=="category_pages"&&(this.debug(`disconnecting from live socket: ${this._mount.id}`),(e=this._connection)==null||e.disconnect(this.__afterDisconnect__),this._connection=null,this._connectedPromise=new De)}destroy(){return P(this,null,function*(){var e;this.debug(`destroy: ${this._mount.id}`),(e=this._connection)==null||e.disconnect(this.__afterDisconnect__),this._connection=null,this._eventBusSubscriptions.forEach(i=>i()),this._eventBusSubscriptions=null,this._eventBus.teardown(),this._eventBus=null,yield this._display.destroy(),this._display=null,window.removeEventListener("popstate",this.__handlePopstate__),this.dispatch("doofinder.destroy"),this._trigger.destroy()})}getHooksByName(e){var i;return(i=this._connection)==null?void 0:i.getHooksByName(e)}search(e,i){var r;let s=typeof e=="string"?{query:e}:e;(r=this._connection)==null||r.pushEvent("search-suggest",{search:s},i)}changeLocale(e,i,s){var r;(r=this._connection)==null||r.pushEvent("change-locale",{language:e,currency:i},s)}submit(e,i){var s;(s=this._connection)==null||s.pushEvent("search-submit",{search:{query:e}},i)}__buildSocketParams__(e){let{params:i,sort:s,vars:r,indices:n,state:o}=e,a={hashid:this._hashid,origin:window.location.hostname,indices:n,params:i,sort:s,vars:r,state:o};return["indices","search-server"].filter(l=>!a[l]).forEach(l=>delete a[l]),a}__buildSocketHooks__(e){let i=e.hooks||{},s={Carousel:ge("Carousel",this,en,i.Carousel||{}),ImageSearch:ge("ImageSearch",this,rn),Input:ge("Input",this,nn,i.Input||{}),Layer:ge("Layer",this,dn,i.Layer||{}),AddToCart:ge("AddToCart",this,on,i.AddToCart||{}),EmbeddedResults:ge("EmbeddedResults",this,Ns,Xn?Ms:{},i.EmbeddedResults||{}),Results:ge("Results",this,vn,Xn?Ms:{},Ns,i.Results||{}),Slider:ge("Slider",this,On,i.Slider||{}),Swipe:ge("Swipe",this,Hn,i.Swipe||{}),VoiceSearch:ge("VoiceSearch",this,Un,i.VoiceSearch||{}),SortSelect:ge("SortSelect",this,$n)};return D("[tag] Hooks created:",this._mount.id,s),Object.keys(i).filter(r=>!s[r]).forEach(r=>{s[r]=ge(r,this,i[r]||{})}),s}__connectionSetup__(e){let s=`${Bt(this._zone,!0)}/layer/${tt}`,r=this._state.get(),n=this.__popTransientState__();return r?e.state=r:n&&!e.state&&(e.state=n),{url:s,mount:this._mount,hooks:this._hooks,mainHook:"Layer",params:()=>this.__updateSocketParams__(e),appName:"layer",disconnectCallback:(()=>{this.debug("layer died and can't reconnect automatically! \u{1F92C}"),this.__afterDisconnect__()}).bind(this)}}__updateSocketParams__(e){var s,r,n,o;let i=Te(M({},Bn(this._params)),{zone:this.zone,installation_id:this.installationId,language:this.language,currency:this.currency,session_id:Doofinder.Session.getSessionId(),session_alive:Doofinder.Session.isLive("layer"),user_id:Doofinder.Session.getUserId(),latest_searches:this.getLatestSearches(),voice_supported:!!Vi,export_results_data:Js((s=this.exportResultsData)==null?void 0:s.slice(0,Xa)),ga_client_id:Js((r=Xs("_ga"))==null?void 0:r.substring(6)),layer_type:this.layerType,state:this._state.get()});return this._layerType==="category_pages"&&(i.search=e.search),((n=this._connection)==null?void 0:n.connected)||(i=M(M({},i),e)),this.debug(`__updateSocketParams__ for layer: ${this._mount.id}`,i," socket connected? ",(o=this._connection)==null?void 0:o.connected," overrides: ",e," current state",this._state.get()),i}__afterConnect__(){document.addEventListener("mousedown",this.__handleDocumentMousedown__),document.addEventListener("keyup",this.__handleDocumentKeyup__,{passive:!0})}__afterDisconnect__(){this.hide(),document.removeEventListener("keyup",this.__handleDocumentKeyup__),document.removeEventListener("mousedown",this.__handleDocumentMousedown__),this.dispatch("doofinder.disconnect")}};var Ja=Object.freeze({language(t){let e=(t==null?void 0:t.replaceAll("_","-").trim().split("-"))||[];function i(s){return s?`-${s.toUpperCase()}`:""}if(e.length<3){let[s,r]=e;return`${s==null?void 0:s.toLowerCase()}${i(r)}`}else{let[s,r,n]=e;return`${s==null?void 0:s.toLowerCase()}-${r.toUpperCase()}${i(n)}`}},currency(t){return t==null?void 0:t.trim().toUpperCase()}});function zs(t){return P(this,null,function*(){let e=document.createElement("style");e.appendChild(document.createTextNode((t||"").trim())),document.head.appendChild(e)})}function qn(t){return P(this,null,function*(){var r;let e=Wa(t);D("[category pages] displayForSeo options: ",t,"params: ",e);let i=yield za(e);if(D("[category pages] displayForSeo htmlContent: ",i),!i)return;mount=qa(i),t.device=="mobile"&&(mount.classList.remove("dfd-embedded"),mount.classList.add("dfd-mobile_embedded")),t.custom_css.forEach(zs);let s=(r=t.custom_properties)==null?void 0:r.join(`
`);zs(`#${mount.id} {
${s||""}
}`),element=document.querySelector(t.insertion_point),element&&element.replaceWith(mount)})}function qa(t){let e=document.createElement("div");return e.id=`df-${_t(32)}`,e.dataset.dfdView="Search",e.classList.add("dfd-root"),e.classList.add("dfd-embedded"),e.setAttribute("data-dfd-screen","category-pages"),e.insertAdjacentHTML("afterbegin",t),e}function Wa(t){let{installationId:e,zone:i,search:s,sort:r,urlHash:n}=t,o=Doofinder.Session.getSessionId(),a=Doofinder.Session.getUserId(),l=new Ht({installationId:e,urlHash:n}).get();return{installationId:e,zone:i,state:l,search:s,sort:r,session_id:o,user_id:a}}function za(t){return P(this,null,function*(){let{zone:e}=t,i=Bt(e),s=new URL(`${i}/api/${tt}/categorypage`);return Object.keys(t).forEach(function(r){let n=t[r];typeof n=="undefined"||n==null||(typeof n=="object"&&(n=JSON.stringify(n)),s.searchParams.append(r,n))}),htmlContent=yield fetch(s).then(function(r){return r.ok?r.text():""}),htmlContent})}var Xi=[];document.addEventListener("doofinder.destroy",t=>{Xi=Xi.filter(e=>e!==t.detail)});var Wn={getTags(){return Xi.slice(0)},create(t){let e=new ji(t);return t.forceOpen&&t.layerType==="category_pages"&&(qn(t),e.openCategoryPages(t)),Xi.push(e),e},destroy(t){var e;t instanceof ji?t.destroy():(e=t==null?void 0:t.doofinderTag)==null||e.destroy()},enableDebug:Gr,disableDebug:Yr,debug:D,utils:{buildNumericFormatter:Fi,buildCurrencyFormatter:Ni}};Object.defineProperty(Wn,"__version__",{value:tt});hr(lr,Wn);})();
